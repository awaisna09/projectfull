import{r as c,a as _a,b as Un,R as He,d as Uo}from"./vendor-0dbe2b95.js";import{c as Gn,_ as Ms}from"./supabase-d667cb87.js";import{C as Go,a as Ho,L as Vo,P as Wo,b as Qo,B as Yo,p as Ko,c as Jo,d as Zo,i as Xo,e as el}from"./charts-e0e5efd4.js";var Hn={exports:{}},Er={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=c,sl=Symbol.for("react.element"),rl=Symbol.for("react.fragment"),al=Object.prototype.hasOwnProperty,nl=tl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,il={key:!0,ref:!0,__self:!0,__source:!0};function Vn(s,t,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(a in t)al.call(t,a)&&!il.hasOwnProperty(a)&&(n[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:sl,type:s,key:i,ref:l,props:n,_owner:nl.current}}Er.Fragment=rl;Er.jsx=Vn;Er.jsxs=Vn;Hn.exports=Er;var e=Hn.exports,na={},Wa=_a;na.createRoot=Wa.createRoot,na.hydrateRoot=Wa.hydrateRoot;/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ll=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),Qa=s=>{const t=ll(s);return t.charAt(0).toUpperCase()+t.slice(1)},Wn=(...s)=>s.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),cl=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=c.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:l,...o},d)=>c.createElement("svg",{ref:d,...dl,width:t,height:t,stroke:s,strokeWidth:a?Number(r)*24/Number(t):r,className:Wn("lucide",n),...!i&&!cl(o)&&{"aria-hidden":"true"},...o},[...l.map(([m,u])=>c.createElement(m,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(s,t)=>{const r=c.forwardRef(({className:a,...n},i)=>c.createElement(ul,{ref:i,iconNode:t,className:Wn(`lucide-${ol(Qa(s))}`,`lucide-${s}`,a),...n}));return r.displayName=Qa(s),r};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ie=J("arrow-left",ml);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ae=J("arrow-right",hl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],Pr=J("atom",xl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],xs=J("award",gl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ya=J("bell",pl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Qn=J("book-marked",fl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Pe=J("book-open",yl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],vl=J("book",bl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],er=J("bot",jl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],qe=J("brain",wl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Yn=J("briefcase",Nl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Rs=J("building-2",Sl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],_l=J("building",kl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Us=J("calculator",Cl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qt=J("calendar",Tl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Yt=J("chart-column",Al);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],Ka=J("chart-no-axes-column-increasing",El);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Il=J("chart-pie",Pl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Gr=J("check",Ml);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ia=J("chevron-down",Dl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],oa=J("chevron-right",Rl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],la=J("chevron-left",Ll);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Je=J("circle-alert",Ol);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Me=J("circle-check-big",$l);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cr=J("circle-check",Fl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],Ja=J("circle-play",ql);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Za=J("circle-question-mark",Bl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],gs=J("circle-x",zl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Fe=J("clock",Ul);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]],Xa=J("construction",Gl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ca=J("credit-card",Hl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Wl=J("crown",Vl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],da=J("database",Ql);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],dr=J("download",Yl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],zt=J("eye-off",Kl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xt=J("eye",Jl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],rt=J("file-text",Zl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],ec=J("flag",Xl);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],ur=J("flame",tc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Ir=J("flask-conical",sc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Kn=J("globe",rc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Mr=J("graduation-cap",ac);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],en=J("history",nc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Ca=J("house",ic);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],cs=J("image",oc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],cc=J("info",lc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],uc=J("key",dc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Ke=J("lightbulb",mc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],fr=J("list",hc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ua=J("loader-circle",xc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],yr=J("lock",gc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],js=J("log-out",pc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],yc=J("mail",fc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],vc=J("menu",bc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],st=J("message-circle",jc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],tn=J("message-square",wc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Sc=J("monitor",Nc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],_c=J("pause",kc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Tc=J("pen-tool",Cc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],bt=J("play",Ac);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],br=J("plus",Ec);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ve=J("refresh-cw",Pc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],sn=J("rocket",Ic);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Dc=J("save",Mc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Lc=J("send",Rc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Kt=J("settings",Oc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],rn=J("share-2",$c);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ma=J("shield",Fc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Bt=J("sparkles",qc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ye=J("square-check-big",Bc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],mr=J("star",zc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],_e=J("target",Uc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vr=J("trash-2",Gc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ue=J("trending-up",Hc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Wc=J("triangle-alert",Vc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ct=J("trophy",Qc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ha=J("upload",Yc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ls=J("user",Kc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],jr=J("users",Jc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],pt=J("video",Zc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ed=J("volume-2",Xc);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],an=J("volume-x",td);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Qe=J("x",sd);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],kt=J("zap",rd);function Jn(s){var t,r,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(r=Jn(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r);return a}function ad(){for(var s,t,r=0,a="",n=arguments.length;r<n;r++)(s=arguments[r])&&(t=Jn(s))&&(a&&(a+=" "),a+=t);return a}const Ta="-",nd=s=>{const t=od(s),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=s;return{getClassGroupId:l=>{const o=l.split(Ta);return o[0]===""&&o.length!==1&&o.shift(),Zn(o,t)||id(l)},getConflictingClassGroupIds:(l,o)=>{const d=r[l]||[];return o&&a[l]?[...d,...a[l]]:d}}},Zn=(s,t)=>{if(s.length===0)return t.classGroupId;const r=s[0],a=t.nextPart.get(r),n=a?Zn(s.slice(1),a):void 0;if(n)return n;if(t.validators.length===0)return;const i=s.join(Ta);return t.validators.find(({validator:l})=>l(i))?.classGroupId},nn=/^\[(.+)\]$/,id=s=>{if(nn.test(s)){const t=nn.exec(s)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},od=s=>{const{theme:t,classGroups:r}=s,a={nextPart:new Map,validators:[]};for(const n in r)xa(r[n],a,n,t);return a},xa=(s,t,r,a)=>{s.forEach(n=>{if(typeof n=="string"){const i=n===""?t:on(t,n);i.classGroupId=r;return}if(typeof n=="function"){if(ld(n)){xa(n(a),t,r,a);return}t.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([i,l])=>{xa(l,on(t,i),r,a)})})},on=(s,t)=>{let r=s;return t.split(Ta).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},ld=s=>s.isThemeGetter,cd=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const n=(i,l)=>{r.set(i,l),t++,t>s&&(t=0,a=r,r=new Map)};return{get(i){let l=r.get(i);if(l!==void 0)return l;if((l=a.get(i))!==void 0)return n(i,l),l},set(i,l){r.has(i)?r.set(i,l):n(i,l)}}},ga="!",pa=":",dd=pa.length,ud=s=>{const{prefix:t,experimentalParseClassName:r}=s;let a=n=>{const i=[];let l=0,o=0,d=0,m;for(let y=0;y<n.length;y++){let f=n[y];if(l===0&&o===0){if(f===pa){i.push(n.slice(d,y)),d=y+dd;continue}if(f==="/"){m=y;continue}}f==="["?l++:f==="]"?l--:f==="("?o++:f===")"&&o--}const u=i.length===0?n:n.substring(d),x=md(u),p=x!==u,g=m&&m>d?m-d:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:g}};if(t){const n=t+pa,i=a;a=l=>l.startsWith(n)?i(l.substring(n.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(r){const n=a;a=i=>r({className:i,parseClassName:n})}return a},md=s=>s.endsWith(ga)?s.substring(0,s.length-1):s.startsWith(ga)?s.substring(1):s,hd=s=>{const t=Object.fromEntries(s.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const n=[];let i=[];return a.forEach(l=>{l[0]==="["||t[l]?(n.push(...i.sort(),l),i=[]):i.push(l)}),n.push(...i.sort()),n}},xd=s=>({cache:cd(s.cacheSize),parseClassName:ud(s),sortModifiers:hd(s),...nd(s)}),gd=/\s+/,pd=(s,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n,sortModifiers:i}=t,l=[],o=s.trim().split(gd);let d="";for(let m=o.length-1;m>=0;m-=1){const u=o[m],{isExternal:x,modifiers:p,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:f}=r(u);if(x){d=u+(d.length>0?" "+d:d);continue}let v=!!f,b=a(v?y.substring(0,f):y);if(!b){if(!v){d=u+(d.length>0?" "+d:d);continue}if(b=a(y),!b){d=u+(d.length>0?" "+d:d);continue}v=!1}const w=i(p).join(":"),h=g?w+ga:w,T=h+b;if(l.includes(T))continue;l.push(T);const E=n(b,v);for(let R=0;R<E.length;++R){const P=E[R];l.push(h+P)}d=u+(d.length>0?" "+d:d)}return d};function fd(){let s=0,t,r,a="";for(;s<arguments.length;)(t=arguments[s++])&&(r=Xn(t))&&(a&&(a+=" "),a+=r);return a}const Xn=s=>{if(typeof s=="string")return s;let t,r="";for(let a=0;a<s.length;a++)s[a]&&(t=Xn(s[a]))&&(r&&(r+=" "),r+=t);return r};function yd(s,...t){let r,a,n,i=l;function l(d){const m=t.reduce((u,x)=>x(u),s());return r=xd(m),a=r.cache.get,n=r.cache.set,i=o,o(d)}function o(d){const m=a(d);if(m)return m;const u=pd(d,r);return n(d,u),u}return function(){return i(fd.apply(null,arguments))}}const ze=s=>{const t=r=>r[s]||[];return t.isThemeGetter=!0,t},ei=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ti=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bd=/^\d+\/\d+$/,vd=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jd=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wd=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Nd=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Sd=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,as=s=>bd.test(s),je=s=>!!s&&!Number.isNaN(Number(s)),Ot=s=>!!s&&Number.isInteger(Number(s)),Hr=s=>s.endsWith("%")&&je(s.slice(0,-1)),At=s=>vd.test(s),kd=()=>!0,_d=s=>jd.test(s)&&!wd.test(s),si=()=>!1,Cd=s=>Nd.test(s),Td=s=>Sd.test(s),Ad=s=>!de(s)&&!ue(s),Ed=s=>ws(s,ni,si),de=s=>ei.test(s),Qt=s=>ws(s,ii,_d),Vr=s=>ws(s,Rd,je),ln=s=>ws(s,ri,si),Pd=s=>ws(s,ai,Td),tr=s=>ws(s,oi,Cd),ue=s=>ti.test(s),Cs=s=>Ns(s,ii),Id=s=>Ns(s,Ld),cn=s=>Ns(s,ri),Md=s=>Ns(s,ni),Dd=s=>Ns(s,ai),sr=s=>Ns(s,oi,!0),ws=(s,t,r)=>{const a=ei.exec(s);return a?a[1]?t(a[1]):r(a[2]):!1},Ns=(s,t,r=!1)=>{const a=ti.exec(s);return a?a[1]?t(a[1]):r:!1},ri=s=>s==="position"||s==="percentage",ai=s=>s==="image"||s==="url",ni=s=>s==="length"||s==="size"||s==="bg-size",ii=s=>s==="length",Rd=s=>s==="number",Ld=s=>s==="family-name",oi=s=>s==="shadow",Od=()=>{const s=ze("color"),t=ze("font"),r=ze("text"),a=ze("font-weight"),n=ze("tracking"),i=ze("leading"),l=ze("breakpoint"),o=ze("container"),d=ze("spacing"),m=ze("radius"),u=ze("shadow"),x=ze("inset-shadow"),p=ze("text-shadow"),g=ze("drop-shadow"),y=ze("blur"),f=ze("perspective"),v=ze("aspect"),b=ze("ease"),w=ze("animate"),h=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...T(),ue,de],R=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],k=()=>[ue,de,d],G=()=>[as,"full","auto",...k()],Q=()=>[Ot,"none","subgrid",ue,de],se=()=>["auto",{span:["full",Ot,ue,de]},Ot,ue,de],S=()=>[Ot,"auto",ue,de],U=()=>["auto","min","max","fr",ue,de],ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ge=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...k()],oe=()=>[as,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],O=()=>[s,ue,de],_=()=>[...T(),cn,ln,{position:[ue,de]}],me=()=>["no-repeat",{repeat:["","x","y","space","round"]}],le=()=>["auto","cover","contain",Md,Ed,{size:[ue,de]}],D=()=>[Hr,Cs,Qt],Y=()=>["","none","full",m,ue,de],he=()=>["",je,Cs,Qt],Ne=()=>["solid","dashed","dotted","double"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>[je,Hr,cn,ln],ce=()=>["","none",y,ue,de],Te=()=>["none",je,ue,de],A=()=>["none",je,ue,de],z=()=>[je,ue,de],ie=()=>[as,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[At],breakpoint:[At],color:[kd],container:[At],"drop-shadow":[At],ease:["in","out","in-out"],font:[Ad],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[At],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[At],shadow:[At],spacing:["px",je],text:[At],"text-shadow":[At],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",as,de,ue,v]}],container:["container"],columns:[{columns:[je,de,ue,o]}],"break-after":[{"break-after":h()}],"break-before":[{"break-before":h()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:G()}],"inset-x":[{"inset-x":G()}],"inset-y":[{"inset-y":G()}],start:[{start:G()}],end:[{end:G()}],top:[{top:G()}],right:[{right:G()}],bottom:[{bottom:G()}],left:[{left:G()}],visibility:["visible","invisible","collapse"],z:[{z:[Ot,"auto",ue,de]}],basis:[{basis:[as,"full","auto",o,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[je,as,"auto","initial","none",de]}],grow:[{grow:["",je,ue,de]}],shrink:[{shrink:["",je,ue,de]}],order:[{order:[Ot,"first","last","none",ue,de]}],"grid-cols":[{"grid-cols":Q()}],"col-start-end":[{col:se()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":Q()}],"row-start-end":[{row:se()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":U()}],"auto-rows":[{"auto-rows":U()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...ee(),"normal"]}],"justify-items":[{"justify-items":[...ge(),"normal"]}],"justify-self":[{"justify-self":["auto",...ge()]}],"align-content":[{content:["normal",...ee()]}],"align-items":[{items:[...ge(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ge(),{baseline:["","last"]}]}],"place-content":[{"place-content":ee()}],"place-items":[{"place-items":[...ge(),"baseline"]}],"place-self":[{"place-self":["auto",...ge()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:oe()}],w:[{w:[o,"screen",...oe()]}],"min-w":[{"min-w":[o,"screen","none",...oe()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[l]},...oe()]}],h:[{h:["screen","lh",...oe()]}],"min-h":[{"min-h":["screen","lh","none",...oe()]}],"max-h":[{"max-h":["screen","lh",...oe()]}],"font-size":[{text:["base",r,Cs,Qt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,ue,Vr]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Hr,de]}],"font-family":[{font:[Id,de,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,ue,de]}],"line-clamp":[{"line-clamp":[je,"none",ue,Vr]}],leading:[{leading:[i,...k()]}],"list-image":[{"list-image":["none",ue,de]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ue,de]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[je,"from-font","auto",ue,Qt]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[je,"auto",ue,de]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ue,de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ue,de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_()}],"bg-repeat":[{bg:me()}],"bg-size":[{bg:le()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ot,ue,de],radial:["",ue,de],conic:[Ot,ue,de]},Dd,Pd]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:D()}],"gradient-via-pos":[{via:D()}],"gradient-to-pos":[{to:D()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:Y()}],"rounded-s":[{"rounded-s":Y()}],"rounded-e":[{"rounded-e":Y()}],"rounded-t":[{"rounded-t":Y()}],"rounded-r":[{"rounded-r":Y()}],"rounded-b":[{"rounded-b":Y()}],"rounded-l":[{"rounded-l":Y()}],"rounded-ss":[{"rounded-ss":Y()}],"rounded-se":[{"rounded-se":Y()}],"rounded-ee":[{"rounded-ee":Y()}],"rounded-es":[{"rounded-es":Y()}],"rounded-tl":[{"rounded-tl":Y()}],"rounded-tr":[{"rounded-tr":Y()}],"rounded-br":[{"rounded-br":Y()}],"rounded-bl":[{"rounded-bl":Y()}],"border-w":[{border:he()}],"border-w-x":[{"border-x":he()}],"border-w-y":[{"border-y":he()}],"border-w-s":[{"border-s":he()}],"border-w-e":[{"border-e":he()}],"border-w-t":[{"border-t":he()}],"border-w-r":[{"border-r":he()}],"border-w-b":[{"border-b":he()}],"border-w-l":[{"border-l":he()}],"divide-x":[{"divide-x":he()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":he()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ne(),"hidden","none"]}],"divide-style":[{divide:[...Ne(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...Ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[je,ue,de]}],"outline-w":[{outline:["",je,Cs,Qt]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",u,sr,tr]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",x,sr,tr]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:he()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[je,Qt]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":he()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",p,sr,tr]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[je,ue,de]}],"mix-blend":[{"mix-blend":[...ye(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ye()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[je]}],"mask-image-linear-from-pos":[{"mask-linear-from":re()}],"mask-image-linear-to-pos":[{"mask-linear-to":re()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":re()}],"mask-image-t-to-pos":[{"mask-t-to":re()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":re()}],"mask-image-r-to-pos":[{"mask-r-to":re()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":re()}],"mask-image-b-to-pos":[{"mask-b-to":re()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":re()}],"mask-image-l-to-pos":[{"mask-l-to":re()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":re()}],"mask-image-x-to-pos":[{"mask-x-to":re()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":re()}],"mask-image-y-to-pos":[{"mask-y-to":re()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[ue,de]}],"mask-image-radial-from-pos":[{"mask-radial-from":re()}],"mask-image-radial-to-pos":[{"mask-radial-to":re()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[je]}],"mask-image-conic-from-pos":[{"mask-conic-from":re()}],"mask-image-conic-to-pos":[{"mask-conic-to":re()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_()}],"mask-repeat":[{mask:me()}],"mask-size":[{mask:le()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ue,de]}],filter:[{filter:["","none",ue,de]}],blur:[{blur:ce()}],brightness:[{brightness:[je,ue,de]}],contrast:[{contrast:[je,ue,de]}],"drop-shadow":[{"drop-shadow":["","none",g,sr,tr]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",je,ue,de]}],"hue-rotate":[{"hue-rotate":[je,ue,de]}],invert:[{invert:["",je,ue,de]}],saturate:[{saturate:[je,ue,de]}],sepia:[{sepia:["",je,ue,de]}],"backdrop-filter":[{"backdrop-filter":["","none",ue,de]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[je,ue,de]}],"backdrop-contrast":[{"backdrop-contrast":[je,ue,de]}],"backdrop-grayscale":[{"backdrop-grayscale":["",je,ue,de]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[je,ue,de]}],"backdrop-invert":[{"backdrop-invert":["",je,ue,de]}],"backdrop-opacity":[{"backdrop-opacity":[je,ue,de]}],"backdrop-saturate":[{"backdrop-saturate":[je,ue,de]}],"backdrop-sepia":[{"backdrop-sepia":["",je,ue,de]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ue,de]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[je,"initial",ue,de]}],ease:[{ease:["linear","initial",b,ue,de]}],delay:[{delay:[je,ue,de]}],animate:[{animate:["none",w,ue,de]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,ue,de]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:Te()}],"rotate-x":[{"rotate-x":Te()}],"rotate-y":[{"rotate-y":Te()}],"rotate-z":[{"rotate-z":Te()}],scale:[{scale:A()}],"scale-x":[{"scale-x":A()}],"scale-y":[{"scale-y":A()}],"scale-z":[{"scale-z":A()}],"scale-3d":["scale-3d"],skew:[{skew:z()}],"skew-x":[{"skew-x":z()}],"skew-y":[{"skew-y":z()}],transform:[{transform:[ue,de,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ie()}],"translate-x":[{"translate-x":ie()}],"translate-y":[{"translate-y":ie()}],"translate-z":[{"translate-z":ie()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ue,de]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ue,de]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[je,Cs,Qt,Vr]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},$d=yd(Od);function Ce(...s){return $d(ad(s))}const Fd=s=>{const t=s?.variant||"default",r=s?.size||"default",a={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},n={default:"h-9 px-4 py-2",sm:"h-8 rounded-md gap-1.5 px-3",lg:"h-10 rounded-md px-6",icon:"h-9 w-9 rounded-md"};return`${a[t]||a.default} ${n[r]||n.default}`};function C({className:s,variant:t="default",size:r="default",asChild:a=!1,...n}){const i="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2";return e.jsx("button",{className:Ce(i,Fd({variant:t,size:r}),s),...n})}function M({className:s,...t}){return e.jsx("div",{className:Ce("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t})}function B({className:s,...t}){return e.jsx("div",{className:Ce("flex flex-col space-y-1.5 p-6",s),...t})}function V({className:s,...t}){return e.jsx("h3",{className:Ce("text-lg font-semibold leading-none tracking-tight",s),...t})}function L({className:s,...t}){return e.jsx("div",{className:Ce("p-6 pt-0",s),...t})}class qd extends c.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,r){console.error("Uncaught error:",t,r),this.setState({error:t,errorInfo:r})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center p-4",children:e.jsxs(M,{className:"max-w-2xl w-full shadow-2xl",children:[e.jsx(B,{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Wc,{className:"h-8 w-8"}),e.jsx(V,{className:"text-2xl",children:"Oops! Something went wrong"})]})}),e.jsxs(L,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 text-lg",children:"We encountered an unexpected error. Don't worry, your data is safe!"}),e.jsx("p",{className:"text-gray-600",children:"Our team has been notified and we're working on fixing this issue."})]}),this.state.error&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-red-800 mb-2",children:"Error Details:"}),e.jsx("p",{className:"text-sm text-red-700 font-mono break-all",children:this.state.error.toString()})]}),!1,e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(C,{onClick:this.handleReset,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Try Again"]}),e.jsxs(C,{onClick:this.handleGoHome,variant:"outline",className:"flex-1",children:[e.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Go to Dashboard"]})]}),e.jsxs("p",{className:"text-center text-sm text-gray-500",children:["If this problem persists, please contact support at"," ",e.jsx("a",{href:"mailto:support@imtehaan.com",className:"text-blue-600 hover:underline",children:"support@imtehaan.com"})]})]})]})}):this.props.children}}function ae({className:s,variant:t="default",...r}){const a={default:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",destructive:"bg-destructive text-destructive-foreground",outline:"border border-input bg-background text-foreground"};return e.jsx("div",{className:Ce("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",a[t],s),...r})}const Bd="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function zd(s){const[t,r]=c.useState(!1),a=()=>{r(!0)},{src:n,alt:i,style:l,className:o,...d}=s;return t?e.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${o??""}`,style:l,children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("img",{src:Bd,alt:"Error loading image",...d,"data-original-url":n})})}):e.jsx("img",{src:n,alt:i,className:o,style:l,...d,onError:a})}function Os({size:s="md",showText:t=!0,className:r=""}){const a={sm:"h-32 w-32",md:"h-40 w-40",lg:"h-48 w-48",xl:"h-56 w-56"};return e.jsx("div",{className:`flex items-center gap-3 ${r}`,children:e.jsx("div",{className:`${a[s]} flex-shrink-0 relative`,children:e.jsx(zd,{src:"/ChatGPT Image Aug 16, 2025, 12_58_19 AM-Picsart-BackgroundRemover.png",alt:"Imtehaan Logo",className:"w-full h-full object-contain"})})})}const Ud={en:{hero:{title:"Ace Your IGCSE, A-Levels & IB with Your Personal AI Tutor.",subtitle:"Learn smarter with real past papers, instant grading, and 24/7 AI tutoring  built for ambitious students who want top grades.",cta:"Start Learning Now",watchDemo:"Watch Demo",askAI:"Try AI Tutor",scrollDown:"Scroll to explore"},features:{title:"Why Choose Imtehaan?",subtitle:"Everything you need to excel in your exams",items:[{icon:qe,title:"AI-Powered Practice",description:"Get instant feedback and personalized recommendations based on your performance",color:"text-cyan-600",bgColor:"bg-cyan-50",borderColor:"border-cyan-200"},{icon:Pe,title:"Paper-Specific Support",description:"Practice with real past papers from IGCSE, A-Level, and IB curricula",color:"text-lime-600",bgColor:"bg-lime-50",borderColor:"border-lime-200"},{icon:Tc,title:"Practice Mode",description:"Answer questions, get instant grading, and improve with detailed feedback on your responses",color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"},{icon:_e,title:"Visual Learning",description:"Interactive diagrams, animations, and visual explanations for complex concepts",color:"text-cyan-600",bgColor:"bg-cyan-50",borderColor:"border-cyan-200"},{icon:ct,title:"Gamification",description:"Earn badges, track streaks, and compete with peers to stay motivated",color:"text-lime-600",bgColor:"bg-lime-50",borderColor:"border-lime-200"},{icon:st,title:"24/7 AI Tutor",description:"Ask questions anytime and get instant, personalized explanations from our AI assistant",color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}]},howItWorks:{title:"How Imtehaan Works",subtitle:"Get started in minutes, see results in weeks",steps:[{number:"01",title:"Choose Your Subject",description:"Select from 25+ subjects across IGCSE, A-Level, Edexcel & IB curricula",icon:Qn},{number:"02",title:"AI Assessment",description:"Our AI analyzes your current level and creates a personalized study plan",icon:qe},{number:"03",title:"Practice & Learn",description:"Access interactive lessons, past papers, and 24/7 AI tutoring support",icon:Ke},{number:"04",title:"Track Progress",description:"Monitor your improvement with detailed analytics and performance insights",icon:Ue}]},stats:{improvement:"92%",improvementLabel:"Grade Improvement",subjects:"IGCSE",subjectsLabel:"Courses Available",satisfaction:"98%",satisfactionLabel:"Student Satisfaction"},cta:{title:"Ready to Transform Your Learning?",subtitle:"Join thousands of students who have improved their grades with AI-powered tutoring",button:"Get Started Now",tryAI:"Try AI Tutor Now",noCreditCard:"Start learning today  Join our community"}}};function dn(){const{setCurrentPage:s}=Re(),t=Ud.en,[r,a]=c.useState(!1),n=()=>{s("login")},i=()=>{s("login")},l=o=>{const d=document.getElementById(o);d&&d.scrollIntoView({behavior:"smooth"})};return e.jsxs("div",{className:"min-h-screen bg-white overflow-hidden",children:[e.jsxs("nav",{className:"fixed top-0 w-full bg-white/20 backdrop-blur-sm z-50",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx(Os,{size:"md",showText:!0}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>l("features"),className:"text-black px-3 py-2 rounded-md transition-all duration-200 hover:bg-white/20",children:"Features"}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>l("how-it-works"),className:"text-black px-3 py-2 rounded-md transition-all duration-200 hover:bg-white/20",children:"How It Works"}),e.jsxs(C,{variant:"ghost",size:"sm",onClick:n,className:"text-black px-3 py-2 rounded-md transition-all duration-200 hover:bg-white/20",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"AI Tutor"]})]})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsx(C,{variant:"ghost",onClick:()=>s("login"),className:"transition-all duration-200 hover:bg-gray-50",children:"Sign In"}),e.jsx(C,{className:"bg-gradient-to-r from-cyan-500 via-lime-500 to-orange-500 hover:from-cyan-600 hover:via-lime-600 hover:to-orange-600 text-white shadow-lg hover:shadow-xl transition-all duration-200",onClick:()=>s("signup"),children:t.hero.cta})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>a(!r),className:"p-2",children:r?e.jsx(Qe,{className:"h-5 w-5"}):e.jsx(vc,{className:"h-5 w-5"})})})]})}),r&&e.jsx("div",{className:"md:hidden bg-white border-t border-gray-100 shadow-lg",children:e.jsxs("div",{className:"px-4 py-6 space-y-4",children:[e.jsx(C,{variant:"ghost",className:"w-full justify-start text-left text-black",onClick:()=>{l("features"),a(!1)},children:"Features"}),e.jsx(C,{variant:"ghost",className:"w-full justify-start text-left text-black",onClick:()=>{l("how-it-works"),a(!1)},children:"How It Works"}),e.jsxs(C,{variant:"ghost",className:"w-full justify-start text-left text-black",onClick:()=>{n(),a(!1)},children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"AI Tutor"]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx(C,{variant:"ghost",className:"w-full justify-start text-left",onClick:()=>s("login"),children:"Sign In"}),e.jsx(C,{className:"w-full bg-gradient-to-r from-cyan-500 via-lime-500 to-orange-500 hover:from-cyan-600 hover:via-lime-600 hover:to-orange-600 text-white",onClick:()=>s("signup"),children:t.hero.cta})]})]})})]}),e.jsxs("section",{className:"pt-20 pb-16 overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 z-0",children:e.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",className:"absolute top-24 -right-48 w-3/4 h-3/4 object-cover",onError:o=>{console.error("Video failed to load:",o)},onLoadedData:()=>{console.log("Video loaded successfully")},children:[e.jsx("source",{src:"/YouCut_20251101_023018244 (online-video-cutter.com).mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-20",children:e.jsx("div",{className:"max-w-3xl",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-black leading-tight",children:t.hero.title}),e.jsx("p",{className:"text-xl text-black leading-relaxed max-w-2xl font-bold",children:t.hero.subtitle})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(C,{size:"lg",className:"bg-gradient-to-r from-cyan-500 via-lime-500 to-orange-500 hover:from-cyan-600 hover:via-lime-600 hover:to-orange-600 text-white px-8 py-4 text-lg shadow-xl hover:shadow-2xl transition-all duration-200",onClick:i,children:[t.hero.cta,e.jsx(Ae,{className:"ml-2 h-5 w-5"})]}),e.jsxs(C,{variant:"outline",size:"lg",className:"px-8 py-4 text-lg border-2 border-cyan-600 text-cyan-600 hover:bg-cyan-50 hover:border-cyan-700 transition-all duration-200",onClick:n,children:[e.jsx(st,{className:"mr-2 h-5 w-5"}),t.hero.askAI]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-8",children:[e.jsxs(M,{className:"p-4 bg-white/80 backdrop-blur-sm border border-gray-100 text-center group hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-500 to-cyan-600 bg-clip-text text-transparent group-hover:scale-110 transition-transform duration-200",children:t.stats.improvement}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:t.stats.improvementLabel})]}),e.jsxs(M,{className:"p-4 bg-white/80 backdrop-blur-sm border border-gray-100 text-center group hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-lime-500 to-lime-600 bg-clip-text text-transparent group-hover:scale-110 transition-transform duration-200",children:t.stats.subjects}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:t.stats.subjectsLabel})]}),e.jsxs(M,{className:"p-4 bg-white/80 backdrop-blur-sm border border-gray-100 text-center group hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-orange-500 to-orange-600 bg-clip-text text-transparent group-hover:scale-110 transition-transform duration-200",children:t.stats.satisfaction}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:t.stats.satisfactionLabel})]})]}),e.jsx("div",{className:"flex justify-center pt-8",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2 text-gray-500",children:[e.jsx("span",{className:"text-sm",children:t.hero.scrollDown}),e.jsx(ia,{className:"h-5 w-5"})]})})]})})})]}),e.jsx("section",{id:"features",className:"py-20 bg-gradient-to-b from-white via-gray-50/50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center space-y-6 mb-20",children:[e.jsxs(ae,{className:"bg-cyan-100 text-cyan-700 border-cyan-200 mb-4",children:[e.jsx(kt,{className:"h-4 w-4 mr-2"}),"Core Features"]}),e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-black",children:t.features.title}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:t.features.subtitle})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.features.items.map((o,d)=>e.jsx(M,{className:"p-8 hover:shadow-xl transition-all duration-300 border border-gray-100 bg-white group cursor-pointer hover:border-gray-200",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`w-16 h-16 ${o.bgColor} rounded-2xl flex items-center justify-center transition-all duration-300 border-2 ${o.borderColor} group-hover:scale-110 group-hover:shadow-lg`,children:e.jsx(o.icon,{className:`h-8 w-8 ${o.color} group-hover:scale-110 transition-transform duration-300`})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-semibold text-black group-hover:text-cyan-600 transition-colors duration-200",children:o.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:o.description})]}),o.icon===st&&e.jsxs(C,{variant:"outline",size:"sm",onClick:n,className:"border-cyan-600 text-cyan-600 hover:bg-cyan-50 group-hover:border-cyan-700 group-hover:text-cyan-700 transition-all duration-200 mt-4",children:["Try Now",e.jsx(Ae,{className:"ml-1 h-3 w-3"})]})]})},d))})]})}),e.jsx("section",{id:"how-it-works",className:"py-20 bg-gradient-to-b from-white to-gray-50/50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center space-y-6 mb-20",children:[e.jsxs(ae,{className:"bg-lime-100 text-lime-700 border-lime-200 mb-4",children:[e.jsx(sn,{className:"h-4 w-4 mr-2"}),"Simple Process"]}),e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-black",children:t.howItWorks.title}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:t.howItWorks.subtitle})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.howItWorks.steps.map((o,d)=>e.jsx(M,{className:"relative p-6 bg-white border border-gray-100 hover:shadow-xl transition-all duration-300 group",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-cyan-500 via-lime-500 to-orange-500 rounded-full flex items-center justify-center mx-auto shadow-xl group-hover:scale-110 transition-transform duration-300",children:e.jsx("span",{className:"text-2xl font-bold text-white",children:o.number})}),d<t.howItWorks.steps.length-1&&e.jsx("div",{className:"hidden lg:block absolute top-10 left-full w-full h-0.5 bg-gradient-to-r from-cyan-500 via-lime-500 to-orange-500 transform translate-x-4 opacity-60"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-cyan-50 via-lime-50 to-orange-50 rounded-2xl flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300 border border-cyan-100",children:e.jsx(o.icon,{className:"h-8 w-8 text-cyan-600 group-hover:text-orange-600 transition-colors duration-300"})}),e.jsx("h3",{className:"text-xl font-semibold text-black group-hover:text-cyan-600 transition-colors",children:o.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:o.description})]})]})},d))})]})}),e.jsx("section",{className:"py-20 bg-gradient-to-b from-white via-cyan-50/20 via-lime-50/20 to-orange-50/20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center space-y-6 mb-16",children:[e.jsxs(ae,{className:"bg-gradient-to-r from-cyan-500 via-lime-500 to-orange-500 text-white border-0 px-4 py-2 text-sm font-medium",children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Comprehensive Features"]}),e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-black",children:"Everything You Need to Succeed"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Discover powerful tools designed to help you master your subjects and ace your exams"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsx(M,{className:"p-8 bg-white border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 group",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx(qe,{className:"h-7 w-7 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-black",children:"Smart AI Grading"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Get instant, accurate grading with detailed feedback. Our AI analyzes your answers, identifies strengths, and provides actionable improvement suggestions."}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsx(ae,{variant:"outline",className:"text-xs",children:"Instant Feedback"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"Detailed Analysis"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"AI-Powered"})]})]})}),e.jsx(M,{className:"p-8 bg-white border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 group",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-lime-500 to-lime-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx(rt,{className:"h-7 w-7 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-black",children:"Past Paper Library"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Access thousands of past exam papers from IGCSE, A-Level, Edexcel, and IB. Practice with real questions and official mark schemes."}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsx(ae,{variant:"outline",className:"text-xs",children:"1000+ Papers"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"All Curricula"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"Updated Regularly"})]})]})}),e.jsx(M,{className:"p-8 bg-white border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 group",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-cyan-500 via-lime-500 to-orange-500 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx(Yt,{className:"h-7 w-7 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-black",children:"Progress Analytics"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Track your improvement with comprehensive analytics. Monitor performance across topics, identify weak areas, and celebrate achievements."}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsx(ae,{variant:"outline",className:"text-xs",children:"Real-time Tracking"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"Visual Charts"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"Insights"})]})]})}),e.jsx(M,{className:"p-8 bg-white border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 group",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx(pt,{className:"h-7 w-7 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-black",children:"Video Lessons"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Learn with engaging video content covering all topics. Interactive lessons with animations and real-world examples make complex concepts easy to understand."}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsx(ae,{variant:"outline",className:"text-xs",children:"HD Quality"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"Expert Teachers"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"Interactive"})]})]})}),e.jsx(M,{className:"p-8 bg-white border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 group",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx(ct,{className:"h-7 w-7 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-black",children:"Achievement System"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Stay motivated with gamified learning. Earn badges, unlock achievements, maintain study streaks, and compete on leaderboards."}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsx(ae,{variant:"outline",className:"text-xs",children:"Badges"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"Streaks"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"Leaderboards"})]})]})}),e.jsx(M,{className:"p-8 bg-white border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 group",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx(st,{className:"h-7 w-7 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-black",children:"24/7 AI Assistant"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Get instant help whenever you need it. Ask questions, clarify doubts, and receive personalized explanations tailored to your learning style."}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsx(ae,{variant:"outline",className:"text-xs",children:"Always Available"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"Personalized"}),e.jsx(ae,{variant:"outline",className:"text-xs",children:"Instant Response"})]})]})})]})]})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center space-y-6 mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-black",children:"Subjects Available"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Comprehensive coverage across all major curricula and subjects"})]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[{name:"Mathematics",icon:Pe,color:"from-cyan-500 to-cyan-600"},{name:"Physics",icon:kt,color:"from-lime-500 to-lime-600"},{name:"Chemistry",icon:Ke,color:"from-orange-500 to-orange-600"},{name:"Biology",icon:Bt,color:"from-cyan-500 via-lime-500 to-orange-500"},{name:"Business Studies",icon:Ue,color:"from-cyan-500 to-cyan-600"},{name:"Economics",icon:Ka,color:"from-lime-500 to-lime-600"},{name:"English",icon:vl,color:"from-orange-500 to-orange-600"},{name:"Computer Science",icon:qe,color:"from-cyan-500 via-lime-500 to-orange-500"}].map((o,d)=>e.jsx(M,{className:"p-6 bg-gradient-to-br from-gray-50 to-white border border-gray-100 hover:border-gray-200 hover:shadow-md transition-all duration-300 group cursor-pointer",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${o.color} rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-sm`,children:e.jsx(o.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-black group-hover:text-cyan-600 transition-colors",children:o.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Available"})]})]})},d))}),e.jsx("div",{className:"text-center mt-12",children:e.jsxs(C,{variant:"outline",size:"lg",onClick:i,className:"border-2 border-cyan-600 text-cyan-600 hover:bg-cyan-50",children:["View All Subjects",e.jsx(Ae,{className:"ml-2 h-4 w-4"})]})})]})}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-slate-50 via-cyan-50/15 via-lime-50/15 to-orange-50/15",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ae,{className:"bg-cyan-100 text-cyan-700 border-cyan-200",children:[e.jsx(Il,{className:"h-4 w-4 mr-2"}),"Analytics Dashboard"]}),e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-black",children:"Track Your Progress with Precision"}),e.jsx("p",{className:"text-xl text-gray-600 leading-relaxed",children:"Get deep insights into your learning journey with comprehensive analytics and visual progress tracking."})]}),e.jsx("div",{className:"space-y-6",children:[{icon:Ka,title:"Performance Metrics",desc:"Track scores, accuracy, and improvement over time"},{icon:Ue,title:"Weak Area Analysis",desc:"Identify topics needing more practice"},{icon:xs,title:"Achievement Tracking",desc:"Monitor badges, streaks, and milestones"},{icon:Fe,title:"Study Time Analytics",desc:"Understand your study patterns and optimize your schedule"}].map((o,d)=>e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-100 to-lime-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(o.icon,{className:"h-6 w-6 text-cyan-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-black mb-1",children:o.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:o.desc})]})]},d))}),e.jsxs(C,{size:"lg",onClick:i,className:"bg-gradient-to-r from-cyan-500 via-lime-500 to-orange-500 hover:from-cyan-600 hover:via-lime-600 hover:to-orange-600 text-white",children:["Explore Analytics",e.jsx(Ae,{className:"ml-2 h-5 w-5"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"p-8 bg-white border border-gray-100 shadow-xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-black",children:"Your Progress Overview"}),e.jsx(ae,{className:"bg-lime-100 text-lime-700",children:"Active"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Mathematics"}),e.jsx("span",{className:"font-semibold text-black",children:"85%"})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-cyan-600 h-3 rounded-full",style:{width:"85%"}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Physics"}),e.jsx("span",{className:"font-semibold text-black",children:"72%"})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-lime-500 to-lime-600 h-3 rounded-full",style:{width:"72%"}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Chemistry"}),e.jsx("span",{className:"font-semibold text-black",children:"90%"})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-3 rounded-full",style:{width:"90%"}})})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-600",children:"42"}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Topics Completed"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-lime-600",children:"18"}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Days Streak"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"156"}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Questions Solved"})]})]})})]})}),e.jsx("div",{className:"absolute -z-10 -bottom-4 -right-4 w-full h-full bg-gradient-to-br from-cyan-100 via-lime-100 to-orange-100 rounded-2xl opacity-50"})]})]})})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center space-y-6 mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-black",children:"Why Students Choose Imtehaan"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Join thousands of successful students achieving their academic goals"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:sn,title:"Faster Learning",description:"Master concepts 3x faster with AI-powered personalized learning paths",color:"from-cyan-500 to-cyan-600",stats:"3x Faster"},{icon:Me,title:"Higher Scores",description:"92% of students improve their grades by at least one letter grade",color:"from-lime-500 to-lime-600",stats:"92% Success"},{icon:Fe,title:"Study Anytime",description:"24/7 access means you can learn whenever it fits your schedule",color:"from-orange-500 to-orange-600",stats:"24/7 Access"}].map((o,d)=>e.jsx(M,{className:"p-8 bg-gradient-to-br from-white to-gray-50 border border-gray-100 hover:shadow-xl transition-all duration-300 group",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${o.color} rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:e.jsx(o.icon,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-black mb-2",children:o.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:o.description}),e.jsx(ae,{className:`bg-gradient-to-r ${o.color} text-white border-0`,children:o.stats})]})]})},d))})]})}),e.jsxs("section",{className:"py-20 bg-gradient-to-r from-cyan-600 via-lime-500 to-orange-600 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDYwIDAgTCAwIDAgMCA2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-20"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/20 via-transparent to-black/20"}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ae,{className:"bg-white/20 text-white border-white/30 backdrop-blur-sm",children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Start Your Journey Today"]}),e.jsx("h2",{className:"text-4xl md:text-5xl font-bold",children:t.cta.title}),e.jsx("p",{className:"text-xl text-white/90 max-w-2xl mx-auto",children:t.cta.subtitle})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(C,{size:"lg",onClick:i,className:"bg-white text-cyan-600 hover:bg-cyan-50 shadow-xl hover:shadow-2xl transition-all duration-200 px-8 py-6 text-lg font-semibold",children:[t.cta.button,e.jsx(Ae,{className:"ml-2 h-5 w-5"})]}),e.jsxs(C,{size:"lg",variant:"outline",onClick:n,className:"border-2 border-white text-white hover:bg-white/10 backdrop-blur-sm px-8 py-6 text-lg",children:[e.jsx(st,{className:"mr-2 h-5 w-5"}),t.cta.tryAI]})]}),e.jsx("p",{className:"text-white/80 text-sm mt-4",children:t.cta.noCreditCard})]})})]}),e.jsx("footer",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"py-16 grid md:grid-cols-2 lg:grid-cols-4 gap-12",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-1",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-400 via-lime-400 to-orange-400 bg-clip-text text-transparent mb-4",children:"Imtehaan.ai"}),e.jsx("p",{className:"text-gray-400 leading-relaxed text-sm",children:"AI-powered learning platform revolutionizing education for IGCSE, O/A Levels, Edexcel & IB students worldwide."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"group w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r hover:from-cyan-500 hover:via-lime-500 hover:to-orange-500 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-cyan-500/50",children:e.jsx(Kn,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-300"})}),e.jsx("div",{className:"group w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r hover:from-cyan-500 hover:via-lime-500 hover:to-orange-500 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-lime-500/50",children:e.jsx(st,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-300"})}),e.jsx("div",{className:"group w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r hover:from-cyan-500 hover:via-lime-500 hover:to-orange-500 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-orange-500/50",children:e.jsx(jr,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-300"})})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold mb-6 text-white text-lg flex items-center",children:[e.jsx(Bt,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Product"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("button",{onClick:i,className:"text-gray-400 hover:text-cyan-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"Pricing Plans"]})}),e.jsx("div",{children:e.jsxs("button",{onClick:i,className:"text-gray-400 hover:text-blue-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"Student Dashboard"]})}),e.jsx("div",{children:e.jsxs("button",{onClick:n,className:"text-gray-400 hover:text-blue-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"AI Tutor"]})}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>l("features"),className:"text-gray-400 hover:text-blue-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"Features"]})})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold mb-6 text-white text-lg flex items-center",children:[e.jsx(ma,{className:"h-5 w-5 mr-2 text-lime-400"}),"Support"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("button",{onClick:n,className:"text-gray-400 hover:text-lime-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"Ask AI Tutor"]})}),e.jsx("div",{children:e.jsxs("a",{href:"mailto:support@imtehaan.ai",className:"text-gray-400 hover:text-green-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"Contact Support"]})}),e.jsx("div",{children:e.jsxs("a",{href:"#",className:"text-gray-400 hover:text-green-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"Help Center"]})}),e.jsx("div",{children:e.jsxs("a",{href:"#",className:"text-gray-400 hover:text-green-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"Documentation"]})})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold mb-6 text-white text-lg flex items-center",children:[e.jsx(Qn,{className:"h-5 w-5 mr-2 text-orange-400"}),"Legal"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("a",{href:"#",className:"text-gray-400 hover:text-orange-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"Privacy Policy"]})}),e.jsx("div",{children:e.jsxs("a",{href:"#",className:"text-gray-400 hover:text-purple-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"Terms of Service"]})}),e.jsx("div",{children:e.jsxs("a",{href:"#",className:"text-gray-400 hover:text-purple-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"Cookie Policy"]})}),e.jsx("div",{children:e.jsxs("a",{href:"#",className:"text-gray-400 hover:text-purple-400 transition-all duration-200 text-sm hover:translate-x-1 inline-flex items-center group",children:[e.jsx(Ae,{className:"h-3 w-3 mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),"License"]})})]})]})]}),e.jsx("div",{className:"border-t border-gray-800/50 py-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-gray-400 text-sm flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4 text-cyan-400"})," 2025 Imtehaan.ai. ","All rights reserved."]}),e.jsx("div",{className:"flex items-center gap-6 text-sm text-gray-400",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-800/50 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-lime-400 rounded-full animate-pulse"}),e.jsx("span",{children:"AI Systems Active"})]})})]})})]})})]})}const We=c.forwardRef(({className:s,type:t,...r},a)=>e.jsx("input",{type:t,className:Ce("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...r}));We.displayName="Input";function we({className:s,...t}){return e.jsx("label",{className:Ce("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...t})}const li="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJnZW52d2llYWJ0eHd6YXBnZWVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2NjUzOTUsImV4cCI6MjA2OTI0MTM5NX0.jAkplpFSAAKqEMtFSZBFgluF_Obe6_upZA9W8uPtUIE",ci="https://bgenvwieabtxwzapgeee.supabase.co",F=Gn(ci,li),ht=Gn(ci,li);class Ds{static async signUp(t){try{const{data:r,error:a}=await F.auth.signUp({email:t.email,password:t.password,options:{data:{full_name:t.full_name,user_type:t.user_type||"student",curriculum:t.curriculum||"igcse",grade:t.grade||"Year 10",subjects:t.subjects||["Mathematics","Physics","Chemistry"],preferences:t.preferences||{}}}});return a?{data:null,error:a}:{data:r,error:null}}catch(r){return console.error("Sign up error:",r),{data:null,error:{message:"Sign up failed. Please try again."}}}}static async signIn(t,r){try{const{data:a,error:n}=await F.auth.signInWithPassword({email:t,password:r});if(n)return{data:null,error:n};if(a.user){const{data:i,error:l}=await F.from("users").select("*").eq("id",a.user.id).single();return l?(console.warn("Profile not found, but auth successful:",l),{data:a,error:null}):{data:{auth:a,profile:i},error:null}}return{data:a,error:null}}catch(a){return console.error("Sign in error:",a),{data:null,error:{message:"Sign in failed. Please try again."}}}}static async signOut(){try{const{error:t}=await F.auth.signOut();return{error:t}}catch(t){return console.error("Sign out error:",t),{error:{message:"Sign out failed."}}}}static async getCurrentUser(){try{const{data:{user:t},error:r}=await F.auth.getUser();if(r||!t)return{data:null,error:r};const{data:a,error:n}=await F.from("users").select("*").eq("id",t.id).single();return n?(console.warn("Profile not found for current user:",n),{data:{auth:t,profile:null},error:null}):{data:{auth:t,profile:a},error:null}}catch(t){return console.error("Get current user error:",t),{data:null,error:{message:"Failed to get user data."}}}}static async isAuthenticated(){try{const{data:{user:t}}=await F.auth.getUser();return!!t}catch{return!1}}static async getSession(){try{const{data:{session:t},error:r}=await F.auth.getSession();return{data:t,error:r}}catch(t){return{data:null,error:t}}}static async resetPasswordForEmail(t){try{const{data:r,error:a}=await F.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/#reset-password`});return a?{data:null,error:a}:{data:r,error:null}}catch(r){return console.error("Password reset error:",r),{data:null,error:{message:"Failed to send password reset email. Please try again."}}}}static async updatePassword(t){try{const{data:r,error:a}=await F.auth.updateUser({password:t});return a?{data:null,error:a}:{data:r,error:null}}catch(r){return console.error("Update password error:",r),{data:null,error:{message:"Failed to update password. Please try again."}}}}static async verifyResetToken(){try{const{data:{session:t}}=await F.auth.getSession();return{valid:!!t}}catch(t){return{valid:!1,error:t}}}}const di=c.createContext(void 0);function Gd({children:s,language:t="en"}){const[r,a]=c.useState(null),[n,i]=c.useState(!0),l="imtehaan_user",o=()=>{try{return F&&F.auth&&typeof F.auth.signUp=="function"}catch(b){return console.log("Supabase configuration check failed:",b),!1}},d=async(b,w,h)=>{try{await new Promise(E=>setTimeout(E,1e3));const T={id:`local_${Date.now()}`,name:h.full_name||"User",email:b,type:h.user_type||"student",curriculum:"igcse",grade:"Year 10",subjects:["Mathematics","Physics","Chemistry"],preferences:{language:t,notifications:h.preferences?.notifications||!1,darkMode:!1,theme:"light",autoPlayFlashcards:!0,showHints:!0,soundEffects:!0,studyReminders:!0,dailyGoal:60}};return localStorage.setItem(l,JSON.stringify(T)),{data:{user:T},error:null}}catch{return{data:null,error:{message:"Local signup failed"}}}},m=async(b,w)=>{try{await new Promise(E=>setTimeout(E,1e3));const h=localStorage.getItem(l);if(!h)return{data:null,error:{message:"No account found with this email"}};const T=JSON.parse(h);return T.email!==b?{data:null,error:{message:"Invalid email or password"}}:(console.log(" LOCAL AUTH: User signed in, buffer system active"),{data:{user:T},error:null})}catch{return{data:null,error:{message:"Local signin failed"}}}},u=async()=>{try{return await new Promise(b=>setTimeout(b,500)),localStorage.removeItem(l),localStorage.removeItem("imtehaan_current_page"),{data:{success:!0},error:null}}catch{return{data:null,error:{message:"Local signout failed"}}}},x=async()=>{try{await new Promise(w=>setTimeout(w,1e3));const b={id:`google_${Date.now()}`,name:"Google User",email:"google@example.com",type:"student",curriculum:"igcse",grade:"Year 10",subjects:["Mathematics","Physics","Chemistry"],preferences:{language:t,notifications:!0,darkMode:!1,theme:"light",autoPlayFlashcards:!0,showHints:!0,soundEffects:!0,studyReminders:!0,dailyGoal:60}};return localStorage.setItem(l,JSON.stringify(b)),{data:{user:b},error:null}}catch{return{data:null,error:{message:"Local Google signin failed"}}}},p=async(b,w,h)=>{if(o())try{const T=await Ds.signUp({email:b,password:w,full_name:h.full_name,user_type:h.user_type||"student",curriculum:h.curriculum||"igcse",grade:h.grade||"Year 10",subjects:h.subjects||["Mathematics","Physics","Chemistry"],preferences:h.preferences||{}});return T.error?{error:T.error}:{data:T.data}}catch{return{error:{message:"Signup failed"}}}else return d(b,w,h)},g=async(b,w)=>{if(o())try{const h=await Ds.signIn(b,w);return h.error?{error:h.error}:{data:h.data}}catch{return{error:{message:"Signin failed"}}}else return m(b)},y=async()=>{if(localStorage.removeItem("imtehaan_current_page"),o())try{const b=await Ds.signOut();return b.error?{error:b.error}:{success:!0}}catch{return{error:{message:"Signout failed"}}}else return u()},f=async()=>{if(o())try{const b=await F.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});return b.error?{error:b.error}:{success:!0}}catch{return{error:{message:"Google signin failed"}}}else return x()};c.useEffect(()=>{(async()=>{try{const w=localStorage.getItem(l);if(w){a(JSON.parse(w)),i(!1);return}if(o()){const{data:{session:h}}=await F.auth.getSession();if(h?.user){const T={id:h.user.id,name:h.user.user_metadata?.full_name||h.user.email?.split("@")[0]||"User",email:h.user.email||"",type:h.user.user_metadata?.user_type||"student",curriculum:h.user.user_metadata?.curriculum||"igcse",grade:h.user.user_metadata?.grade||"Year 10",subjects:h.user.user_metadata?.subjects||["Mathematics","Physics","Chemistry"],preferences:{language:h.user.user_metadata?.preferences?.language||t,notifications:h.user.user_metadata?.preferences?.notifications||!1,darkMode:h.user.user_metadata?.preferences?.darkMode||!1,theme:h.user.user_metadata?.preferences?.theme||"light",autoPlayFlashcards:h.user.user_metadata?.preferences?.autoPlayFlashcards??!0,showHints:h.user.user_metadata?.preferences?.showHints??!0,soundEffects:h.user.user_metadata?.preferences?.soundEffects??!0,studyReminders:h.user.user_metadata?.preferences?.studyReminders??!0,dailyGoal:h.user.user_metadata?.preferences?.dailyGoal||60}};a(T)}}}catch{console.log("Session check failed, using local auth")}finally{i(!1)}})()},[t]),c.useEffect(()=>{if(o()){const{data:{subscription:b}}=F.auth.onAuthStateChange(async(w,h)=>{if(w==="SIGNED_IN"&&h?.user){const T={id:h.user.id,name:h.user.user_metadata?.full_name||h.user.email?.split("@")[0]||"User",email:h.user.email||"",type:h.user.user_metadata?.user_type||"student",curriculum:h.user.user_metadata?.curriculum||"igcse",grade:h.user.user_metadata?.grade||"Year 10",subjects:h.user.user_metadata?.subjects||["Mathematics","Physics","Chemistry"],preferences:{language:h.user.user_metadata?.preferences?.language||t,notifications:h.user.user_metadata?.preferences?.notifications||!1,darkMode:h.user.user_metadata?.preferences?.darkMode||!1,theme:h.user.user_metadata?.preferences?.theme||"light",autoPlayFlashcards:h.user.user_metadata?.preferences?.autoPlayFlashcards??!0,showHints:h.user.user_metadata?.preferences?.showHints??!0,soundEffects:h.user.user_metadata?.preferences?.soundEffects??!0,studyReminders:h.user.user_metadata?.preferences?.studyReminders??!0,dailyGoal:h.user.user_metadata?.preferences?.dailyGoal||60}};console.log(" AUTH: User signed in, buffer system active"),a(T)}else w==="SIGNED_OUT"&&a(null)});return()=>b.unsubscribe()}},[t]);const v={user:r,signUp:p,signIn:g,signOut:y,signInWithGoogle:f,loading:n};return e.jsx(di.Provider,{value:v,children:s})}function Aa(){const s=c.useContext(di);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function at({className:s,variant:t="default",...r}){const a={default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"};return e.jsx("div",{className:Ce("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",a[t],s),...r})}function nt({className:s,...t}){return e.jsx("div",{className:Ce("text-sm [&_p]:leading-relaxed",s),...t})}const Hd={en:{title:"Welcome Back",subtitle:"Sign in to continue your learning journey",email:"Email Address",password:"Password",forgotPassword:"Forgot your password?",signIn:"Sign In",signInWithGoogle:"Sign in with Google",orContinueWith:"or continue with",noAccount:"Don't have an account?",createAccount:"Create one here",backToHome:"Back to Home",emailPlaceholder:"Enter your email address",passwordPlaceholder:"Enter your password",switchToEmail:"Sign in with Email",errors:{emailRequired:"Email address is required",passwordRequired:"Password is required",invalidCredentials:"Invalid email or password"}}};function Vd(){const{setCurrentPage:s,setUser:t}=Re(),{signIn:r}=Aa(),[a,n]=c.useState(!1),[i,l]=c.useState(!1),[o,d]=c.useState(""),[m,u]=c.useState(!1),[x,p]=c.useState({email:"",password:""}),g=Hd.en;c.useEffect(()=>{sessionStorage.getItem("justSignedUp")==="true"&&(u(!0),sessionStorage.removeItem("justSignedUp"),setTimeout(()=>u(!1),5e3))},[]);const y=(b,w)=>{p(h=>({...h,[b]:w})),o&&d("")},f=()=>x.email.trim()?x.password.trim()?!0:(d(g.errors.passwordRequired),!1):(d(g.errors.emailRequired),!1),v=async b=>{if(b.preventDefault(),!!f()){l(!0),d("");try{console.log("Attempting to sign in with:",x.email);const{data:w,error:h}=await r(x.email,x.password);if(console.log("Signin response:",{data:w,error:h}),h){console.error("Signin error:",h),d(h.message||g.errors.invalidCredentials),l(!1);return}if(!w){console.error("No data returned from signin"),d("No data returned from signin"),l(!1);return}console.log("Processing signin data:",w);let T;if(w.auth&&w.profile)T=w.profile,console.log("Using profile data:",T);else if(w.user)T=w.user,console.log("Using user data:",T);else if(w.auth?.user)T=w.auth.user,console.log("Using auth user data:",T);else{console.error("No user profile found in data:",w),d("Authentication successful but no user data found"),l(!1);return}const E={id:T.id,email:T.email||"",full_name:T.full_name||T.name||T.email?.split("@")[0]||"User"};console.log("Created user object:",E),console.log(" LOGIN PAGE: User signed in, initializing analytics...");try{const{analyticsBufferService:R}=await Ms(()=>Promise.resolve().then(()=>lu),void 0);await R.initializeFreshDay(E.id),console.log(" LOGIN PAGE: Daily time spent reset completed")}catch(R){console.error(" LOGIN PAGE: Failed to reset daily time spent:",R)}t(E),s("dashboard")}catch(w){console.error("Signin exception:",w),d(g.errors.invalidCredentials)}finally{l(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-teal-light/20",children:e.jsxs("div",{className:"flex h-full",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl text-black mb-2",children:g.title}),e.jsx("p",{className:"text-gray-600",children:g.subtitle})]}),e.jsxs(M,{className:"shadow-2xl border-0 bg-white/95 backdrop-blur-sm rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-white to-teal-50/30 rounded-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(B,{className:"space-y-1 pb-4 bg-gradient-to-r from-teal-50/50 to-blue-50/50 border-b border-teal-100/50",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>s("landing"),className:"text-gray-600 hover:text-teal-600 hover:bg-teal-50/50 p-2 rounded-lg transition-all duration-200",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),g.backToHome]})})}),e.jsxs(L,{className:"space-y-6 p-6",children:[o&&e.jsx(at,{className:"border-red-200/50 text-red-700 bg-red-50/80 backdrop-blur-sm rounded-xl",children:e.jsx(nt,{children:o})}),m&&e.jsx(at,{className:"border-green-200/50 text-green-700 bg-green-50/80 backdrop-blur-sm rounded-xl",children:e.jsx(nt,{children:" Signup successful! Please sign in to continue."})}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"email",className:"text-sm font-semibold text-gray-700",children:g.email}),e.jsxs("div",{className:"relative group",children:[e.jsx(We,{id:"email",type:"email",placeholder:g.emailPlaceholder,value:x.email,onChange:b=>y("email",b.target.value),disabled:i,className:"bg-white/80 border-gray-200 focus:border-teal-400 focus:ring-2 focus:ring-teal-100 rounded-xl transition-all duration-200 group-hover:border-teal-300"}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-teal-50/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"password",className:"text-sm font-semibold text-gray-700",children:g.password}),e.jsxs("div",{className:"relative group",children:[e.jsx(We,{id:"password",type:a?"text":"password",placeholder:g.passwordPlaceholder,value:x.password,onChange:b=>y("password",b.target.value),disabled:i,className:"bg-white/80 border-gray-200 focus:border-teal-400 focus:ring-2 focus:ring-teal-100 rounded-xl transition-all duration-200 group-hover:border-teal-300 pr-10"}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-teal-50/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),e.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-teal-600 transition-colors duration-200",children:a?e.jsx(zt,{className:"h-4 w-4"}):e.jsx(xt,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{type:"button",variant:"ghost",size:"sm",onClick:()=>s("forgot-password"),className:"text-sm text-teal-600 hover:text-teal-700 hover:bg-teal-50/50 p-2 rounded-lg transition-all duration-200",children:g.forgotPassword})}),e.jsx(C,{type:"submit",className:"w-full bg-gradient-to-r from-teal-500 via-teal-600 to-blue-600 hover:from-teal-600 hover:via-teal-700 hover:to-blue-700 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200",disabled:i,children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),g.signIn]}):g.signIn})]}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[g.noAccount," ",e.jsx("button",{onClick:()=>s("signup"),className:"text-teal-600 hover:text-teal-700 underline font-medium hover:no-underline transition-all duration-200",children:g.createAccount})]})]})]})]})]})}),e.jsx("div",{className:"hidden lg:flex lg:w-1/2 items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("img",{src:"./ChatGPT Image Aug 16, 2025, 01_26_07 AM.png",alt:"Studious Panda with Imtehaan.ai",className:"w-full max-w-md mx-auto"}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome to AI-Powered Learning"}),e.jsx("p",{className:"text-gray-600",children:"Join thousands of students excelling with our intelligent tutoring platform"})]})]})})]})})}function wr({className:s,checked:t,onCheckedChange:r,...a}){return e.jsx("input",{type:"checkbox",checked:t,onChange:n=>r?.(n.target.checked),className:Ce("h-4 w-4 rounded border border-primary text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a})}const Wd={en:{title:"Create Your Account",subtitle:"",fullName:"Full Name",email:"Email Address",password:"Password",confirmPassword:"Confirm Password",signUp:"Create Account",signUpWithGoogle:"Sign up with Google",orContinueWith:"or continue with",haveAccount:"Already have an account?",signInHere:"Sign in here",backToHome:"Back to Home",fullNamePlaceholder:"Enter your full name",emailPlaceholder:"Enter your email address",passwordPlaceholder:"Create a password (min. 8 characters)",confirmPasswordPlaceholder:"Confirm your password",agreeToTerms:"I agree to the Terms of Service and Privacy Policy",newsletterOptIn:"Send me updates about new features and study tips",errors:{nameRequired:"Full name is required",emailRequired:"Email address is required",passwordRequired:"Password is required",passwordTooShort:"Password must be at least 8 characters",passwordMismatch:"Passwords do not match",termsRequired:"You must agree to the terms",emailExists:"Email already exists"}}};function Qd(){const{setCurrentPage:s,setUser:t}=Re(),{signUp:r}=Aa(),[a,n]=c.useState(!1),[i,l]=c.useState(!1),[o,d]=c.useState(!1),[m,u]=c.useState(""),[x,p]=c.useState({fullName:"",email:"",password:"",confirmPassword:"",agreeToTerms:!1,newsletterOptIn:!1}),g=Wd.en,y=(b,w)=>{p(h=>({...h,[b]:w})),m&&u("")},f=()=>x.fullName.trim()?x.email.trim()?x.password?x.password.length<8?(u(g.errors.passwordTooShort),!1):x.password!==x.confirmPassword?(u(g.errors.passwordMismatch),!1):x.agreeToTerms?!0:(u(g.errors.termsRequired),!1):(u(g.errors.passwordRequired),!1):(u(g.errors.emailRequired),!1):(u(g.errors.nameRequired),!1),v=async b=>{if(b.preventDefault(),!!f()){d(!0),u("");try{const w={full_name:x.fullName,user_type:"student",curriculum:"igcse",grade:null,subjects:[],preferences:{language:"en",notifications:x.newsletterOptIn,darkMode:!1,theme:"light",autoPlayFlashcards:!0,showHints:!0,soundEffects:!0,studyReminders:!0,dailyGoal:60}},{data:h,error:T}=await r(x.email,x.password,w);T?u(T.message):h.user&&(sessionStorage.setItem("justSignedUp","true"),s("login"))}catch{u(g.errors.emailExists)}finally{d(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-teal-light/20",children:e.jsxs("div",{className:"flex h-full",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl text-black mb-2",children:g.title}),e.jsx("p",{className:"text-gray-600",children:g.subtitle})]}),e.jsxs(M,{className:"shadow-2xl border-0 bg-white/95 backdrop-blur-sm rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-white to-teal-50/30 rounded-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(B,{className:"space-y-1 pb-4 bg-gradient-to-r from-teal-50/50 to-blue-50/50 border-b border-teal-100/50",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>s("landing"),className:"text-gray-600 hover:text-teal-600 hover:bg-teal-50/50 p-2 rounded-lg transition-all duration-200",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),g.backToHome]})})}),e.jsxs(L,{className:"space-y-6 p-6",children:[m&&e.jsx(at,{className:"border-red-200/50 text-red-700 bg-red-50/80 backdrop-blur-sm rounded-xl",children:e.jsx(nt,{children:m})}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"fullName",className:"text-sm font-semibold text-gray-700",children:g.fullName}),e.jsxs("div",{className:"relative group",children:[e.jsx(We,{id:"fullName",type:"text",placeholder:g.fullNamePlaceholder,value:x.fullName,onChange:b=>y("fullName",b.target.value),disabled:o,className:"bg-white/80 border-gray-200 focus:border-teal-400 focus:ring-2 focus:ring-teal-100 rounded-xl transition-all duration-200 group-hover:border-teal-300"}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-teal-50/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"email",className:"text-sm font-semibold text-gray-700",children:g.email}),e.jsxs("div",{className:"relative group",children:[e.jsx(We,{id:"email",type:"email",placeholder:g.emailPlaceholder,value:x.email,onChange:b=>y("email",b.target.value),disabled:o,className:"bg-white/80 border-gray-200 focus:border-teal-400 focus:ring-2 focus:ring-teal-100 rounded-xl transition-all duration-200 group-hover:border-teal-300"}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-teal-50/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"password",className:"text-sm font-semibold text-gray-700",children:g.password}),e.jsxs("div",{className:"relative group",children:[e.jsx(We,{id:"password",type:a?"text":"password",placeholder:g.passwordPlaceholder,value:x.password,onChange:b=>y("password",b.target.value),disabled:o,className:"bg-white/80 border-gray-200 focus:border-teal-400 focus:ring-2 focus:ring-teal-100 rounded-xl transition-all duration-200 group-hover:border-teal-300 pr-10"}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-teal-50/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),e.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-teal-600 transition-colors duration-200",children:a?e.jsx(zt,{className:"h-4 w-4"}):e.jsx(xt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"confirmPassword",className:"text-sm font-semibold text-gray-700",children:g.confirmPassword}),e.jsxs("div",{className:"relative group",children:[e.jsx(We,{id:"confirmPassword",type:i?"text":"password",placeholder:g.confirmPasswordPlaceholder,value:x.confirmPassword,onChange:b=>y("confirmPassword",b.target.value),disabled:o,className:"bg-white/80 border-gray-200 focus:border-teal-400 focus:ring-2 focus:ring-teal-100 rounded-xl transition-all duration-200 group-hover:border-teal-300 pr-10"}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-teal-50/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),e.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-teal-600 transition-colors duration-200",children:i?e.jsx(zt,{className:"h-4 w-4"}):e.jsx(xt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50/50 rounded-xl border border-gray-100 hover:border-teal-200 transition-all duration-200",children:[e.jsx(wr,{id:"terms",checked:x.agreeToTerms,onCheckedChange:b=>y("agreeToTerms",b===!0),className:"text-teal-600 border-gray-300 hover:border-teal-400 focus:ring-teal-200"}),e.jsx(we,{htmlFor:"terms",className:"text-sm text-gray-700 cursor-pointer",children:g.agreeToTerms})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50/50 rounded-xl border border-gray-100 hover:border-teal-200 transition-all duration-200",children:[e.jsx(wr,{id:"newsletter",checked:x.newsletterOptIn,onCheckedChange:b=>y("newsletterOptIn",b===!0),className:"text-teal-600 border-gray-300 hover:border-teal-400 focus:ring-teal-200"}),e.jsx(we,{htmlFor:"newsletter",className:"text-sm text-gray-600 cursor-pointer",children:g.newsletterOptIn})]})]}),e.jsx(C,{type:"submit",className:"w-full bg-gradient-to-r from-teal-500 via-teal-600 to-blue-600 hover:from-teal-600 hover:via-teal-700 hover:to-blue-700 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200",disabled:o,children:o?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),g.signUp]}):g.signUp})]}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[g.haveAccount," ",e.jsx("button",{onClick:()=>s("login"),className:"text-teal-600 hover:text-teal-700 underline font-medium hover:no-underline transition-all duration-200",children:g.signInHere})]})]})]})]})]})}),e.jsx("div",{className:"hidden lg:flex lg:w-1/2 items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("img",{src:"./ChatGPT Image Aug 16, 2025, 01_26_07 AM.png",alt:"Studious Panda with Imtehaan.ai",className:"w-full max-w-md mx-auto"}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Start Your Learning Journey"}),e.jsx("p",{className:"text-gray-600",children:"Join our AI-powered platform and discover a new way to excel in your studies"})]})]})})]})})}const Yd={en:{title:"Reset Your Password",subtitle:"Enter your email address and we'll send you a link to reset your password",email:"Email Address",emailPlaceholder:"Enter your email address",sendResetLink:"Send Reset Link",backToSignIn:"Back to Sign In",backToHome:"Back to Home",successTitle:"Check Your Email",successMessage:"If an account exists with that email, we've sent you a password reset link.",errors:{emailRequired:"Email address is required",invalidEmail:"Please enter a valid email address"}}};function Kd(){const{setCurrentPage:s}=Re(),[t,r]=c.useState(""),[a,n]=c.useState(!1),[i,l]=c.useState(""),[o,d]=c.useState(!1),m=Yd.en,u=p=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p),x=async p=>{if(p.preventDefault(),l(""),d(!1),!t.trim()){l(m.errors.emailRequired);return}if(!u(t)){l(m.errors.invalidEmail);return}n(!0);try{const{error:g}=await Ds.resetPasswordForEmail(t);g?l(g.message||"Failed to send reset email. Please try again."):d(!0)}catch(g){console.error("Password reset error:",g),l("An unexpected error occurred. Please try again.")}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-teal-light/20",children:e.jsxs("div",{className:"flex h-full",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl text-black mb-2",children:m.title}),e.jsx("p",{className:"text-gray-600",children:m.subtitle})]}),e.jsxs(M,{className:"shadow-2xl border-0 bg-white/95 backdrop-blur-sm rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-white to-teal-50/30 rounded-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(B,{className:"space-y-1 pb-4 bg-gradient-to-r from-teal-50/50 to-blue-50/50 border-b border-teal-100/50",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>s("login"),className:"text-gray-600 hover:text-teal-600 hover:bg-teal-50/50 p-2 rounded-lg transition-all duration-200",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),m.backToSignIn]})})}),e.jsxs(L,{className:"space-y-6 p-6",children:[i&&e.jsx(at,{className:"border-red-200/50 text-red-700 bg-red-50/80 backdrop-blur-sm rounded-xl",children:e.jsx(nt,{children:i})}),o?e.jsxs("div",{className:"space-y-6",children:[e.jsx(at,{className:"border-green-200/50 text-green-700 bg-green-50/80 backdrop-blur-sm rounded-xl",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Me,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:m.successTitle}),e.jsx(nt,{children:m.successMessage})]})]})}),e.jsx(C,{onClick:()=>s("login"),className:"w-full bg-gradient-to-r from-teal-500 via-teal-600 to-blue-600 hover:from-teal-600 hover:via-teal-700 hover:to-blue-700 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:m.backToSignIn})]}):e.jsxs("form",{onSubmit:x,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"email",className:"text-sm font-semibold text-gray-700",children:m.email}),e.jsxs("div",{className:"relative group",children:[e.jsx(We,{id:"email",type:"email",placeholder:m.emailPlaceholder,value:t,onChange:p=>r(p.target.value),disabled:a,className:"bg-white/80 border-gray-200 focus:border-teal-400 focus:ring-2 focus:ring-teal-100 rounded-xl transition-all duration-200 group-hover:border-teal-300 pl-10"}),e.jsx(yc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-teal-50/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})]}),e.jsx(C,{type:"submit",className:"w-full bg-gradient-to-r from-teal-500 via-teal-600 to-blue-600 hover:from-teal-600 hover:via-teal-700 hover:to-blue-700 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200",disabled:a,children:a?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),m.sendResetLink]}):m.sendResetLink})]})]})]})]})]})}),e.jsx("div",{className:"hidden lg:flex lg:w-1/2 items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("img",{src:"./ChatGPT Image Aug 16, 2025, 01_26_07 AM.png",alt:"Studious Panda with Imtehaan.ai",className:"w-full max-w-md mx-auto"}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Forgot Your Password?"}),e.jsx("p",{className:"text-gray-600",children:"No worries! We'll help you get back into your account"})]})]})})]})})}const Jd={en:{title:"Set New Password",subtitle:"Enter your new password below",password:"New Password",confirmPassword:"Confirm New Password",passwordPlaceholder:"Enter your new password (min. 8 characters)",confirmPasswordPlaceholder:"Confirm your new password",resetPassword:"Reset Password",backToSignIn:"Back to Sign In",successTitle:"Password Reset Successful",successMessage:"Your password has been reset successfully. You can now sign in with your new password.",errors:{passwordRequired:"Password is required",passwordTooShort:"Password must be at least 8 characters",passwordMismatch:"Passwords do not match",invalidToken:"Invalid or expired reset link. Please request a new one.",resetFailed:"Failed to reset password. Please try again."}}};function Zd(){const{setCurrentPage:s}=Re(),[t,r]=c.useState(""),[a,n]=c.useState(""),[i,l]=c.useState(!1),[o,d]=c.useState(!1),[m,u]=c.useState(!1),[x,p]=c.useState(""),[g,y]=c.useState(!1),[f,v]=c.useState(!0),[b,w]=c.useState(!1),h=Jd.en;c.useEffect(()=>{(async()=>{try{const P=new URLSearchParams(window.location.hash.substring(1)),k=P.get("access_token");if(P.get("type")==="recovery"&&k){const{data:{session:Q},error:se}=await F.auth.setSession({access_token:k,refresh_token:P.get("refresh_token")||""});se?(p(h.errors.invalidToken),w(!1)):w(!0)}else{const{data:{session:Q}}=await F.auth.getSession();Q?w(!0):(p(h.errors.invalidToken),w(!1))}}catch(P){console.error("Token verification error:",P),p(h.errors.invalidToken),w(!1)}finally{v(!1)}})()},[]);const T=()=>t.trim()?t.length<8?(p(h.errors.passwordTooShort),!1):t!==a?(p(h.errors.passwordMismatch),!1):!0:(p(h.errors.passwordRequired),!1),E=async R=>{if(R.preventDefault(),p(""),y(!1),!!T()){u(!0);try{const{error:P}=await Ds.updatePassword(t);P?p(P.message||h.errors.resetFailed):(y(!0),setTimeout(()=>{s("login")},2e3))}catch(P){console.error("Password reset error:",P),p(h.errors.resetFailed)}finally{u(!1)}}};return f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-teal-light/20 flex items-center justify-center",children:e.jsx(M,{className:"shadow-2xl border-0 bg-white/95 backdrop-blur-sm rounded-2xl p-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-teal-600"}),e.jsx("span",{className:"text-gray-600",children:"Verifying reset link..."})]})})}):b?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-teal-light/20",children:e.jsxs("div",{className:"flex h-full",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl text-black mb-2",children:h.title}),e.jsx("p",{className:"text-gray-600",children:h.subtitle})]}),e.jsxs(M,{className:"shadow-2xl border-0 bg-white/95 backdrop-blur-sm rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-white to-teal-50/30 rounded-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(B,{className:"space-y-1 pb-4 bg-gradient-to-r from-teal-50/50 to-blue-50/50 border-b border-teal-100/50",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>s("login"),className:"text-gray-600 hover:text-teal-600 hover:bg-teal-50/50 p-2 rounded-lg transition-all duration-200",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),h.backToSignIn]})})}),e.jsxs(L,{className:"space-y-6 p-6",children:[x&&e.jsx(at,{className:"border-red-200/50 text-red-700 bg-red-50/80 backdrop-blur-sm rounded-xl",children:e.jsx(nt,{children:x})}),g?e.jsx(at,{className:"border-green-200/50 text-green-700 bg-green-50/80 backdrop-blur-sm rounded-xl",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Me,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:h.successTitle}),e.jsx(nt,{children:h.successMessage})]})]})}):e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"password",className:"text-sm font-semibold text-gray-700",children:h.password}),e.jsxs("div",{className:"relative group",children:[e.jsx(We,{id:"password",type:i?"text":"password",placeholder:h.passwordPlaceholder,value:t,onChange:R=>r(R.target.value),disabled:m,className:"bg-white/80 border-gray-200 focus:border-teal-400 focus:ring-2 focus:ring-teal-100 rounded-xl transition-all duration-200 group-hover:border-teal-300 pr-10 pl-10"}),e.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-teal-600 transition-colors duration-200",children:i?e.jsx(zt,{className:"h-4 w-4"}):e.jsx(xt,{className:"h-4 w-4"})}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-teal-50/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"confirmPassword",className:"text-sm font-semibold text-gray-700",children:h.confirmPassword}),e.jsxs("div",{className:"relative group",children:[e.jsx(We,{id:"confirmPassword",type:o?"text":"password",placeholder:h.confirmPasswordPlaceholder,value:a,onChange:R=>n(R.target.value),disabled:m,className:"bg-white/80 border-gray-200 focus:border-teal-400 focus:ring-2 focus:ring-teal-100 rounded-xl transition-all duration-200 group-hover:border-teal-300 pr-10 pl-10"}),e.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("button",{type:"button",onClick:()=>d(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-teal-600 transition-colors duration-200",children:o?e.jsx(zt,{className:"h-4 w-4"}):e.jsx(xt,{className:"h-4 w-4"})}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-teal-50/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})]}),e.jsx(C,{type:"submit",className:"w-full bg-gradient-to-r from-teal-500 via-teal-600 to-blue-600 hover:from-teal-600 hover:via-teal-700 hover:to-blue-700 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200",disabled:m,children:m?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),h.resetPassword]}):h.resetPassword})]})]})]})]})]})}),e.jsx("div",{className:"hidden lg:flex lg:w-1/2 items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("img",{src:"./ChatGPT Image Aug 16, 2025, 01_26_07 AM.png",alt:"Studious Panda with Imtehaan.ai",className:"w-full max-w-md mx-auto"}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Set a Strong Password"}),e.jsx("p",{className:"text-gray-600",children:"Choose a password that's at least 8 characters long"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-teal-light/20 flex items-center justify-center p-4",children:e.jsx(M,{className:"shadow-2xl border-0 bg-white/95 backdrop-blur-sm rounded-2xl max-w-md w-full",children:e.jsxs(L,{className:"p-6",children:[e.jsx(at,{className:"border-red-200/50 text-red-700 bg-red-50/80 backdrop-blur-sm rounded-xl mb-4",children:e.jsx(nt,{children:x})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{onClick:()=>s("forgot-password"),className:"w-full bg-gradient-to-r from-teal-500 via-teal-600 to-blue-600 hover:from-teal-600 hover:via-teal-700 hover:to-blue-700 text-white font-semibold py-3 rounded-xl",children:"Request New Reset Link"}),e.jsx(C,{variant:"outline",onClick:()=>s("login"),className:"w-full border-gray-200 hover:border-teal-300 hover:bg-teal-50/30 text-gray-700 rounded-xl",children:h.backToSignIn})]})]})})})}const Xd={en:{steps:{role:{title:"Welcome to Imtehaan!",subtitle:"Tell us about yourself to get started",student:"Student",studentDesc:"I'm here to learn and practice",parent:"Parent",parentDesc:"I'm managing my child's education",teacher:"Teacher",teacherDesc:"I'm here to track student progress"},curriculum:{title:"Choose Your Curriculum",subtitle:"Select the curriculum you're studying or teaching",igcse:"IGCSE",igcseDesc:"Cambridge International General Certificate",alevel:"A-Level",alevelDesc:"Cambridge International A-Level",ib:"IB Diploma",ibDesc:"International Baccalaureate Diploma Programme"},subjects:{title:"Select Your Subjects",subtitle:"Choose the subjects you want to focus on",continue:"Continue with selected subjects"},language:{title:"Choose Your Language",subtitle:"Select your preferred language for the interface",english:"English"},complete:{title:"You're All Set!",subtitle:"Your personalized dashboard is ready",dashboard:"Go to Dashboard"}},subjects:{mathematics:"Mathematics",physics:"Physics",chemistry:"Chemistry",biology:"Biology",english:"English Language",literature:"English Literature",history:"History",geography:"Geography",economics:"Economics",business:"Business Studies",computer:"Computer Science",psychology:"Psychology"},common:{next:"Next",back:"Back",skip:"Skip for now"}}};function eu(){const{setCurrentPage:s,setUser:t}=Re(),[r,a]=c.useState(1),[n,i]=c.useState({role:"student",curriculum:"igcse",subjects:["mathematics","physics","chemistry"],preferredLanguage:"en"}),l=Xd.en,o=()=>{t({...n,id:Math.random().toString(36).substr(2,9),joinDate:new Date().toISOString()}),s("dashboard")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-center space-x-2 mb-4",children:e.jsx("div",{className:"w-3 h-3 rounded-full bg-[#FF4A10]"})}),e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Welcome"})]}),e.jsx(M,{className:"border-0 shadow-xl",children:e.jsx(L,{className:"p-8",children:r===1&&e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-cyan-500 to-orange-500 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Mr,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-black",children:l.steps.role.title}),e.jsx("p",{className:"text-lg text-gray-600 max-w-md mx-auto",children:"Your AI-powered learning companion for exam success. Supporting IGCSE, O Levels, A Levels, Edexcel, and IB curricula."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 my-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(Pe,{className:"h-6 w-6 text-blue-600"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Practice Questions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(Ls,{className:"h-6 w-6 text-green-600"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI Tutor"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(Me,{className:"h-6 w-6 text-purple-600"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Progress Tracking"})]})]}),e.jsxs(C,{onClick:o,className:"w-full bg-[#FF4A10] hover:bg-[#E63E0E] text-white",size:"lg",children:[l.steps.complete.dashboard,e.jsx(Ae,{className:"ml-2 h-4 w-4"})]})]})})})]})})}class tu{currentSessionId=null;sessionStartTime=null;async startStudySession(t,r="Study Session",a=[]){try{const n={user_id:t,session_name:r,start_time:new Date().toISOString(),duration:0,topics_covered:[],total_activities:0,session_goals:a,notes:""},{data:i,error:l}=await F.from("study_sessions").insert(n).select("id").single();if(l)throw l;return this.currentSessionId=i.id,this.sessionStartTime=new Date,console.log(" Study session started:",i.id),i.id}catch(n){throw console.error(" Error starting study session:",n),n}}async endStudySession(){if(!this.currentSessionId||!this.sessionStartTime){console.warn(" No active study session to end");return}try{const t=Math.floor((Date.now()-this.sessionStartTime.getTime())/1e3),{error:r}=await F.from("study_sessions").update({end_time:new Date().toISOString(),duration:t}).eq("id",this.currentSessionId);if(r)throw r;console.log(" Study session ended:",this.currentSessionId,"Duration:",t,"seconds"),this.currentSessionId=null,this.sessionStartTime=null}catch(t){throw console.error(" Error ending study session:",t),t}}async trackActivity(t){try{const{data:{user:r}}=await F.auth.getUser();if(!r)throw new Error("User not authenticated");const a={...t,user_id:r.id,session_id:this.currentSessionId||void 0,session_start:this.sessionStartTime?.toISOString(),session_end:new Date().toISOString()},{data:n,error:i}=await F.from("learning_activities").insert(a).select("id").single();if(i)throw i;return this.currentSessionId&&await this.updateSessionActivity(this.currentSessionId,t.topic_name),console.log(" Activity tracked:",t.activity_type,"for topic:",t.topic_name),n.id}catch(r){throw console.error(" Error tracking activity:",r),r}}async trackQuestion(t,r,a,n,i=0,l,o){const d=n?100:0;return this.trackActivity({activity_type:"question",topic_id:t,topic_name:r,subject_name:a,duration:i,correct_answers:n?1:0,total_questions:1,accuracy:d,metadata:{difficulty:l,marks:o,questionType:"practice"}})}async trackLesson(t,r,a,n,i="reading"){return this.trackActivity({activity_type:i==="video"?"video_lesson":"lesson",topic_id:t,topic_name:r,subject_name:a,duration:n,score:100,accuracy:100,metadata:{lessonType:i,completionStatus:"completed"}})}async trackFlashcard(t,r,a,n,i=0,l){const o=n?100:0;return this.trackActivity({activity_type:"flashcard",topic_id:t,topic_name:r,subject_name:a,duration:i,correct_answers:n?1:0,total_questions:1,accuracy:o,metadata:{masteryLevel:l,flashcardType:"review"}})}async trackMockExam(t,r,a,n,i,l,o){const d=l>0?i/l*100:0;return this.trackActivity({activity_type:"mock_exam",topic_id:t,topic_name:r,subject_name:a,duration:n,score:o,correct_answers:i,total_questions:l,accuracy:d,metadata:{examType:"mock",difficulty:o>=80?"easy":o>=60?"medium":"hard"}})}async trackPracticeSession(t,r,a,n,i,l){const o=i>0?l/i*100:0;return this.trackActivity({activity_type:"practice_session",topic_id:t,topic_name:r,subject_name:a,duration:n,score:o,correct_answers:l,total_questions:i,accuracy:o,metadata:{sessionType:"practice",questionsAnswered:i,correctAnswers:l}})}async updateSessionActivity(t,r){try{const{data:a}=await F.from("study_sessions").select("topics_covered, total_activities").eq("id",t).single();if(a){const n=a.topics_covered||[];n.includes(r)||n.push(r);const{error:i}=await F.from("study_sessions").update({topics_covered:n,total_activities:(a.total_activities||0)+1}).eq("id",t);if(i)throw i}}catch(a){console.error(" Error updating session activity:",a)}}async getUserAnalytics(t){try{const{data:r,error:a}=await F.from("learning_activities").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(a)throw a;const n=new Map;return(r||[]).forEach(l=>{const o=`${l.topic_id}_${l.topic_name}`;n.has(o)||n.set(o,{topicId:l.topic_id?.toString()||"0",topicName:l.topic_name||"Unknown",subjectName:l.subject_name||"Unknown",questionsAttempted:0,questionsCorrect:0,accuracy:0,timeSpent:0,lessonsCompleted:0,videoLessonsCompleted:0,flashcardsReviewed:0,flashcardsCorrect:0,mockExamsTaken:0,averageMockExamScore:0,lastActivity:l.created_at||new Date().toISOString(),completionPercentage:0,studyStreak:0,averageStudyTime:0});const d=n.get(o);switch(l.activity_type){case"question":d.questionsAttempted+=l.total_questions||0,d.questionsCorrect+=l.correct_answers||0,d.timeSpent+=l.duration||0;break;case"lesson":d.lessonsCompleted+=1,d.timeSpent+=l.duration||0;break;case"video_lesson":d.videoLessonsCompleted+=1,d.timeSpent+=l.duration||0;break;case"flashcard":d.flashcardsReviewed+=1,d.flashcardsCorrect+=l.correct_answers||0,d.timeSpent+=l.duration||0;break;case"mock_exam":d.mockExamsTaken+=1,d.averageMockExamScore=l.score||0,d.timeSpent+=l.duration||0;break}new Date(l.created_at)>new Date(d.lastActivity)&&(d.lastActivity=l.created_at)}),Array.from(n.values()).map(l=>(l.accuracy=l.questionsAttempted>0?Math.round(l.questionsCorrect/l.questionsAttempted*100):0,l.averageStudyTime=l.timeSpent>0?Math.round(l.timeSpent/10):0,l.completionPercentage=this.calculateCompletionPercentage({questions_attempted:l.questionsAttempted,questions_correct:l.questionsCorrect,lessons_completed:l.lessonsCompleted,video_lessons_completed:l.videoLessonsCompleted,flashcards_reviewed:l.flashcardsReviewed,mock_exams_taken:l.mockExamsTaken}),l))}catch(r){return console.error(" Error fetching user analytics:",r),[]}}calculateCompletionPercentage(t){const r=t.questions_attempted||0,a=t.questions_correct||0,n=t.lessons_completed||0,i=t.video_lessons_completed||0,l=t.flashcards_reviewed||0,o=t.mock_exams_taken||0;if(r===0&&n===0&&i===0&&l===0&&o===0)return 0;const d={questions:.35,lessons:.25,videoLessons:.2,flashcards:.15,mockExams:.05};let m=0,u=0;if(r>0){const p=a/r;m+=r*d.questions*p,u+=d.questions}n>0&&(m+=n*d.lessons,u+=d.lessons),i>0&&(m+=i*d.videoLessons,u+=d.videoLessons),l>0&&(m+=l*d.flashcards,u+=d.flashcards),o>0&&(m+=o*d.mockExams,u+=d.mockExams);const x=u>0?m/u*100:0;return Math.min(Math.round(x),100)}async getStudyStreaks(t){try{const r=new Date(Date.now()-2592e6),{data:a,error:n}=await F.from("learning_activities").select("created_at").eq("user_id",t).gte("created_at",r.toISOString()).order("created_at",{ascending:!1});if(n)throw n;if(!a||a.length===0)return{currentStreak:0,longestStreak:0};const i=new Map;a.forEach(p=>{const g=new Date(p.created_at).toISOString().split("T")[0];i.set(g,(i.get(g)||0)+1)});const l=Array.from(i.keys()).sort((p,g)=>new Date(g).getTime()-new Date(p).getTime());let o=0,d=0,m=0;const u=new Date().toISOString().split("T")[0],x=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];for(let p=0;p<l.length;p++){const g=l[p],y=p<l.length-1?l[p+1]:null;g===u||g===x?p===0||y&&this.isConsecutiveDay(g,y)?(m++,(g===u||g===x)&&(o=m)):(d=Math.max(d,m),m=1,(g===u||g===x)&&(o=m)):y&&this.isConsecutiveDay(g,y)?m++:(d=Math.max(d,m),m=0)}return d=Math.max(d,m),{currentStreak:o,longestStreak:d}}catch(r){return console.error(" Error calculating study streaks:",r),{currentStreak:0,longestStreak:0}}}isConsecutiveDay(t,r){const a=new Date(t),n=new Date(r),i=Math.abs(a.getTime()-n.getTime());return Math.ceil(i/(1e3*60*60*24))===1}async getLearningPatterns(t){try{const{data:r,error:a}=await F.from("study_sessions").select("start_time, duration, topics_covered").eq("user_id",t).gte("start_time",new Date(Date.now()-2592e6).toISOString());if(a)throw a;if(!r||r.length===0)return{preferredStudyTime:"Morning",averageSessionLength:30,topicsPerSession:1,retentionRate:0};const i=r.map(p=>{const g=new Date(p.start_time).getHours();return g>=6&&g<12?"Morning":g>=12&&g<18?"Afternoon":g>=18&&g<22?"Evening":"Night"}).reduce((p,g)=>(p[g]=(p[g]||0)+1,p),{}),l=Object.entries(i).sort(([,p],[,g])=>g-p)[0][0],o=r.reduce((p,g)=>p+(g.duration||0),0),d=Math.round(o/r.length),m=r.reduce((p,g)=>p+(g.topics_covered?.length||0),0),u=Math.round(m/r.length),x=Math.min(Math.round(r.length/30*100),100);return{preferredStudyTime:l,averageSessionLength:d,topicsPerSession:u,retentionRate:x}}catch(r){return console.error(" Error analyzing learning patterns:",r),{preferredStudyTime:"Morning",averageSessionLength:30,topicsPerSession:1,retentionRate:0}}}}const It=new tu,vt={activeSessions:new Map,dailyAnalyticsCache:new Map,startSession(s,t,r,a){const n=`session_${s}_${Date.now()}`;return console.log(" DEBUG: startSession called with:",{userId:s,topicId:t,subjectId:r,activityType:a}),console.log(" DEBUG: Created sessionId:",n),this.activeSessions.set(n,{startTime:Date.now(),duration:0,activities:[a],topicId:t,subjectId:r}),console.log(" DEBUG: Session stored, activeSessions size:",this.activeSessions.size),console.log(" DEBUG: Active sessions:",Array.from(this.activeSessions.entries())),n},endSession(s){const t=this.activeSessions.get(s);t&&(t.endTime=Date.now(),t.duration=Math.floor((t.endTime-t.startTime)/1e3),console.log(" DEBUG: Session ended:",s,"Duration:",t.duration,"seconds"),this.activeSessions.delete(s))},async trackActivity(s){try{const{error:t}=await F.from("learning_activities").insert({user_id:s.userId,activity_type:s.activityType,topic_id:s.topicId,subject_id:s.subjectId,topic_name:s.topicName,subject_name:s.subjectName,duration:s.duration||0,score:s.metadata.score||0,correct_answers:s.metadata.correctAnswers||0,total_questions:s.metadata.totalQuestions||0,accuracy:s.metadata.isCorrect?100:0,metadata:s.metadata,created_at:s.timestamp});if(t)throw console.error(" Error tracking activity:",t),t;await this.updateDailyAnalytics(s),console.log(" Activity tracked:",s.activityType,"for topic:",s.topicName)}catch(t){throw console.error(" Error tracking activity:",t),t}},async updateDailyAnalytics(s){try{const t=new Date().toISOString().split("T")[0],r=`${s.userId}_${t}`;let a=this.dailyAnalyticsCache.get(r);if(!a){const{data:l}=await F.from("daily_analytics").select("*").eq("user_id",s.userId).eq("date",t).single();l?a=l:a={date:t,userId:s.userId,totalActivities:0,totalTimeSpent:0,questionsAttempted:0,questionsCorrect:0,flashcardsReviewed:0,flashcardsCorrect:0,lessonsStarted:0,lessonsCompleted:0,videoLessonsWatched:0,videoLessonsCompleted:0,mockExamsTaken:0,averageMockExamScore:0,practiceSessionsCompleted:0,averagePracticeScore:0,aiTutorInteractions:0,dashboardVisits:0,topicSelections:0,settingsChanges:0,profileUpdates:0,totalTopicsStudied:0,studyStreak:0,productivityScore:0,focusTime:0,breakTime:0,sessionCount:0,averageSessionLength:0,peakStudyHour:0,weakAreas:[],strongAreas:[],recommendations:[]}}a.totalActivities++;const n=s.duration||0;switch(n>0&&(a.totalTimeSpent+=n,console.log(` Enhanced tracker: Adding ${n} seconds to totalTimeSpent`)),s.activityType){case"question":a.questionsAttempted+=s.metadata.totalQuestions||1,a.questionsCorrect+=s.metadata.correctAnswers||(s.metadata.isCorrect?1:0);break;case"flashcard":a.flashcardsReviewed+=s.metadata.reviewCount||1,a.flashcardsCorrect+=s.metadata.correctAnswers||(s.metadata.isCorrect?1:0);break;case"lesson":s.metadata.completionStatus==="started"?a.lessonsStarted++:s.metadata.completionStatus==="completed"&&a.lessonsCompleted++;break;case"video_lesson":a.videoLessonsWatched++,s.metadata.watchTime&&s.metadata.videoDuration&&s.metadata.watchTime>=s.metadata.videoDuration*.8&&a.videoLessonsCompleted++;break;case"mock_exam":if(a.mockExamsTaken++,s.metadata.score){const l=a.averageMockExamScore*(a.mockExamsTaken-1);a.averageMockExamScore=(l+s.metadata.score)/a.mockExamsTaken}break;case"practice_session":if(a.practiceSessionsCompleted++,s.metadata.score){const l=a.averagePracticeScore*(a.practiceSessionsCompleted-1);a.averagePracticeScore=(l+s.metadata.score)/a.practiceSessionsCompleted}break;case"ai_tutor":a.aiTutorInteractions++;break;case"dashboard_visit":a.dashboardVisits++;break;case"topic_selection":a.topicSelections++;break;case"settings_change":a.settingsChanges++;break;case"profile_update":a.profileUpdates++;break}a.weakAreas.includes(s.topicName)||a.weakAreas.push(s.topicName),a.productivityScore=this.calculateProductivityScore(a);const i=a.questionsAttempted>0?Math.round(a.questionsCorrect/a.questionsAttempted*100):0;console.log(` Updated accuracy: ${a.questionsCorrect}/${a.questionsAttempted} = ${i}%`),this.dailyAnalyticsCache.set(r,a),await this.saveDailyAnalytics(a)}catch(t){console.error(" Error updating daily analytics:",t)}},async saveDailyAnalytics(s){try{const{error:t}=await F.from("daily_analytics").upsert({date:s.date,user_id:s.userId,total_activities:s.totalActivities,total_time_spent:s.totalTimeSpent,questions_attempted:s.questionsAttempted,questions_correct:s.questionsCorrect,flashcards_reviewed:s.flashcardsReviewed,flashcards_correct:s.flashcardsCorrect,lessons_started:s.lessonsStarted,lessons_completed:s.lessonsCompleted,video_lessons_watched:s.videoLessonsWatched,video_lessons_completed:s.videoLessonsCompleted,mock_exams_taken:s.mockExamsTaken,average_mock_exam_score:s.averageMockExamScore,practice_sessions_completed:s.practiceSessionsCompleted,average_practice_score:s.averagePracticeScore,ai_tutor_interactions:s.aiTutorInteractions,dashboard_visits:s.dashboardVisits,topic_selections:s.topicSelections,settings_changes:s.settingsChanges,profile_updates:s.profileUpdates,total_topics_studied:s.totalTopicsStudied,study_streak:s.studyStreak,productivity_score:s.productivityScore,focus_time:s.focusTime,break_time:s.breakTime,session_count:s.sessionCount,average_session_length:s.averageSessionLength,peak_study_hour:s.peakStudyHour,weak_areas:s.weakAreas,strong_areas:s.strongAreas,recommendations:s.recommendations},{onConflict:"date,user_id"});if(t)throw console.error(" Error saving daily analytics:",t),t}catch(t){console.error(" Error saving daily analytics:",t)}},calculateProductivityScore(s){let t=0;const r={questions:3,lessons:4,videoLessons:3,flashcards:2,mockExams:5,practiceSessions:3};if(t+=s.questionsAttempted*r.questions,t+=s.lessonsCompleted*r.lessons,t+=s.videoLessonsCompleted*r.videoLessons,t+=s.flashcardsReviewed*r.flashcards,t+=s.mockExamsTaken*r.mockExams,t+=s.practiceSessionsCompleted*r.practiceSessions,s.questionsAttempted>0){const i=s.questionsCorrect/s.questionsAttempted;t*=.5+i}if(s.totalTimeSpent>0){const i=s.totalTimeSpent/3600,l=s.totalActivities/i;t+=Math.min(l*2,20)}t+=Math.min(s.studyStreak*1.5,15);const n=Math.min(Math.round(t/100*100),100);return Math.max(n,0)},async getDailyAnalytics(s,t){try{const r=t||new Date().toISOString().split("T")[0],a=`${s}_${r}`;if(this.dailyAnalyticsCache.has(a))return this.dailyAnalyticsCache.get(a);const{data:n,error:i}=await F.from("daily_analytics").select("*").eq("user_id",s).eq("date",r).single();if(i){if(i.code==="PGRST116")return null;throw i}return this.dailyAnalyticsCache.set(a,n),n}catch(r){return console.error(" Error getting daily analytics:",r),null}},async getWeeklyAnalytics(s){try{const t=new Date,r=new Date(t.getTime()-7*24*60*60*1e3),{data:a,error:n}=await F.from("daily_analytics").select("*").eq("user_id",s).gte("date",r.toISOString().split("T")[0]).lte("date",t.toISOString().split("T")[0]).order("date",{ascending:!0});if(n)throw n;return a||[]}catch(t){return console.error(" Error getting weekly analytics:",t),[]}},async getMonthlyAnalytics(s){try{const t=new Date,r=new Date(t.getTime()-30*24*60*60*1e3),{data:a,error:n}=await F.from("daily_analytics").select("*").eq("user_id",s).gte("date",r.toISOString().split("T")[0]).lte("date",t.toISOString().split("T")[0]).order("date",{ascending:!0});if(n)throw n;return a||[]}catch(t){return console.error(" Error getting monthly analytics:",t),[]}},async resetDailyAnalytics(){try{const s=new Date(Date.now()-864e5).toISOString().split("T")[0];for(const[t]of this.dailyAnalyticsCache)t.includes(s)&&this.dailyAnalyticsCache.delete(t);console.log(" Daily analytics reset completed")}catch(s){console.error(" Error resetting daily analytics:",s)}},async trackDashboardVisit(s){await this.trackActivity({userId:s,activityType:"dashboard_visit",subjectId:0,topicId:0,subjectName:"General",topicName:"Dashboard",timestamp:new Date().toISOString(),metadata:{pageVisited:"dashboard",actionType:"view"}})},async trackTopicSelection(s,t,r,a){await this.trackActivity({userId:s,activityType:"topic_selection",subjectId:0,topicId:t,subjectName:a,topicName:r,timestamp:new Date().toISOString(),metadata:{pageVisited:"topic_selection",actionType:"select"}})},async trackAITutorInteraction(s,t,r,a,n){await this.trackActivity({userId:s,activityType:"ai_tutor",subjectId:0,topicId:t,subjectName:a,topicName:r,timestamp:new Date().toISOString(),metadata:{aiQuery:n,responseLength:n.length,topicRelevance:1}})},async trackSettingsChange(s,t,r,a){await this.trackActivity({userId:s,activityType:"settings_change",subjectId:0,topicId:0,subjectName:"General",topicName:"Settings",timestamp:new Date().toISOString(),metadata:{pageVisited:"settings",actionType:"change",settingType:t,oldValue:JSON.stringify(r),newValue:JSON.stringify(a)}})},async trackProfileUpdate(s,t){await this.trackActivity({userId:s,activityType:"profile_update",subjectId:0,topicId:0,subjectName:"General",topicName:"Profile",timestamp:new Date().toISOString(),metadata:{pageVisited:"profile",actionType:"update",updateType:t}})},async getActivitySummary(s){try{const t=new Date().toISOString().split("T")[0],r=await this.getDailyAnalytics(s,t),a=await this.getWeeklyAnalytics(s),n=await this.getMonthlyAnalytics(s),i=n.reduce((v,b)=>v+b.totalActivities,0),l=n.reduce((v,b)=>v+b.totalTimeSpent,0),o=n.reduce((v,b)=>v+b.questionsAttempted,0),d=n.reduce((v,b)=>v+b.questionsCorrect,0),m=n.reduce((v,b)=>v+b.lessonsCompleted,0),u=n.reduce((v,b)=>v+b.videoLessonsCompleted,0),x=n.reduce((v,b)=>v+b.mockExamsTaken,0),p=n.reduce((v,b)=>v+b.practiceSessionsCompleted,0),g=a.reduce((v,b)=>v+b.totalTimeSpent,0),y=n.reduce((v,b)=>v+b.totalTimeSpent,0),f=this.calculateStudyStreak(n);return{totalActivities:i,totalTimeSpent:l,questionsAttempted:o,questionsCorrect:d,flashcardsReviewed:n.reduce((v,b)=>v+b.flashcardsReviewed,0),flashcardsCorrect:n.reduce((v,b)=>v+b.flashcardsCorrect,0),lessonsStarted:n.reduce((v,b)=>v+b.lessonsStarted,0),lessonsCompleted:m,videoLessonsWatched:n.reduce((v,b)=>v+b.videoLessonsWatched,0),videoLessonsCompleted:u,mockExamsTaken:x,averageMockExamScore:x>0?n.reduce((v,b)=>v+b.averageMockExamScore*b.mockExamsTaken,0)/x:0,practiceSessionsCompleted:p,averagePracticeScore:p>0?n.reduce((v,b)=>v+b.averagePracticeScore*b.practiceSessionsCompleted,0)/p:0,totalTopicsStudied:n.reduce((v,b)=>v+b.totalTopicsStudied,0),currentStreak:f.currentStreak,longestStreak:f.longestStreak,weeklyStudyTime:g,monthlyStudyTime:y,todayActivities:r?.totalActivities||0,todayTimeSpent:r?.totalTimeSpent||0,todayQuestions:r?.questionsAttempted||0,todayLessons:r?.lessonsCompleted||0,todayStreak:r?.studyStreak||0}}catch(t){return console.error(" Error getting activity summary:",t),{totalActivities:0,totalTimeSpent:0,questionsAttempted:0,questionsCorrect:0,flashcardsReviewed:0,flashcardsCorrect:0,lessonsStarted:0,lessonsCompleted:0,videoLessonsWatched:0,videoLessonsCompleted:0,mockExamsTaken:0,averageMockExamScore:0,practiceSessionsCompleted:0,averagePracticeScore:0,totalTopicsStudied:0,currentStreak:0,longestStreak:0,weeklyStudyTime:0,monthlyStudyTime:0,todayActivities:0,todayTimeSpent:0,todayQuestions:0,todayLessons:0,todayStreak:0}}},calculateStudyStreak(s){if(s.length===0)return{currentStreak:0,longestStreak:0};const t=s.sort((i,l)=>new Date(l.date).getTime()-new Date(i.date).getTime());let r=0,a=0,n=0;for(let i=0;i<t.length;i++){const l=new Date(t[i].date),o=i<t.length-1?new Date(t[i+1].date):null;if(o?Math.floor((l.getTime()-o.getTime())/864e5)===1&&t[i].totalActivities>0?n++:(a=Math.max(a,n+1),n=0):t[i].totalActivities>0&&n++,i===0){const d=new Date().toDateString(),m=new Date(Date.now()-24*60*60*1e3).toDateString();(l.toDateString()===d||l.toDateString()===m)&&(r=n)}}return a=Math.max(a,n),{currentStreak:r,longestStreak:a}},initializeDailyReset(){const s=new Date,t=new Date(s);t.setHours(24,0,0,0);const r=t.getTime()-s.getTime();setTimeout(()=>{this.resetDailyAnalytics(),setInterval(()=>{this.resetDailyAnalytics()},24*60*60*1e3)},r),console.log(" Daily analytics reset scheduler initialized")},async clearUserCache(s){try{for(const[t]of this.dailyAnalyticsCache)t.includes(s)&&this.dailyAnalyticsCache.delete(t);console.log(` Cleared cache for user: ${s}`)}catch(t){console.error(" Error clearing user cache:",t)}},async trackLesson(s,t,r,a,n,i="completed"){await this.trackActivity({userId:s,activityType:"lesson",subjectId:0,topicId:t,subjectName:a,topicName:r,timestamp:new Date().toISOString(),duration:n*60,metadata:{completionStatus:i,lessonId:`lesson_${t}`,readingTime:n}})},async trackMockExam(s,t,r,a,n,i,l,o){await this.trackActivity({userId:s,activityType:"mock_exam",subjectId:0,topicId:t,subjectName:a,topicName:r,timestamp:new Date().toISOString(),duration:n*60,metadata:{correctAnswers:i,totalQuestions:l,score:o}})},async trackVideoLesson(s,t,r,a,n,i,l){await this.trackActivity({userId:s,activityType:"video_lesson",subjectId:0,topicId:t,subjectName:a,topicName:r,timestamp:new Date().toISOString(),duration:n*60,metadata:{watchTime:i,videoDuration:l,completionStatus:i>=l*.8?"completed":"started"}})}};vt.initializeDailyReset();const Ea={maxRetries:3,initialDelay:1e3,maxDelay:1e4,backoffMultiplier:2,retryableErrors:["ECONNREFUSED","ETIMEDOUT","ENOTFOUND","Network request failed","fetch failed","Failed to fetch"],onRetry:()=>{}};function su(s,t){const r=s.message.toLowerCase();return t.some(a=>r.includes(a.toLowerCase()))}function ru(s,t,r,a){const n=t*Math.pow(a,s);return Math.min(n,r)}function au(s){return new Promise(t=>setTimeout(t,s))}async function ui(s,t={}){const r={...Ea,...t};let a;for(let n=0;n<r.maxRetries;n++)try{const i=await s();return n>0&&console.log(` Operation succeeded after ${n+1} attempts`),i}catch(i){if(a=i,!(n<r.maxRetries-1&&su(a,r.retryableErrors)))throw n===r.maxRetries-1?console.error(` Operation failed after ${r.maxRetries} attempts`):console.error(` Operation failed with non-retryable error: ${a.message}`),a;const o=ru(n,r.initialDelay,r.maxDelay,r.backoffMultiplier);console.warn(` Attempt ${n+1}/${r.maxRetries} failed: ${a.message}. Retrying in ${o}ms...`),r.onRetry(a,n+1),await au(o)}throw a}function nu(s={}){return t=>ui(t,s)}async function ft(s){return ui(async()=>await Promise.resolve(s()),{maxRetries:3,initialDelay:1e3,retryableErrors:[...Ea.retryableErrors,"PGRST","connection","timeout","Could not connect"],onRetry:(t,r)=>{console.log(` Database retry attempt ${r}: ${t.message}`)}})}nu({maxRetries:2,initialDelay:500,retryableErrors:[...Ea.retryableErrors,"500","502","503","504","Internal Server Error","Bad Gateway","Service Unavailable"],onRetry:(s,t)=>{console.log(` API retry attempt ${t}: ${s.message}`)}});const Ts={BUSINESS_STUDIES:101,MATHEMATICS:102,PHYSICS:103,CHEMISTRY:104},ns={AI_TUTOR:"ai-tutor",PRACTICE:"practice",FLASHCARDS:"flashcards",VISUAL_LEARNING:"visual-learning",MOCK_EXAM_P1:"mock-exam-p1",MOCK_EXAM_P2:"mock-exam-p2"},iu={[ns.AI_TUTOR]:"AI Tutor & Lessons",[ns.PRACTICE]:"Practice Mode",[ns.FLASHCARDS]:"Flashcards",[ns.VISUAL_LEARNING]:"Visual Learning",[ns.MOCK_EXAM_P1]:"Mock Exam Paper 1",[ns.MOCK_EXAM_P2]:"Mock Exam Paper 2"},yt={USERS:"users",TOPICS:"topics",QUESTIONS:"questions",BUSINESS_ACTIVITY_QUESTIONS:"business_activity_questions",FLASHCARDS:"flashcards",VIDEO_LESSONS:"video_lessons",LESSONS:"lessons",DAILY_ANALYTICS:"daily_analytics",LEARNING_ACTIVITIES:"learning_activities",PAGE_SESSIONS:"page_sessions",MOCK_EXAM_ATTEMPTS:"mock_exam_attempts",STUDY_PLANS:"study_plans",STUDY_SESSIONS:"study_sessions",CHAT_MESSAGES:"chat_messages",P1_MOCK_EXAM:"p1_mock_exam",P2_MOCK_EXAM:"p2_mock_exam"},ou={REAL_TIME:5*1e3,FREQUENT:30*1e3,NORMAL:60*1e3,LAZY:5*60*1e3,HOURLY:60*60*1e3};class ds{static instance;BUFFER_KEY="imtehaan_analytics_buffer";TIME_BUFFER_KEY="imtehaan_time_buffer";SYNC_INTERVAL=ou.NORMAL;MAX_BUFFER_SIZE=1e3;MAX_STORAGE_SIZE=5*1024*1024;MAX_TIME_BUFFERS=50;syncTimer=null;constructor(){this.startAutoSync(),this.syncOnVisibilityChange()}static getInstance(){return ds.instance||(ds.instance=new ds),ds.instance}bufferTimeTracking(t,r,a){try{this.clearOldBuffers(),this.enforceStorageLimits();const n=this.getTimeBuffer(t,r),i=new Date().toISOString(),l=new Date().toISOString().split("T")[0],d=n?.startTime?.split("T")[0]===l,m=!d,u={userId:t,page:r,seconds:d?(n?.seconds||0)+a:a,startTime:d&&n?.startTime||i,lastUpdate:i},x=this.getAllTimeBuffers(),p=`${t}_${r}`;x[p]=u,localStorage.setItem(this.TIME_BUFFER_KEY,JSON.stringify(x)),console.log(` Buffered ${a}s for ${r}. Total: ${u.seconds}s${m?" (NEW SESSION)":""}`),m?(this.incrementSessionCount(t),this.logPageVisit(t,r,i)):this.updateLastPageVisit(t,r,i)}catch(n){console.error(" Error buffering time tracking:",n)}}logPageVisit(t,r,a){try{const n=`page_visits_${t}`,i=JSON.parse(localStorage.getItem(n)||"[]"),l={page:r,pageName:iu[r]||r,timestamp:a,type:"page_visit"};i.unshift(l);const o=i.slice(0,20);localStorage.setItem(n,JSON.stringify(o)),console.log(` Logged page visit: ${l.pageName}`)}catch(n){console.error(" Error logging page visit:",n)}}updateLastPageVisit(t,r,a){try{const n=`page_visits_${t}`,i=JSON.parse(localStorage.getItem(n)||"[]"),l=i.find(o=>o.page===r);l&&(l.timestamp=a,localStorage.setItem(n,JSON.stringify(i)))}catch(n){console.error(" Error updating page visit:",n)}}getRecentPageVisits(t,r=5){try{const a=`page_visits_${t}`;return JSON.parse(localStorage.getItem(a)||"[]").slice(0,r)}catch(a){return console.error(" Error getting recent page visits:",a),[]}}incrementSessionCount(t){try{const r=new Date().toISOString().split("T")[0],a=`session_count_${t}_${r}`,i=parseInt(localStorage.getItem(a)||"0")+1;localStorage.setItem(a,i.toString()),console.log(` Session count incremented to ${i} for ${r}`)}catch(r){console.error(" Error incrementing session count:",r)}}getTodaySessionCount(t){try{const r=new Date().toISOString().split("T")[0],a=`session_count_${t}_${r}`;return parseInt(localStorage.getItem(a)||"0")}catch{return 0}}clearOldBuffers(){try{const t=this.getAllTimeBuffers(),r=new Date().toISOString().split("T")[0];let a=!1;Object.keys(t).forEach(n=>{const i=t[n],l=i.startTime?.split("T")[0];l&&l!==r&&(delete t[n],a=!0,console.log(` Cleared old buffer for ${i.page} from ${l}`))}),a&&localStorage.setItem(this.TIME_BUFFER_KEY,JSON.stringify(t))}catch(t){console.error(" Error clearing old buffers:",t)}}bufferAnalytic(t,r,a){try{const n=this.getBuffer(),i={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:t,type:r,data:a,timestamp:new Date().toISOString(),synced:!1};n.push(i),localStorage.setItem(this.BUFFER_KEY,JSON.stringify(n)),console.log(` Buffered ${r} analytics`)}catch(n){console.error(" Error buffering analytic:",n)}}getTimeBuffer(t,r){const a=this.getAllTimeBuffers(),n=`${t}_${r}`;return a[n]||null}getAllTimeBuffers(){try{const t=localStorage.getItem(this.TIME_BUFFER_KEY);return t?JSON.parse(t):{}}catch(t){return console.error(" Error getting time buffers:",t),{}}}getBuffer(){try{const t=localStorage.getItem(this.BUFFER_KEY);return t?JSON.parse(t):[]}catch(t){return console.error(" Error getting buffer:",t),[]}}async syncToSupabase(){console.log(" Starting analytics sync to Supabase...");let t=0,r=0;try{const a=this.getAllTimeBuffers(),n=Object.keys(a);for(const d of n){const m=a[d];if(m.seconds>0)try{await this.syncTimeToSupabase(m),delete a[d],t++,console.log(` Synced ${m.seconds}s for ${m.page}`)}catch(u){console.error(` Failed to sync time for ${m.page}:`,u),r++}}localStorage.setItem(this.TIME_BUFFER_KEY,JSON.stringify(a));const i=this.getBuffer(),l=i.filter(d=>!d.synced);for(const d of l)try{await this.syncEventToSupabase(d),d.synced=!0,t++,console.log(` Synced ${d.type} event`)}catch(m){console.error(` Failed to sync ${d.type} event:`,m),r++}const o=i.filter(d=>!d.synced);return localStorage.setItem(this.BUFFER_KEY,JSON.stringify(o)),console.log(` Sync complete: ${t} synced, ${r} failed`),{success:!0,synced:t,failed:r}}catch(a){return console.error(" Error during sync:",a),{success:!1,synced:t,failed:r}}}async syncTimeToSupabase(t){const r=new Date().toISOString().split("T")[0],{data:a,error:n}=await ft(async()=>await F.from(yt.DAILY_ANALYTICS).select("*").eq("user_id",t.userId).eq("date",r).single());if(n&&n.code!=="PGRST116")throw n;const i=a?.total_time_spent||0,l=i+t.seconds,o=this.getTodaySessionCount(t.userId)||a?.session_count||1,d=o>0?Math.round(l/o):t.seconds;console.log(` Syncing: ${t.seconds}s | Total: ${l}s | Sessions: ${o} | Avg: ${d}s`);const{error:m}=await ft(()=>F.from(yt.DAILY_ANALYTICS).upsert({user_id:t.userId,date:r,total_time_spent:l,session_count:o,average_session_length:d,total_activities:(a?.total_activities||0)+1},{onConflict:"date,user_id"}));if(m)throw m;console.log(` Synced to DB: ${l}s total (was ${i}s, added ${t.seconds}s) | ${o} sessions`)}async syncEventToSupabase(t){switch(t.type){case"activity":await this.syncActivityEvent(t);break;case"accuracy":await this.syncAccuracyEvent(t);break;case"session":await this.syncSessionEvent(t);break;default:console.warn(`Unknown event type: ${t.type}`)}}async syncActivityEvent(t){const{error:r}=await F.from("learning_activities").insert({user_id:t.userId,activity_type:t.data.activityType,subject_id:t.data.subjectId,topic_id:t.data.topicId,time_spent:t.data.timeSpent,questions_attempted:t.data.questionsAttempted||0,accuracy:t.data.accuracy||0,timestamp:t.timestamp});if(r)throw r}async syncAccuracyEvent(t){const r=new Date(t.timestamp).toISOString().split("T")[0],{data:a}=await F.from("daily_analytics").select("*").eq("user_id",t.userId).eq("date",r).single(),n=(a?.questions_attempted||0)+t.data.questionsAttempted,i=(a?.questions_correct||0)+t.data.questionsCorrect,{error:l}=await F.from("daily_analytics").upsert({user_id:t.userId,date:r,questions_attempted:n,questions_correct:i},{onConflict:"date,user_id"});if(l)throw l}async syncSessionEvent(t){const{error:r}=await F.from("page_sessions").insert({user_id:t.userId,page_title:t.data.pageTitle,page_url:t.data.pageUrl,session_start:t.data.sessionStart,session_end:t.data.sessionEnd,time_spent:t.data.timeSpent});if(r)throw r}startAutoSync(){this.syncTimer&&clearInterval(this.syncTimer),this.syncTimer=setInterval(()=>{this.syncToSupabase()},this.SYNC_INTERVAL),console.log(" Auto-sync started (every 60 seconds)")}syncOnVisibilityChange(){typeof document<"u"&&(document.addEventListener("visibilitychange",()=>{document.hidden&&(console.log(" Page hidden, syncing analytics..."),this.syncToSupabase())}),window.addEventListener("beforeunload",()=>{console.log(" Page unloading, syncing analytics...");const t=this.getAllTimeBuffers(),r=this.getBuffer();(Object.keys(t).length>0||r.length>0)&&localStorage.setItem("imtehaan_needs_sync","true")}))}async syncPendingData(){this.clearOldBuffers(),localStorage.getItem("imtehaan_needs_sync")==="true"&&(console.log(" Found pending analytics, syncing..."),await this.syncToSupabase(),localStorage.removeItem("imtehaan_needs_sync"))}async initializeFreshDay(t){const r=new Date().toISOString().split("T")[0],a=localStorage.getItem(`last_analytics_day_${t}`);if(a!==r){console.log(" New day detected, initializing fresh analytics..."),console.log(" Syncing yesterday's remaining data..."),await this.syncToSupabase();let n=0;try{const o=new Date;o.setDate(o.getDate()-1);const d=o.toISOString().split("T")[0],{data:m,error:u}=await ft(async()=>await F.from(yt.DAILY_ANALYTICS).select("total_time_spent, study_streak").eq("user_id",t).eq("date",d).single());if(!u&&m)m.total_time_spent>0?(n=(m.study_streak||0)+1,console.log(` Study streak continues! New streak: ${n} days`)):(n=0,console.log(" Study streak broken (no study time yesterday)"));else{const{data:x,error:p}=await ft(async()=>await F.from(yt.DAILY_ANALYTICS).select("date, total_time_spent, study_streak").eq("user_id",t).order("date",{ascending:!1}).limit(1).single());if(!p&&x&&x.total_time_spent>0){const g=new Date(x.date),y=Math.floor((new Date(r).getTime()-g.getTime())/(1e3*60*60*24));y===1?(n=(x.study_streak||0)+1,console.log(` Study streak continues! New streak: ${n} days`)):y>1&&(n=0,console.log(` Study streak broken (${y} days gap)`))}else n=0,console.log(" Starting fresh streak")}}catch(o){console.error(" Error calculating study streak:",o),n=0}const i=this.getAllTimeBuffers();Object.keys(i).forEach(o=>{o.startsWith(t)&&delete i[o]}),localStorage.setItem(this.TIME_BUFFER_KEY,JSON.stringify(i)),console.log(" Yesterday's buffers cleared");const l=`session_count_${t}_${a}`;localStorage.removeItem(l),console.log(" Yesterday's session count cleared");try{const{error:o}=await ft(()=>F.from(yt.DAILY_ANALYTICS).upsert({user_id:t,date:r,total_time_spent:0,session_count:0,average_session_length:0,total_activities:0,questions_attempted:0,questions_correct:0,study_streak:n,productivity_score:0,lessons_completed:0,video_lessons_completed:0,flashcards_reviewed:0,mock_exams_taken:0,ai_tutor_interactions:0,dashboard_visits:0,topic_selections:0},{onConflict:"date,user_id",ignoreDuplicates:!0}));o?console.log(" Could not initialize fresh DB record:",o):console.log(` Fresh database record ready for today (streak: ${n})`)}catch(o){console.log(" Error initializing fresh day in DB:",o)}localStorage.setItem(`last_analytics_day_${t}`,r),console.log(" Fresh day fully initialized")}else console.log(" Same day, no initialization needed")}getBufferStatus(){const t=this.getAllTimeBuffers(),r=this.getBuffer(),a=Object.values(t).reduce((n,i)=>n+i.seconds,0);return{timeBuffers:Object.keys(t).length,events:r.filter(n=>!n.synced).length,totalSeconds:a}}enforceStorageLimits(){try{const t=this.getBuffer(),r=this.getAllTimeBuffers();if(t.length>this.MAX_BUFFER_SIZE){console.warn(` Event buffer size (${t.length}) exceeded limit (${this.MAX_BUFFER_SIZE}). Forcing sync...`),this.syncToSupabase();return}const a=Object.keys(r).length;if(a>this.MAX_TIME_BUFFERS){console.warn(` Time buffer count (${a}) exceeded limit (${this.MAX_TIME_BUFFERS}). Forcing sync...`),this.syncToSupabase();return}try{const n=new Blob([JSON.stringify(t),JSON.stringify(r)]).size;if(n>this.MAX_STORAGE_SIZE){console.warn(` Storage size (${Math.round(n/1024)}KB) exceeded limit (${this.MAX_STORAGE_SIZE/1024}KB). Forcing sync...`),this.syncToSupabase();return}}catch(n){console.error(" Error checking storage size:",n)}t.length>this.MAX_BUFFER_SIZE*.8&&console.warn(` Event buffer at ${Math.round(t.length/this.MAX_BUFFER_SIZE*100)}% capacity`),a>this.MAX_TIME_BUFFERS*.8&&console.warn(` Time buffer at ${Math.round(a/this.MAX_TIME_BUFFERS*100)}% capacity`)}catch(t){console.error(" Error enforcing storage limits:",t)}}getStorageStats(){const t=this.getBuffer(),r=this.getAllTimeBuffers();let a=0;try{a=new Blob([JSON.stringify(t),JSON.stringify(r)]).size}catch(o){console.error("Error calculating size:",o)}const n=a/this.MAX_STORAGE_SIZE*100;let i;n<70?i="good":n<90?i="warning":i="critical";const l=a<1024?`${a}B`:a<1024*1024?`${Math.round(a/1024)}KB`:`${(a/(1024*1024)).toFixed(2)}MB`;return{bufferCount:t.length,timeBufferCount:Object.keys(r).length,totalSize:a,sizeFormatted:l,percentUsed:Math.round(n),health:i}}async forceSync(){console.log(" Force syncing analytics..."),await this.syncToSupabase()}clearAllBuffers(){localStorage.removeItem(this.BUFFER_KEY),localStorage.removeItem(this.TIME_BUFFER_KEY),localStorage.removeItem("imtehaan_needs_sync"),console.log(" All analytics buffers cleared")}}const Ut=ds.getInstance(),lu=Object.freeze(Object.defineProperty({__proto__:null,analyticsBufferService:Ut},Symbol.toStringTag,{value:"Module"}));class us{static instance;analyticsCache=new Map;cacheExpiry=new Map;CACHE_DURATION=30*1e3;constructor(){}static getInstance(){return us.instance||(us.instance=new us),us.instance}async getRealTimeAnalytics(t){try{const r=`realtime_${t}`,a=this.getCachedData(r);if(a)return a;const[n,i,l]=await Promise.all([this.getTodayProgress(t),this.getWeeklyProgress(t),this.getMonthlyProgress(t)]),o=await this.getCurrentStreak(t),d=this.calculateNextMilestone(n),m=await this.getFocusAreas(t),u=await this.getRecentAchievements(t),x={today:n,thisWeek:i,thisMonth:l,currentStreak:o,nextMilestone:d,focusAreas:m,achievements:u};return this.cacheData(r,x),x}catch(r){throw console.error(" Error getting real-time analytics:",r),r}}async calculateRealAccuracy(t,r,a){let n=0,i=0;try{const{data:l}=await F.from("mock_exam_attempts").select("score, total_marks").eq("user_id",t).gte("created_at",r).lte("created_at",a);l&&l.forEach(u=>{u.total_marks>0&&(n+=u.total_marks,i+=u.score||0)});const{data:o}=await F.from("learning_activities").select("accuracy, questions_attempted").eq("user_id",t).eq("activity_type","practice").gte("timestamp",r).lte("timestamp",a);o&&o.forEach(u=>{const x=u.questions_attempted||0,p=u.accuracy||0;n+=x,i+=Math.round(x*p/100)});const{data:d}=await F.from("learning_activities").select("accuracy, questions_attempted").eq("user_id",t).eq("activity_type","flashcard").gte("timestamp",r).lte("timestamp",a);d&&d.forEach(u=>{const x=u.questions_attempted||0,p=u.accuracy||0;n+=x,i+=Math.round(x*p/100)});const m=n>0?Math.round(i/n*100):0;return console.log(` Real Accuracy: ${i}/${n} = ${m}%`),{questionsAttempted:n,questionsCorrect:i,accuracy:m}}catch(l){return console.error(" Error calculating real accuracy:",l),{questionsAttempted:0,questionsCorrect:0,accuracy:0}}}async getTodayProgress(t){try{const r=new Date().toISOString().split("T")[0],a=new Date(r+"T00:00:00Z").toISOString(),n=new Date(r+"T23:59:59Z").toISOString(),{data:i,error:l}=await F.from("daily_analytics").select("*").eq("user_id",t).eq("date",r).single(),o=await this.calculateRealAccuracy(t,a,n);if(i&&!l){console.log(" Using daily analytics data for today:",i),console.log(" Raw database data - total_time_spent:",i.total_time_spent),console.log(" Calculated study_time_minutes:",Math.round((i.total_time_spent||0)/60));const m=this.mapDailyAnalyticsToProgress(i);return m.questionsAttempted=o.questionsAttempted,m.questionsCorrect=o.questionsCorrect,m.dailyAccuracy=o.accuracy,console.log(" Mapped data with real accuracy - dailyAccuracy:",m.dailyAccuracy),m}console.log(" No daily analytics data found, returning empty progress with real accuracy");const d=this.getEmptyDailyProgress(r);return d.questionsAttempted=o.questionsAttempted,d.questionsCorrect=o.questionsCorrect,d.dailyAccuracy=o.accuracy,d}catch(r){return console.error(" Error getting today progress:",r),this.getEmptyDailyProgress(new Date().toISOString().split("T")[0])}}async getWeeklyProgress(t){try{const r=new Date,a=new Date(r.getTime()-7*24*60*60*1e3),{data:n,error:i}=await F.from("daily_analytics").select("*").eq("user_id",t).gte("date",a.toISOString().split("T")[0]).lte("date",r.toISOString().split("T")[0]).order("date",{ascending:!0});if(i)throw i;if(n&&n.length>0)return this.calculateWeeklyProgressWithAccuracy(t,n);const l=await vt.getWeeklyAnalytics(t);return this.calculateWeeklyProgressWithAccuracy(t,l)}catch(r){return console.error(" Error getting weekly progress:",r),this.getEmptyWeeklyProgress()}}calculateWeeklyProgress(t){return this.getEmptyWeeklyProgress()}async getMonthlyProgress(t){try{const r=new Date,a=new Date(r.getTime()-30*24*60*60*1e3),{data:n,error:i}=await F.from("daily_analytics").select("*").eq("user_id",t).gte("date",a.toISOString().split("T")[0]).lte("date",r.toISOString().split("T")[0]).order("date",{ascending:!0});if(i)throw i;if(n&&n.length>0)return this.calculateMonthlyProgressWithAccuracy(t,n);const l=await vt.getMonthlyAnalytics(t);return this.calculateMonthlyProgressWithAccuracy(t,l)}catch(r){return console.error(" Error getting monthly progress:",r),this.getEmptyMonthlyProgress()}}async getCurrentStreak(t){try{const{data:r,error:a}=await F.rpc("get_user_daily_progress",{user_uuid:t}).limit(30);if(a)throw a;if(r&&r.length>0)return this.calculateCurrentStreak(r);const n=await vt.getMonthlyAnalytics(t);return vt.calculateStudyStreak(n).currentStreak}catch(r){return console.error(" Error getting current streak:",r),0}}async getFocusAreas(t){try{const{data:r,error:a}=await F.from("daily_analytics").select("weak_areas").eq("user_id",t).gte("date",new Date(Date.now()-6048e5).toISOString().split("T")[0]).order("date",{ascending:!1}).limit(7);if(a)throw a;if(r&&r.length>0){const n=r.flatMap(i=>i.weak_areas||[]);return[...new Set(n)].slice(0,5)}return["Start studying to identify weak areas"]}catch(r){return console.error(" Error getting focus areas:",r),["Start studying to identify weak areas"]}}async getRecentAchievements(t){try{const r=new Date().toISOString().split("T")[0],a=new Date(r+"T00:00:00Z").toISOString(),n=new Date(r+"T23:59:59Z").toISOString(),{data:i,error:l}=await F.from("daily_analytics").select("*").eq("user_id",t).eq("date",r).single(),o=await this.calculateRealAccuracy(t,a,n);if(l||!i)return[" Complete your first activity to earn achievements"];const d=[],m=Math.round((i.total_time_spent||0)/60);return m>=120?d.push(" Ultra Studious: 2+ hours of focused study today!"):m>=90?d.push(" Power Learner: 90+ minutes of study today!"):m>=60?d.push(" Daily Goal: Completed your 60-minute target!"):m>=30&&d.push(" Half Way There: 30+ minutes completed!"),o.questionsAttempted>=5&&(o.accuracy>=95?d.push(" Perfect Score: 95%+ accuracy achieved!"):o.accuracy>=90?d.push(" Excellence: 90%+ accuracy on real tests!"):o.accuracy>=85?d.push(" High Achiever: 85%+ accuracy!"):o.accuracy>=75&&d.push(" On Track: 75%+ accuracy maintained!")),o.questionsAttempted>=50?d.push(" Question Pro: 50+ questions attempted today!"):o.questionsAttempted>=25?d.push(" Practice Warrior: 25+ questions attempted!"):o.questionsAttempted>=10&&d.push(" Question Master: 10+ questions attempted!"),i.lessons_completed>=5?d.push(" Knowledge Seeker: 5+ lessons completed!"):i.lessons_completed>=3&&d.push(" Lesson Learner: 3+ lessons completed!"),i.flashcards_reviewed>=30?d.push(" Memory Master: 30+ flashcards reviewed!"):i.flashcards_reviewed>=15&&d.push(" Flashcard Pro: 15+ flashcards reviewed!"),i.mock_exams_taken>=2?d.push(" Exam Ready: 2+ mock exams completed!"):i.mock_exams_taken>=1&&d.push(" Test Taker: Mock exam completed!"),i.session_count>=5?d.push(" Super Focused: 5+ study sessions today!"):i.session_count>=3&&d.push(" Multi-Session: 3+ study sessions!"),i.study_streak>=30?d.push(" Legendary: 30-day study streak!"):i.study_streak>=14?d.push(" Unstoppable: 2-week study streak!"):i.study_streak>=7?d.push(" Streak Master: 7-day study streak!"):i.study_streak>=3&&d.push(" Building Momentum: 3-day streak!"),i.productivity_score>=90?d.push(" Peak Performance: 90+ productivity score!"):i.productivity_score>=80&&d.push(" Productivity Pro: 80+ productivity!"),i.ai_tutor_interactions>=20?d.push(" Curious Mind: 20+ AI tutor interactions!"):i.ai_tutor_interactions>=10&&d.push(" Active Learner: 10+ AI tutor questions!"),d.length>0?d:[" Keep studying to earn achievements!"]}catch(r){return console.error(" Error getting achievements:",r),[" Complete your first activity to earn achievements"]}}async trackPlatformActivity(t,r,a=0,n="General",i="General",l={}){try{console.log(` Platform activity tracked: ${r} for user ${t}`),this.clearUserCache(t)}catch(o){console.error(" Error tracking platform activity:",o)}}async addStudyTime(t,r,a="general"){try{if(!t||r<=0){console.warn(" Invalid parameters for addStudyTime");return}console.log(` Buffering ${r} seconds of study time for user ${t} on ${a}`),Ut.bufferTimeTracking(t,a,r),console.log(` Buffered ${r}s - will sync automatically`),this.clearUserCache(t)}catch(n){throw console.error(" Error adding study time:",n),n}}async addStudyTimeDirectly(t,r){try{const a=new Date().toISOString().split("T")[0];console.log(` LEGACY: Adding ${r} seconds directly to database`);const{data:n,error:i}=await F.from("daily_analytics").select("*").eq("user_id",t).eq("date",a).single();if(i&&i.code!=="PGRST116")throw i;let l=n||{date:a,user_id:t,total_activities:0,total_time_spent:0,questions_attempted:0,questions_correct:0,flashcards_reviewed:0,flashcards_correct:0,lessons_started:0,lessons_completed:0,video_lessons_watched:0,video_lessons_completed:0,mock_exams_taken:0,average_mock_exam_score:0,practice_sessions_completed:0,average_practice_score:0,ai_tutor_interactions:0,dashboard_visits:0,topic_selections:0,settings_changes:0,profile_updates:0,total_topics_studied:0,study_streak:0,productivity_score:0,focus_time:0,break_time:0,session_count:0,average_session_length:0,peak_study_hour:0,weak_areas:[],strong_areas:[],recommendations:[]};l.total_time_spent+=r,l.total_activities+=1,l.productivity_score=this.calculateProductivityScore(l);const{error:o}=await F.from("daily_analytics").upsert(l,{onConflict:"date,user_id"});if(o)throw o;this.clearUserCache(t),console.log(` LEGACY: Added ${r} seconds directly. Total: ${l.total_time_spent} seconds`)}catch(a){throw console.error(" Error in legacy addStudyTime:",a),a}}calculateProductivityScore(t){let r=0;if(r+=t.total_activities*2,t.total_time_spent>0){const a=t.total_activities/(t.total_time_spent/60);r+=a*10}if(t.questions_attempted>0){const a=t.questions_correct/t.questions_attempted*100;r+=a*.5}return r+=t.lessons_completed*5,r+=t.ai_tutor_interactions*2,Math.min(Math.round(r),100)}async getStudyInsights(t){try{const r=await this.getRealTimeAnalytics(t),a=[],n=[];if(r.today.studyTimeMinutes===0?(a.push(" Start your learning journey today!"),n.push("Begin with a 15-minute study session")):r.today.studyTimeMinutes<30?(a.push(` Good start! You've studied for ${r.today.studyTimeMinutes} minutes today`),n.push("Try to reach your 60-minute daily goal")):r.today.studyTimeMinutes>=60?(a.push(` Excellent! You've achieved your daily goal (${r.today.studyTimeMinutes} minutes)`),n.push("Consider challenging yourself with mock exams")):(a.push(` ${r.today.studyTimeMinutes} minutes completed - ${60-r.today.studyTimeMinutes} minutes to goal`),n.push("Keep up the momentum!")),r.today.questionsAttempted>0?r.today.dailyAccuracy<60?(a.push(` Accuracy at ${r.today.dailyAccuracy}% - needs improvement`),n.push("Review fundamentals and practice more questions"),n.push("Focus on understanding concepts, not memorizing")):r.today.dailyAccuracy<75?(a.push(` Accuracy at ${r.today.dailyAccuracy}% - making progress`),n.push("Keep practicing to reach 85%+ target")):r.today.dailyAccuracy<90?(a.push(` Good accuracy at ${r.today.dailyAccuracy}%`),n.push("You're on track! Try harder practice questions")):(a.push(` Outstanding ${r.today.dailyAccuracy}% accuracy!`),n.push("Challenge yourself with advanced mock exams")):n.push("Answer practice questions to track your accuracy"),r.today.sessionCount===0?n.push("Start your first study session today"):r.today.sessionCount===1?(a.push(" 1 study session completed today"),n.push("Try multiple shorter sessions for better retention")):r.today.sessionCount>=3&&(a.push(` Great! ${r.today.sessionCount} study sessions today`),n.push("Spaced repetition is helping you learn better")),r.currentStreak===0?(a.push(" Start building your study streak"),n.push("Study at least 15 minutes daily to build consistency")):r.currentStreak<3?(a.push(` ${r.currentStreak}-day streak - keep it going!`),n.push("Study tomorrow to extend your streak")):r.currentStreak>=7?(a.push(` Amazing ${r.currentStreak}-day streak!`),n.push("You're building excellent study habits")):(a.push(` ${r.currentStreak}-day streak building`),n.push("Aim for a 7-day streak milestone")),r.thisMonth.examReadiness){const i=r.thisMonth.examReadiness;i.percentReady<50?(a.push(` Exam readiness: ${i.percentReady}% - increase study time`),n.push(`Study ${i.recommendedDailyTime} minutes daily to be ready in ${i.daysNeeded} days`)):i.percentReady<80?(a.push(` Exam readiness: ${i.percentReady}% - good progress`),n.push(`${i.daysNeeded} more days of focused study needed`)):(a.push(` Exam ready at ${i.percentReady}%!`),n.push("Focus on revision and mock exam practice"))}return{insights:a.slice(0,5),recommendations:n.slice(0,5),nextMilestone:r.nextMilestone}}catch(r){return console.error(" Error getting study insights:",r),{insights:["Start studying to get personalized insights"],recommendations:["Complete your first activity"],nextMilestone:"First activity completion"}}}mapDailyAnalyticsToProgress(t){console.log(" Mapping daily analytics data:",t);const r=Math.round((t.total_time_spent||0)/60),a=t.questions_attempted||0,n=t.questions_correct||0,i=a>0?Math.round(n/a*100):0;return console.log(" Calculated studyTimeMinutes:",r),console.log(" Calculated accuracy:",`${n}/${a} = ${i}%`),{date:t.date,totalActivities:t.total_activities||0,totalTimeSpent:t.total_time_spent||0,questionsAttempted:t.questions_attempted||0,questionsCorrect:t.questions_correct||0,dailyAccuracy:i,studyStreak:t.study_streak||0,productivityScore:t.productivity_score||0,studyTimeMinutes:r,sessionCount:t.session_count||0,avgSessionMinutes:t.average_session_length?Math.round(t.average_session_length/60):0,lessonsCompleted:t.lessons_completed||0,videoLessonsCompleted:t.video_lessons_completed||0,flashcardsReviewed:t.flashcards_reviewed||0,mockExamsTaken:t.mock_exams_taken||0,aiTutorInteractions:t.ai_tutor_interactions||0,dashboardVisits:t.dashboard_visits||0,topicSelections:t.topic_selections||0}}async calculateWeeklyProgressWithAccuracy(t,r){if(!r||r.length===0)return{weekStart:"",weekEnd:"",totalActivities:0,totalTimeSpent:0,averageDailyAccuracy:0,studyStreak:0,mostProductiveDay:"",topicsStudied:[],weakAreas:[],strongAreas:[],recommendations:[]};const a=new Date,i=new Date(a.getTime()-7*24*60*60*1e3).toISOString(),l=a.toISOString(),o=await this.calculateRealAccuracy(t,i,l),d=r.reduce((y,f)=>y+(f.total_activities||0),0),m=r.reduce((y,f)=>y+(f.total_time_spent||0),0),u=o.accuracy,x=r.reduce((y,f)=>(f.total_activities||0)>(y.total_activities||0)?f:y),p=new Set;r.forEach(y=>{y.weak_areas&&y.weak_areas.forEach(f=>p.add(f)),y.strong_areas&&y.strong_areas.forEach(f=>p.add(f))});const g=[];return u<70&&g.push("Focus on improving accuracy in practice questions"),d<10&&g.push("Try to complete more activities daily"),r.length<3&&g.push("Maintain consistent daily study habits"),{weekStart:r[0]?.date||"",weekEnd:r[r.length-1]?.date||"",totalActivities:d,totalTimeSpent:m,averageDailyAccuracy:u,studyStreak:r[r.length-1]?.study_streak||0,mostProductiveDay:this.formatDate(x?.date)||"No data",topicsStudied:Array.from(p),weakAreas:[...new Set(r.flatMap(y=>y.weak_areas||[]))].slice(0,3),strongAreas:[...new Set(r.flatMap(y=>y.strong_areas||[]))].slice(0,3),recommendations:g.length>0?g:["Keep up the great work!"]}}formatDate(t){if(!t)return"";try{return new Date(t).toLocaleDateString("en-US",{weekday:"long"})}catch{return t}}async calculateMonthlyProgressWithAccuracy(t,r){if(!r||r.length===0)return{month:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),totalActivities:0,totalTimeSpent:0,averageDailyAccuracy:0,longestStreak:0,totalTopicsStudied:0,improvementRate:0,studyPatterns:{preferredStudyTime:"Morning",averageSessionLength:0,peakStudyDays:[]},timeOfDayAnalysis:{morningMinutes:0,afternoonMinutes:0,eveningMinutes:0,nightMinutes:0,mostProductiveTime:"Morning (6am-12pm)"},examReadiness:{percentReady:0,daysNeeded:20,recommendedDailyTime:90,onTrack:!1}};const a=new Date,i=new Date(a.getTime()-30*24*60*60*1e3).toISOString(),l=a.toISOString(),o=await this.calculateRealAccuracy(t,i,l),d=r.reduce((w,h)=>w+(h.total_activities||0),0),m=r.reduce((w,h)=>w+(h.total_time_spent||0),0),u=o.accuracy,x=Math.max(...r.map(w=>w.study_streak||0)),p=r.reduce((w,h)=>w+(h.total_topics_studied||0),0),g=r.slice(0,7),y=r.slice(-7),f=g.reduce((w,h)=>w+(h.questions_attempted||0),0)/7,v=y.reduce((w,h)=>w+(h.questions_attempted||0),0)/7,b=f>0?Math.round((v-f)/f*100):0;return{month:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),totalActivities:d,totalTimeSpent:m,averageDailyAccuracy:u,longestStreak:x,totalTopicsStudied:p,improvementRate:b,studyPatterns:{preferredStudyTime:"Morning",averageSessionLength:Math.round(m/Math.max(r.length,1)),peakStudyDays:["Monday","Wednesday","Friday"]},timeOfDayAnalysis:{morningMinutes:Math.round(m*.4/60),afternoonMinutes:Math.round(m*.3/60),eveningMinutes:Math.round(m*.25/60),nightMinutes:Math.round(m*.05/60),mostProductiveTime:"Morning (6am-12pm)"},examReadiness:{percentReady:Math.min(Math.round(d/50*100),100),daysNeeded:Math.max(0,Math.ceil((100-Math.min(d/50*100,100))/5)),recommendedDailyTime:d>=40?30:90,onTrack:d>=35}}}calculateCurrentStreak(t){if(!t||t.length===0)return 0;const r=t.sort((i,l)=>new Date(l.date).getTime()-new Date(i.date).getTime());let a=0;const n=new Date().toISOString().split("T")[0];for(let i=0;i<r.length;i++){const l=new Date(r[i].date),o=new Date(n);if(o.setDate(o.getDate()-i),l.toISOString().split("T")[0]===o.toISOString().split("T")[0])if(r[i].total_activities>0)a++;else break;else break}return a}calculateNextMilestone(t){return t.studyTimeMinutes===0?" Start studying today - aim for 15 minutes":t.studyTimeMinutes<15?" Reach 15 minutes of study time today":t.studyTimeMinutes<30?" Study for 30 minutes today":t.studyTimeMinutes<60?" Complete your 60-minute daily goal":t.questionsAttempted>0&&t.dailyAccuracy<70?" Improve accuracy to 70% through practice":t.questionsAttempted>0&&t.dailyAccuracy<85?" Reach 85% accuracy in practice questions":t.questionsAttempted>0&&t.dailyAccuracy<95?" Achieve 95% accuracy - excellence target":t.totalActivities<5?" Complete 5 activities today":t.totalActivities<10?" Complete 10 activities for the day":t.mockExamsTaken===0?" Take your first mock exam":t.studyStreak<3?" Build a 3-day study streak":t.studyStreak<7?" Achieve a 7-day study streak":t.studyStreak<14?" Reach a 2-week study streak":t.studyStreak<30?" Build a 30-day mastery streak":t.studyTimeMinutes<120?" Study for 2 hours today - go extra!":" Maintain your excellent progress and consistency"}getEmptyDailyProgress(t){return{date:t,totalActivities:0,totalTimeSpent:0,questionsAttempted:0,questionsCorrect:0,dailyAccuracy:0,studyStreak:0,productivityScore:0,studyTimeMinutes:0,sessionCount:0,avgSessionMinutes:0,lessonsCompleted:0,videoLessonsCompleted:0,flashcardsReviewed:0,mockExamsTaken:0,aiTutorInteractions:0,dashboardVisits:0,topicSelections:0}}getEmptyWeeklyProgress(){return{weekStart:"",weekEnd:"",totalActivities:0,totalTimeSpent:0,averageDailyAccuracy:0,studyStreak:0,mostProductiveDay:"",topicsStudied:[],weakAreas:[],strongAreas:[],recommendations:[]}}getEmptyMonthlyProgress(){return{month:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),totalActivities:0,totalTimeSpent:0,averageDailyAccuracy:0,longestStreak:0,totalTopicsStudied:0,improvementRate:0,studyPatterns:{preferredStudyTime:"Morning",averageSessionLength:0,peakStudyDays:[]},timeOfDayAnalysis:{morningMinutes:0,afternoonMinutes:0,eveningMinutes:0,nightMinutes:0,mostProductiveTime:"Morning (6am-12pm)"},examReadiness:{percentReady:0,daysNeeded:20,recommendedDailyTime:90,onTrack:!1}}}getCachedData(t){const r=this.analyticsCache.get(t),a=this.cacheExpiry.get(t);return r&&a&&Date.now()<a?r:null}cacheData(t,r){this.analyticsCache.set(t,r),this.cacheExpiry.set(t,Date.now()+this.CACHE_DURATION)}clearUserCache(t){Array.from(this.analyticsCache.keys()).filter(a=>a.includes(t)).forEach(a=>{this.analyticsCache.delete(a),this.cacheExpiry.delete(a)})}async forceRefreshAnalytics(t){return this.clearUserCache(t),this.getRealTimeAnalyticsNoCache(t)}async manualResetDailyAnalytics(t){try{if(console.warn(" MANUAL RESET: This should only be used for admin/testing purposes"),!t||t.trim()==="")throw new Error("Invalid userId");const r=new Date().toISOString().split("T")[0],a=Ut.getAllTimeBuffers();Object.keys(a).forEach(n=>{n.startsWith(t)&&delete a[n]}),localStorage.setItem("imtehaan_time_buffer",JSON.stringify(a)),console.log(" Cleared localStorage buffers"),await F.from("daily_analytics").delete().eq("user_id",t).eq("date",r),this.clearUserCache(t),console.log(" Manual reset completed")}catch(r){throw console.error(" Error in manual reset:",r),r}}async resetAndGetFreshAnalytics(t){try{console.log(" Fetching fresh analytics (no reset)...");const r=await this.getRealTimeAnalyticsNoCache(t);return console.log(" Fresh analytics fetched"),console.log(" Fresh analytics study time:",r.today.studyTimeMinutes),r}catch(r){throw console.error(" Error fetching fresh analytics:",r),r}}async getRealTimeAnalyticsWithSessions(t){try{this.clearUserCache(t);const r=await this.getRealTimeAnalyticsNoCache(t),{data:a}=await F.from("page_sessions").select("*").eq("user_id",t).gte("start_time",new Date(Date.now()-24*60*60*1e3).toISOString()).order("start_time",{ascending:!1}).limit(10);return a&&a.length>0&&console.log(` Found ${a.length} recent page sessions for user ${t}`),r}catch(r){throw console.error(" Error getting real-time analytics with sessions:",r),r}}async getRealTimeAnalyticsNoCache(t){try{console.log(" Getting fresh analytics without cache for user:",t);const[r,a,n]=await Promise.all([this.getTodayProgress(t),this.getWeeklyProgress(t),this.getMonthlyProgress(t)]),i=await this.getCurrentStreak(t),l=this.calculateNextMilestone(r),o=await this.getFocusAreas(t),d=await this.getRecentAchievements(t),m={today:r,thisWeek:a,thisMonth:n,currentStreak:i,nextMilestone:l,focusAreas:o,achievements:d};return console.log(" Fresh analytics data:",m),m}catch(r){throw console.error(" Error getting real-time analytics without cache:",r),r}}}const De=us.getInstance();class ms{static instance;isTracking=!1;currentUserId=null;activityBuffer=[];flushInterval=null;FLUSH_INTERVAL=3e4;MAX_BUFFER_SIZE=50;constructor(){this.initializeTracking()}static getInstance(){return ms.instance||(ms.instance=new ms),ms.instance}initializeTracking(){this.checkAuthStatus(),setInterval(()=>{this.checkAuthStatus()},6e4),this.flushInterval=setInterval(()=>{this.flushActivities()},this.FLUSH_INTERVAL),console.log(" Auto Activity Tracker initialized")}async checkAuthStatus(){try{const{data:{user:t}}=await F.auth.getUser();t&&t.id!==this.currentUserId?(this.currentUserId=t.id,this.isTracking=!0,console.log(" Auto tracking started for user:",t.id)):!t&&this.isTracking&&(this.currentUserId=null,this.isTracking=!1,console.log(" Auto tracking stopped - user logged out"))}catch(t){console.error(" Error checking auth status:",t)}}trackActivity(t){if(!this.isTracking||!this.currentUserId)return;const r={...t,timestamp:new Date().toISOString(),userId:this.currentUserId};this.activityBuffer.push(r),this.activityBuffer.length>=this.MAX_BUFFER_SIZE&&this.flushActivities(),console.log(" Activity tracked:",t.activityType,t.pageTitle)}trackPageView(t,r){this.trackActivity({activityType:"page_view",pageUrl:r,pageTitle:t,metadata:{referrer:document.referrer,userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight}}})}trackButtonClick(t,r,a,n){this.trackActivity({activityType:"button_click",elementId:t,elementType:r,pageUrl:n,pageTitle:a,metadata:{clickTime:new Date().toISOString()}})}trackTimeSpent(t,r,a){this.trackActivity({activityType:"time_spent",pageUrl:r,pageTitle:t,duration:a,metadata:{sessionStart:new Date(Date.now()-a).toISOString()}})}trackAIInteraction(t,r,a,n){this.trackActivity({activityType:"ai_interaction",pageUrl:n,pageTitle:a,metadata:{query:t.substring(0,100),responseLength:r,interactionType:"chat"}})}trackLessonStart(t,r,a,n){this.trackActivity({activityType:"lesson_start",pageUrl:n,pageTitle:a,metadata:{lessonId:t,lessonTitle:r,startTime:new Date().toISOString()}})}trackLessonComplete(t,r,a,n,i){this.trackActivity({activityType:"lesson_complete",pageUrl:i,pageTitle:n,duration:a,metadata:{lessonId:t,lessonTitle:r,completionTime:new Date().toISOString()}})}trackQuestionAttempt(t,r,a,n,i){this.trackActivity({activityType:"question_attempt",pageUrl:i,pageTitle:n,duration:a,metadata:{questionId:t,isCorrect:r,attemptTime:new Date().toISOString()}})}trackFlashcardReview(t,r,a,n,i){this.trackActivity({activityType:"flashcard_review",pageUrl:i,pageTitle:n,duration:a,metadata:{flashcardId:t,isCorrect:r,reviewTime:new Date().toISOString()}})}async flushActivities(){if(!(this.activityBuffer.length===0||!this.currentUserId))try{const t=[...this.activityBuffer];this.activityBuffer=[],await this.processActivities(t),console.log(` Flushed ${t.length} activities to database`)}catch(t){console.error(" Error flushing activities:",t),this.activityBuffer.unshift(...this.activityBuffer)}}async processActivities(t){try{const r=new Date().toISOString().split("T")[0],{data:a,error:n}=await F.from("daily_analytics").select("*").eq("user_id",this.currentUserId).eq("date",r).single();if(n&&n.code!=="PGRST116")throw n;let i=a||{date:r,user_id:this.currentUserId,total_activities:0,total_time_spent:0,questions_attempted:0,questions_correct:0,flashcards_reviewed:0,flashcards_correct:0,lessons_started:0,lessons_completed:0,video_lessons_watched:0,video_lessons_completed:0,mock_exams_taken:0,average_mock_exam_score:0,practice_sessions_completed:0,average_practice_score:0,ai_tutor_interactions:0,dashboard_visits:0,topic_selections:0,settings_changes:0,profile_updates:0,total_topics_studied:0,study_streak:0,productivity_score:0,focus_time:0,break_time:0,session_count:0,average_session_length:0,peak_study_hour:0,weak_areas:[],strong_areas:[],recommendations:[]};for(const o of t){if(i.total_activities++,o.duration){const d=Math.round(o.duration/1e3);i.total_time_spent+=d,console.log(` Adding ${d} seconds to total_time_spent (from ${o.duration}ms)`)}switch(o.activityType){case"page_view":o.pageUrl.includes("dashboard")&&i.dashboard_visits++,(o.pageUrl.includes("dashboard")||o.pageUrl.includes("analytics")||o.pageUrl.includes("practice"))&&(i.session_count++,console.log(" Session count incremented for significant page view"));break;case"ai_interaction":i.ai_tutor_interactions++;break;case"lesson_start":i.lessons_started++,i.session_count++,console.log(" Session count incremented for lesson start");break;case"lesson_complete":i.lessons_completed++;break;case"question_attempt":i.questions_attempted++,o.metadata?.isCorrect&&i.questions_correct++;break;case"flashcard_review":i.flashcards_reviewed++,o.metadata?.isCorrect&&i.flashcards_correct++;break;case"focus":o.metadata?.focusTime&&(i.session_count++,console.log(" Session count incremented for focus event"));break}}i.session_count>0&&i.total_time_spent>0&&(i.average_session_length=Math.round(i.total_time_spent/i.session_count),console.log(` Calculated average session length: ${i.average_session_length} seconds`)),i.productivity_score=this.calculateProductivityScore(i);const{error:l}=await F.from("daily_analytics").upsert(i,{onConflict:"date,user_id"});if(l)throw l;De.clearUserCache(this.currentUserId)}catch(r){throw console.error(" Error processing activities:",r),r}}calculateProductivityScore(t){let r=0;if(r+=t.total_activities*2,t.questions_attempted>0){const a=t.questions_correct/t.questions_attempted*100;r+=a*.5}if(t.total_time_spent>0){const a=t.total_activities/(t.total_time_spent/60);r+=a*10}return r+=t.lessons_completed*5,r+=t.ai_tutor_interactions*2,Math.min(Math.round(r),100)}async forceFlush(){await this.flushActivities()}getBufferSize(){return this.activityBuffer.length}stopTracking(){this.isTracking=!1,this.flushInterval&&(clearInterval(this.flushInterval),this.flushInterval=null),console.log(" Auto tracking stopped")}}const Ze=ms.getInstance(),Gs=s=>{const{pageTitle:t,pageUrl:r,trackClicks:a=!0,trackTime:n=!0,trackScroll:i=!1,trackFocus:l=!1}=s,o=c.useRef(Date.now()),d=c.useRef(Date.now()),m=c.useRef(null);c.useEffect(()=>{Ze.trackPageView(t,r),o.current=Date.now(),d.current=Date.now()},[t,r]),c.useEffect(()=>{if(!n)return;const v=()=>{const b=Date.now()-o.current;b>5e3&&(console.log(` Tracking time spent: ${b}ms on ${t}`),Ze.trackTimeSpent(t,r,b))};return()=>{v()}},[t,r,n]),c.useEffect(()=>{if(!a)return;const v=b=>{const w=b.target;if(!w)return;const h=w.id||w.className||w.tagName,T=w.tagName.toLowerCase();(w.tagName==="BUTTON"||w.classList.contains("btn")||w.classList.contains("button"))&&Ze.trackButtonClick(h,T,t,r),w.tagName==="A"&&Ze.trackButtonClick(h,T,t,r),(w.tagName==="FORM"||w.type==="submit")&&Ze.trackActivity({activityType:"form_submit",elementId:h,elementType:T,pageUrl:r,pageTitle:t,metadata:{formId:w.id||w.className}}),d.current=Date.now()};return document.addEventListener("click",v),()=>document.removeEventListener("click",v)},[t,r,a]),c.useEffect(()=>{if(!i)return;const v=()=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{Ze.trackActivity({activityType:"scroll",pageUrl:r,pageTitle:t,metadata:{scrollY:window.scrollY,scrollPercent:Math.round(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100)}})},1e3)};return window.addEventListener("scroll",v),()=>{window.removeEventListener("scroll",v),m.current&&clearTimeout(m.current)}},[t,r,i]),c.useEffect(()=>{if(!l)return;const v=()=>{Ze.trackActivity({activityType:"focus",pageUrl:r,pageTitle:t,metadata:{focusTime:new Date().toISOString()}})},b=()=>{Ze.trackActivity({activityType:"blur",pageUrl:r,pageTitle:t,metadata:{blurTime:new Date().toISOString(),timeSpent:Date.now()-d.current}})};return window.addEventListener("focus",v),window.addEventListener("blur",b),()=>{window.removeEventListener("focus",v),window.removeEventListener("blur",b)}},[t,r,l]);const u=c.useCallback((v,b)=>{Ze.trackAIInteraction(v,b,t,r)},[t,r]),x=c.useCallback((v,b)=>{Ze.trackLessonStart(v,b,t,r)},[t,r]),p=c.useCallback((v,b,w)=>{Ze.trackLessonComplete(v,b,w,t,r)},[t,r]),g=c.useCallback((v,b,w)=>{Ze.trackQuestionAttempt(v,b,w,t,r)},[t,r]),y=c.useCallback((v,b,w)=>{Ze.trackFlashcardReview(v,b,w,t,r)},[t,r]),f=c.useCallback(async()=>{await Ze.forceFlush()},[]);return{trackAIInteraction:u,trackLessonStart:x,trackLessonComplete:p,trackQuestionAttempt:g,trackFlashcardReview:y,forceFlush:f,getBufferSize:()=>Ze.getBufferSize()}};function ke(s,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(s?.(n),r===!1||!n.defaultPrevented)return t?.(n)}}function un(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function Dr(...s){return t=>{let r=!1;const a=s.map(n=>{const i=un(n,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let n=0;n<a.length;n++){const i=a[n];typeof i=="function"?i():un(s[n],null)}}}}function it(...s){return c.useCallback(Dr(...s),s)}function Hs(s,t=[]){let r=[];function a(i,l){const o=c.createContext(l),d=r.length;r=[...r,l];const m=x=>{const{scope:p,children:g,...y}=x,f=p?.[s]?.[d]||o,v=c.useMemo(()=>y,Object.values(y));return e.jsx(f.Provider,{value:v,children:g})};m.displayName=i+"Provider";function u(x,p){const g=p?.[s]?.[d]||o,y=c.useContext(g);if(y)return y;if(l!==void 0)return l;throw new Error(`\`${x}\` must be used within \`${i}\``)}return[m,u]}const n=()=>{const i=r.map(l=>c.createContext(l));return function(o){const d=o?.[s]||i;return c.useMemo(()=>({[`__scope${s}`]:{...o,[s]:d}}),[o,d])}};return n.scopeName=s,[a,cu(n,...t)]}function cu(...s){const t=s[0];if(s.length===1)return t;const r=()=>{const a=s.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const l=a.reduce((o,{useScope:d,scopeName:m})=>{const x=d(i)[`__scope${m}`];return{...o,...x}},{});return c.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}var Gt=globalThis?.document?c.useLayoutEffect:()=>{},du=Un[" useInsertionEffect ".trim().toString()]||Gt;function mi({prop:s,defaultProp:t,onChange:r=()=>{},caller:a}){const[n,i,l]=uu({defaultProp:t,onChange:r}),o=s!==void 0,d=o?s:n;{const u=c.useRef(s!==void 0);c.useEffect(()=>{const x=u.current;x!==o&&console.warn(`${a} is changing from ${x?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,a])}const m=c.useCallback(u=>{if(o){const x=mu(u)?u(s):u;x!==s&&l.current?.(x)}else i(u)},[o,s,i,l]);return[d,m]}function uu({defaultProp:s,onChange:t}){const[r,a]=c.useState(s),n=c.useRef(r),i=c.useRef(t);return du(()=>{i.current=t},[t]),c.useEffect(()=>{n.current!==r&&(i.current?.(r),n.current=r)},[r,n]),[r,a,i]}function mu(s){return typeof s=="function"}function Nr(s){const t=hu(s),r=c.forwardRef((a,n)=>{const{children:i,...l}=a,o=c.Children.toArray(i),d=o.find(gu);if(d){const m=d.props.children,u=o.map(x=>x===d?c.Children.count(m)>1?c.Children.only(null):c.isValidElement(m)?m.props.children:null:x);return e.jsx(t,{...l,ref:n,children:c.isValidElement(m)?c.cloneElement(m,void 0,u):null})}return e.jsx(t,{...l,ref:n,children:i})});return r.displayName=`${s}.Slot`,r}function hu(s){const t=c.forwardRef((r,a)=>{const{children:n,...i}=r;if(c.isValidElement(n)){const l=fu(n),o=pu(i,n.props);return n.type!==c.Fragment&&(o.ref=a?Dr(a,l):l),c.cloneElement(n,o)}return c.Children.count(n)>1?c.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var xu=Symbol("radix.slottable");function gu(s){return c.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===xu}function pu(s,t){const r={...t};for(const a in t){const n=s[a],i=t[a];/^on[A-Z]/.test(a)?n&&i?r[a]=(...o)=>{const d=i(...o);return n(...o),d}:n&&(r[a]=n):a==="style"?r[a]={...n,...i}:a==="className"&&(r[a]=[n,i].filter(Boolean).join(" "))}return{...s,...r}}function fu(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}var yu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xe=yu.reduce((s,t)=>{const r=Nr(`Primitive.${t}`),a=c.forwardRef((n,i)=>{const{asChild:l,...o}=n,d=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...o,ref:i})});return a.displayName=`Primitive.${t}`,{...s,[t]:a}},{});function hi(s,t){s&&_a.flushSync(()=>s.dispatchEvent(t))}function xi(s){const t=s+"CollectionProvider",[r,a]=Hs(t),[n,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),l=f=>{const{scope:v,children:b}=f,w=He.useRef(null),h=He.useRef(new Map).current;return e.jsx(n,{scope:v,itemMap:h,collectionRef:w,children:b})};l.displayName=t;const o=s+"CollectionSlot",d=Nr(o),m=He.forwardRef((f,v)=>{const{scope:b,children:w}=f,h=i(o,b),T=it(v,h.collectionRef);return e.jsx(d,{ref:T,children:w})});m.displayName=o;const u=s+"CollectionItemSlot",x="data-radix-collection-item",p=Nr(u),g=He.forwardRef((f,v)=>{const{scope:b,children:w,...h}=f,T=He.useRef(null),E=it(v,T),R=i(u,b);return He.useEffect(()=>(R.itemMap.set(T,{ref:T,...h}),()=>void R.itemMap.delete(T))),e.jsx(p,{[x]:"",ref:E,children:w})});g.displayName=u;function y(f){const v=i(s+"CollectionConsumer",f);return He.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const h=Array.from(w.querySelectorAll(`[${x}]`));return Array.from(v.itemMap.values()).sort((R,P)=>h.indexOf(R.ref.current)-h.indexOf(P.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:l,Slot:m,ItemSlot:g},y,a]}var bu=c.createContext(void 0);function gi(s){const t=c.useContext(bu);return s||t||"ltr"}function Mt(s){const t=c.useRef(s);return c.useEffect(()=>{t.current=s}),c.useMemo(()=>(...r)=>t.current?.(...r),[])}function vu(s,t=globalThis?.document){const r=Mt(s);c.useEffect(()=>{const a=n=>{n.key==="Escape"&&r(n)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[r,t])}var ju="DismissableLayer",fa="dismissableLayer.update",wu="dismissableLayer.pointerDownOutside",Nu="dismissableLayer.focusOutside",mn,pi=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fi=c.forwardRef((s,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...d}=s,m=c.useContext(pi),[u,x]=c.useState(null),p=u?.ownerDocument??globalThis?.document,[,g]=c.useState({}),y=it(t,P=>x(P)),f=Array.from(m.layers),[v]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),b=f.indexOf(v),w=u?f.indexOf(u):-1,h=m.layersWithOutsidePointerEventsDisabled.size>0,T=w>=b,E=_u(P=>{const k=P.target,G=[...m.branches].some(Q=>Q.contains(k));!T||G||(n?.(P),l?.(P),P.defaultPrevented||o?.())},p),R=Cu(P=>{const k=P.target;[...m.branches].some(Q=>Q.contains(k))||(i?.(P),l?.(P),P.defaultPrevented||o?.())},p);return vu(P=>{w===m.layers.size-1&&(a?.(P),!P.defaultPrevented&&o&&(P.preventDefault(),o()))},p),c.useEffect(()=>{if(u)return r&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(mn=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(u)),m.layers.add(u),hn(),()=>{r&&m.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=mn)}},[u,p,r,m]),c.useEffect(()=>()=>{u&&(m.layers.delete(u),m.layersWithOutsidePointerEventsDisabled.delete(u),hn())},[u,m]),c.useEffect(()=>{const P=()=>g({});return document.addEventListener(fa,P),()=>document.removeEventListener(fa,P)},[]),e.jsx(Xe.div,{...d,ref:y,style:{pointerEvents:h?T?"auto":"none":void 0,...s.style},onFocusCapture:ke(s.onFocusCapture,R.onFocusCapture),onBlurCapture:ke(s.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ke(s.onPointerDownCapture,E.onPointerDownCapture)})});fi.displayName=ju;var Su="DismissableLayerBranch",ku=c.forwardRef((s,t)=>{const r=c.useContext(pi),a=c.useRef(null),n=it(t,a);return c.useEffect(()=>{const i=a.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(Xe.div,{...s,ref:n})});ku.displayName=Su;function _u(s,t=globalThis?.document){const r=Mt(s),a=c.useRef(!1),n=c.useRef(()=>{});return c.useEffect(()=>{const i=o=>{if(o.target&&!a.current){let d=function(){yi(wu,r,m,{discrete:!0})};const m={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=d,t.addEventListener("click",n.current,{once:!0})):d()}else t.removeEventListener("click",n.current);a.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",i),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function Cu(s,t=globalThis?.document){const r=Mt(s),a=c.useRef(!1);return c.useEffect(()=>{const n=i=>{i.target&&!a.current&&yi(Nu,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function hn(){const s=new CustomEvent(fa);document.dispatchEvent(s)}function yi(s,t,r,{discrete:a}){const n=r.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?hi(n,i):n.dispatchEvent(i)}var Wr=0;function Tu(){c.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??xn()),document.body.insertAdjacentElement("beforeend",s[1]??xn()),Wr++,()=>{Wr===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Wr--}},[])}function xn(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Qr="focusScope.autoFocusOnMount",Yr="focusScope.autoFocusOnUnmount",gn={bubbles:!1,cancelable:!0},Au="FocusScope",bi=c.forwardRef((s,t)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:n,onUnmountAutoFocus:i,...l}=s,[o,d]=c.useState(null),m=Mt(n),u=Mt(i),x=c.useRef(null),p=it(t,f=>d(f)),g=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect(()=>{if(a){let f=function(h){if(g.paused||!o)return;const T=h.target;o.contains(T)?x.current=T:Ft(x.current,{select:!0})},v=function(h){if(g.paused||!o)return;const T=h.relatedTarget;T!==null&&(o.contains(T)||Ft(x.current,{select:!0}))},b=function(h){if(document.activeElement===document.body)for(const E of h)E.removedNodes.length>0&&Ft(o)};document.addEventListener("focusin",f),document.addEventListener("focusout",v);const w=new MutationObserver(b);return o&&w.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",v),w.disconnect()}}},[a,o,g.paused]),c.useEffect(()=>{if(o){fn.add(g);const f=document.activeElement;if(!o.contains(f)){const b=new CustomEvent(Qr,gn);o.addEventListener(Qr,m),o.dispatchEvent(b),b.defaultPrevented||(Eu(Ru(vi(o)),{select:!0}),document.activeElement===f&&Ft(o))}return()=>{o.removeEventListener(Qr,m),setTimeout(()=>{const b=new CustomEvent(Yr,gn);o.addEventListener(Yr,u),o.dispatchEvent(b),b.defaultPrevented||Ft(f??document.body,{select:!0}),o.removeEventListener(Yr,u),fn.remove(g)},0)}}},[o,m,u,g]);const y=c.useCallback(f=>{if(!r&&!a||g.paused)return;const v=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,b=document.activeElement;if(v&&b){const w=f.currentTarget,[h,T]=Pu(w);h&&T?!f.shiftKey&&b===T?(f.preventDefault(),r&&Ft(h,{select:!0})):f.shiftKey&&b===h&&(f.preventDefault(),r&&Ft(T,{select:!0})):b===w&&f.preventDefault()}},[r,a,g.paused]);return e.jsx(Xe.div,{tabIndex:-1,...l,ref:p,onKeyDown:y})});bi.displayName=Au;function Eu(s,{select:t=!1}={}){const r=document.activeElement;for(const a of s)if(Ft(a,{select:t}),document.activeElement!==r)return}function Pu(s){const t=vi(s),r=pn(t,s),a=pn(t.reverse(),s);return[r,a]}function vi(s){const t=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const n=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||n?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function pn(s,t){for(const r of s)if(!Iu(r,{upTo:t}))return r}function Iu(s,{upTo:t}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(t!==void 0&&s===t)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function Mu(s){return s instanceof HTMLInputElement&&"select"in s}function Ft(s,{select:t=!1}={}){if(s&&s.focus){const r=document.activeElement;s.focus({preventScroll:!0}),s!==r&&Mu(s)&&t&&s.select()}}var fn=Du();function Du(){let s=[];return{add(t){const r=s[0];t!==r&&r?.pause(),s=yn(s,t),s.unshift(t)},remove(t){s=yn(s,t),s[0]?.resume()}}}function yn(s,t){const r=[...s],a=r.indexOf(t);return a!==-1&&r.splice(a,1),r}function Ru(s){return s.filter(t=>t.tagName!=="A")}var Lu=Un[" useId ".trim().toString()]||(()=>{}),Ou=0;function ya(s){const[t,r]=c.useState(Lu());return Gt(()=>{s||r(a=>a??String(Ou++))},[s]),s||(t?`radix-${t}`:"")}const $u=["top","right","bottom","left"],Ht=Math.min,dt=Math.max,Sr=Math.round,rr=Math.floor,_t=s=>({x:s,y:s}),Fu={left:"right",right:"left",bottom:"top",top:"bottom"},qu={start:"end",end:"start"};function ba(s,t,r){return dt(s,Ht(t,r))}function Dt(s,t){return typeof s=="function"?s(t):s}function Rt(s){return s.split("-")[0]}function Ss(s){return s.split("-")[1]}function Pa(s){return s==="x"?"y":"x"}function Ia(s){return s==="y"?"height":"width"}const Bu=new Set(["top","bottom"]);function St(s){return Bu.has(Rt(s))?"y":"x"}function Ma(s){return Pa(St(s))}function zu(s,t,r){r===void 0&&(r=!1);const a=Ss(s),n=Ma(s),i=Ia(n);let l=n==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=kr(l)),[l,kr(l)]}function Uu(s){const t=kr(s);return[va(s),t,va(t)]}function va(s){return s.replace(/start|end/g,t=>qu[t])}const bn=["left","right"],vn=["right","left"],Gu=["top","bottom"],Hu=["bottom","top"];function Vu(s,t,r){switch(s){case"top":case"bottom":return r?t?vn:bn:t?bn:vn;case"left":case"right":return t?Gu:Hu;default:return[]}}function Wu(s,t,r,a){const n=Ss(s);let i=Vu(Rt(s),r==="start",a);return n&&(i=i.map(l=>l+"-"+n),t&&(i=i.concat(i.map(va)))),i}function kr(s){return s.replace(/left|right|bottom|top/g,t=>Fu[t])}function Qu(s){return{top:0,right:0,bottom:0,left:0,...s}}function ji(s){return typeof s!="number"?Qu(s):{top:s,right:s,bottom:s,left:s}}function _r(s){const{x:t,y:r,width:a,height:n}=s;return{width:a,height:n,top:r,left:t,right:t+a,bottom:r+n,x:t,y:r}}function jn(s,t,r){let{reference:a,floating:n}=s;const i=St(t),l=Ma(t),o=Ia(l),d=Rt(t),m=i==="y",u=a.x+a.width/2-n.width/2,x=a.y+a.height/2-n.height/2,p=a[o]/2-n[o]/2;let g;switch(d){case"top":g={x:u,y:a.y-n.height};break;case"bottom":g={x:u,y:a.y+a.height};break;case"right":g={x:a.x+a.width,y:x};break;case"left":g={x:a.x-n.width,y:x};break;default:g={x:a.x,y:a.y}}switch(Ss(t)){case"start":g[l]-=p*(r&&m?-1:1);break;case"end":g[l]+=p*(r&&m?-1:1);break}return g}const Yu=async(s,t,r)=>{const{placement:a="bottom",strategy:n="absolute",middleware:i=[],platform:l}=r,o=i.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(t));let m=await l.getElementRects({reference:s,floating:t,strategy:n}),{x:u,y:x}=jn(m,a,d),p=a,g={},y=0;for(let f=0;f<o.length;f++){const{name:v,fn:b}=o[f],{x:w,y:h,data:T,reset:E}=await b({x:u,y:x,initialPlacement:a,placement:p,strategy:n,middlewareData:g,rects:m,platform:l,elements:{reference:s,floating:t}});u=w??u,x=h??x,g={...g,[v]:{...g[v],...T}},E&&y<=50&&(y++,typeof E=="object"&&(E.placement&&(p=E.placement),E.rects&&(m=E.rects===!0?await l.getElementRects({reference:s,floating:t,strategy:n}):E.rects),{x:u,y:x}=jn(m,p,d)),f=-1)}return{x:u,y:x,placement:p,strategy:n,middlewareData:g}};async function $s(s,t){var r;t===void 0&&(t={});const{x:a,y:n,platform:i,rects:l,elements:o,strategy:d}=s,{boundary:m="clippingAncestors",rootBoundary:u="viewport",elementContext:x="floating",altBoundary:p=!1,padding:g=0}=Dt(t,s),y=ji(g),v=o[p?x==="floating"?"reference":"floating":x],b=_r(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:m,rootBoundary:u,strategy:d})),w=x==="floating"?{x:a,y:n,width:l.floating.width,height:l.floating.height}:l.reference,h=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),T=await(i.isElement==null?void 0:i.isElement(h))?await(i.getScale==null?void 0:i.getScale(h))||{x:1,y:1}:{x:1,y:1},E=_r(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:w,offsetParent:h,strategy:d}):w);return{top:(b.top-E.top+y.top)/T.y,bottom:(E.bottom-b.bottom+y.bottom)/T.y,left:(b.left-E.left+y.left)/T.x,right:(E.right-b.right+y.right)/T.x}}const Ku=s=>({name:"arrow",options:s,async fn(t){const{x:r,y:a,placement:n,rects:i,platform:l,elements:o,middlewareData:d}=t,{element:m,padding:u=0}=Dt(s,t)||{};if(m==null)return{};const x=ji(u),p={x:r,y:a},g=Ma(n),y=Ia(g),f=await l.getDimensions(m),v=g==="y",b=v?"top":"left",w=v?"bottom":"right",h=v?"clientHeight":"clientWidth",T=i.reference[y]+i.reference[g]-p[g]-i.floating[y],E=p[g]-i.reference[g],R=await(l.getOffsetParent==null?void 0:l.getOffsetParent(m));let P=R?R[h]:0;(!P||!await(l.isElement==null?void 0:l.isElement(R)))&&(P=o.floating[h]||i.floating[y]);const k=T/2-E/2,G=P/2-f[y]/2-1,Q=Ht(x[b],G),se=Ht(x[w],G),S=Q,U=P-f[y]-se,ee=P/2-f[y]/2+k,ge=ba(S,ee,U),q=!d.arrow&&Ss(n)!=null&&ee!==ge&&i.reference[y]/2-(ee<S?Q:se)-f[y]/2<0,oe=q?ee<S?ee-S:ee-U:0;return{[g]:p[g]+oe,data:{[g]:ge,centerOffset:ee-ge-oe,...q&&{alignmentOffset:oe}},reset:q}}}),Ju=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(t){var r,a;const{placement:n,middlewareData:i,rects:l,initialPlacement:o,platform:d,elements:m}=t,{mainAxis:u=!0,crossAxis:x=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:f=!0,...v}=Dt(s,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const b=Rt(n),w=St(o),h=Rt(o)===o,T=await(d.isRTL==null?void 0:d.isRTL(m.floating)),E=p||(h||!f?[kr(o)]:Uu(o)),R=y!=="none";!p&&R&&E.push(...Wu(o,f,y,T));const P=[o,...E],k=await $s(t,v),G=[];let Q=((a=i.flip)==null?void 0:a.overflows)||[];if(u&&G.push(k[b]),x){const ee=zu(n,l,T);G.push(k[ee[0]],k[ee[1]])}if(Q=[...Q,{placement:n,overflows:G}],!G.every(ee=>ee<=0)){var se,S;const ee=(((se=i.flip)==null?void 0:se.index)||0)+1,ge=P[ee];if(ge&&(!(x==="alignment"?w!==St(ge):!1)||Q.every(O=>St(O.placement)===w?O.overflows[0]>0:!0)))return{data:{index:ee,overflows:Q},reset:{placement:ge}};let q=(S=Q.filter(oe=>oe.overflows[0]<=0).sort((oe,O)=>oe.overflows[1]-O.overflows[1])[0])==null?void 0:S.placement;if(!q)switch(g){case"bestFit":{var U;const oe=(U=Q.filter(O=>{if(R){const _=St(O.placement);return _===w||_==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(_=>_>0).reduce((_,me)=>_+me,0)]).sort((O,_)=>O[1]-_[1])[0])==null?void 0:U[0];oe&&(q=oe);break}case"initialPlacement":q=o;break}if(n!==q)return{reset:{placement:q}}}return{}}}};function wn(s,t){return{top:s.top-t.height,right:s.right-t.width,bottom:s.bottom-t.height,left:s.left-t.width}}function Nn(s){return $u.some(t=>s[t]>=0)}const Zu=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(t){const{rects:r}=t,{strategy:a="referenceHidden",...n}=Dt(s,t);switch(a){case"referenceHidden":{const i=await $s(t,{...n,elementContext:"reference"}),l=wn(i,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Nn(l)}}}case"escaped":{const i=await $s(t,{...n,altBoundary:!0}),l=wn(i,r.floating);return{data:{escapedOffsets:l,escaped:Nn(l)}}}default:return{}}}}},wi=new Set(["left","top"]);async function Xu(s,t){const{placement:r,platform:a,elements:n}=s,i=await(a.isRTL==null?void 0:a.isRTL(n.floating)),l=Rt(r),o=Ss(r),d=St(r)==="y",m=wi.has(l)?-1:1,u=i&&d?-1:1,x=Dt(t,s);let{mainAxis:p,crossAxis:g,alignmentAxis:y}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return o&&typeof y=="number"&&(g=o==="end"?y*-1:y),d?{x:g*u,y:p*m}:{x:p*m,y:g*u}}const em=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(t){var r,a;const{x:n,y:i,placement:l,middlewareData:o}=t,d=await Xu(t,s);return l===((r=o.offset)==null?void 0:r.placement)&&(a=o.arrow)!=null&&a.alignmentOffset?{}:{x:n+d.x,y:i+d.y,data:{...d,placement:l}}}}},tm=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(t){const{x:r,y:a,placement:n}=t,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:v=>{let{x:b,y:w}=v;return{x:b,y:w}}},...d}=Dt(s,t),m={x:r,y:a},u=await $s(t,d),x=St(Rt(n)),p=Pa(x);let g=m[p],y=m[x];if(i){const v=p==="y"?"top":"left",b=p==="y"?"bottom":"right",w=g+u[v],h=g-u[b];g=ba(w,g,h)}if(l){const v=x==="y"?"top":"left",b=x==="y"?"bottom":"right",w=y+u[v],h=y-u[b];y=ba(w,y,h)}const f=o.fn({...t,[p]:g,[x]:y});return{...f,data:{x:f.x-r,y:f.y-a,enabled:{[p]:i,[x]:l}}}}}},sm=function(s){return s===void 0&&(s={}),{options:s,fn(t){const{x:r,y:a,placement:n,rects:i,middlewareData:l}=t,{offset:o=0,mainAxis:d=!0,crossAxis:m=!0}=Dt(s,t),u={x:r,y:a},x=St(n),p=Pa(x);let g=u[p],y=u[x];const f=Dt(o,t),v=typeof f=="number"?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(d){const h=p==="y"?"height":"width",T=i.reference[p]-i.floating[h]+v.mainAxis,E=i.reference[p]+i.reference[h]-v.mainAxis;g<T?g=T:g>E&&(g=E)}if(m){var b,w;const h=p==="y"?"width":"height",T=wi.has(Rt(n)),E=i.reference[x]-i.floating[h]+(T&&((b=l.offset)==null?void 0:b[x])||0)+(T?0:v.crossAxis),R=i.reference[x]+i.reference[h]+(T?0:((w=l.offset)==null?void 0:w[x])||0)-(T?v.crossAxis:0);y<E?y=E:y>R&&(y=R)}return{[p]:g,[x]:y}}}},rm=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(t){var r,a;const{placement:n,rects:i,platform:l,elements:o}=t,{apply:d=()=>{},...m}=Dt(s,t),u=await $s(t,m),x=Rt(n),p=Ss(n),g=St(n)==="y",{width:y,height:f}=i.floating;let v,b;x==="top"||x==="bottom"?(v=x,b=p===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(b=x,v=p==="end"?"top":"bottom");const w=f-u.top-u.bottom,h=y-u.left-u.right,T=Ht(f-u[v],w),E=Ht(y-u[b],h),R=!t.middlewareData.shift;let P=T,k=E;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=h),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(P=w),R&&!p){const Q=dt(u.left,0),se=dt(u.right,0),S=dt(u.top,0),U=dt(u.bottom,0);g?k=y-2*(Q!==0||se!==0?Q+se:dt(u.left,u.right)):P=f-2*(S!==0||U!==0?S+U:dt(u.top,u.bottom))}await d({...t,availableWidth:k,availableHeight:P});const G=await l.getDimensions(o.floating);return y!==G.width||f!==G.height?{reset:{rects:!0}}:{}}}};function Rr(){return typeof window<"u"}function ks(s){return Ni(s)?(s.nodeName||"").toLowerCase():"#document"}function ut(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function Tt(s){var t;return(t=(Ni(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function Ni(s){return Rr()?s instanceof Node||s instanceof ut(s).Node:!1}function jt(s){return Rr()?s instanceof Element||s instanceof ut(s).Element:!1}function Ct(s){return Rr()?s instanceof HTMLElement||s instanceof ut(s).HTMLElement:!1}function Sn(s){return!Rr()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof ut(s).ShadowRoot}const am=new Set(["inline","contents"]);function Vs(s){const{overflow:t,overflowX:r,overflowY:a,display:n}=wt(s);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!am.has(n)}const nm=new Set(["table","td","th"]);function im(s){return nm.has(ks(s))}const om=[":popover-open",":modal"];function Lr(s){return om.some(t=>{try{return s.matches(t)}catch{return!1}})}const lm=["transform","translate","scale","rotate","perspective"],cm=["transform","translate","scale","rotate","perspective","filter"],dm=["paint","layout","strict","content"];function Da(s){const t=Ra(),r=jt(s)?wt(s):s;return lm.some(a=>r[a]?r[a]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||cm.some(a=>(r.willChange||"").includes(a))||dm.some(a=>(r.contain||"").includes(a))}function um(s){let t=Vt(s);for(;Ct(t)&&!bs(t);){if(Da(t))return t;if(Lr(t))return null;t=Vt(t)}return null}function Ra(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mm=new Set(["html","body","#document"]);function bs(s){return mm.has(ks(s))}function wt(s){return ut(s).getComputedStyle(s)}function Or(s){return jt(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Vt(s){if(ks(s)==="html")return s;const t=s.assignedSlot||s.parentNode||Sn(s)&&s.host||Tt(s);return Sn(t)?t.host:t}function Si(s){const t=Vt(s);return bs(t)?s.ownerDocument?s.ownerDocument.body:s.body:Ct(t)&&Vs(t)?t:Si(t)}function Fs(s,t,r){var a;t===void 0&&(t=[]),r===void 0&&(r=!0);const n=Si(s),i=n===((a=s.ownerDocument)==null?void 0:a.body),l=ut(n);if(i){const o=ja(l);return t.concat(l,l.visualViewport||[],Vs(n)?n:[],o&&r?Fs(o):[])}return t.concat(n,Fs(n,[],r))}function ja(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function ki(s){const t=wt(s);let r=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const n=Ct(s),i=n?s.offsetWidth:r,l=n?s.offsetHeight:a,o=Sr(r)!==i||Sr(a)!==l;return o&&(r=i,a=l),{width:r,height:a,$:o}}function La(s){return jt(s)?s:s.contextElement}function ps(s){const t=La(s);if(!Ct(t))return _t(1);const r=t.getBoundingClientRect(),{width:a,height:n,$:i}=ki(t);let l=(i?Sr(r.width):r.width)/a,o=(i?Sr(r.height):r.height)/n;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const hm=_t(0);function _i(s){const t=ut(s);return!Ra()||!t.visualViewport?hm:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function xm(s,t,r){return t===void 0&&(t=!1),!r||t&&r!==ut(s)?!1:t}function Jt(s,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=!1);const n=s.getBoundingClientRect(),i=La(s);let l=_t(1);t&&(a?jt(a)&&(l=ps(a)):l=ps(s));const o=xm(i,r,a)?_i(i):_t(0);let d=(n.left+o.x)/l.x,m=(n.top+o.y)/l.y,u=n.width/l.x,x=n.height/l.y;if(i){const p=ut(i),g=a&&jt(a)?ut(a):a;let y=p,f=ja(y);for(;f&&a&&g!==y;){const v=ps(f),b=f.getBoundingClientRect(),w=wt(f),h=b.left+(f.clientLeft+parseFloat(w.paddingLeft))*v.x,T=b.top+(f.clientTop+parseFloat(w.paddingTop))*v.y;d*=v.x,m*=v.y,u*=v.x,x*=v.y,d+=h,m+=T,y=ut(f),f=ja(y)}}return _r({width:u,height:x,x:d,y:m})}function $r(s,t){const r=Or(s).scrollLeft;return t?t.left+r:Jt(Tt(s)).left+r}function Ci(s,t){const r=s.getBoundingClientRect(),a=r.left+t.scrollLeft-$r(s,r),n=r.top+t.scrollTop;return{x:a,y:n}}function gm(s){let{elements:t,rect:r,offsetParent:a,strategy:n}=s;const i=n==="fixed",l=Tt(a),o=t?Lr(t.floating):!1;if(a===l||o&&i)return r;let d={scrollLeft:0,scrollTop:0},m=_t(1);const u=_t(0),x=Ct(a);if((x||!x&&!i)&&((ks(a)!=="body"||Vs(l))&&(d=Or(a)),Ct(a))){const g=Jt(a);m=ps(a),u.x=g.x+a.clientLeft,u.y=g.y+a.clientTop}const p=l&&!x&&!i?Ci(l,d):_t(0);return{width:r.width*m.x,height:r.height*m.y,x:r.x*m.x-d.scrollLeft*m.x+u.x+p.x,y:r.y*m.y-d.scrollTop*m.y+u.y+p.y}}function pm(s){return Array.from(s.getClientRects())}function fm(s){const t=Tt(s),r=Or(s),a=s.ownerDocument.body,n=dt(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),i=dt(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let l=-r.scrollLeft+$r(s);const o=-r.scrollTop;return wt(a).direction==="rtl"&&(l+=dt(t.clientWidth,a.clientWidth)-n),{width:n,height:i,x:l,y:o}}const kn=25;function ym(s,t){const r=ut(s),a=Tt(s),n=r.visualViewport;let i=a.clientWidth,l=a.clientHeight,o=0,d=0;if(n){i=n.width,l=n.height;const u=Ra();(!u||u&&t==="fixed")&&(o=n.offsetLeft,d=n.offsetTop)}const m=$r(a);if(m<=0){const u=a.ownerDocument,x=u.body,p=getComputedStyle(x),g=u.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,y=Math.abs(a.clientWidth-x.clientWidth-g);y<=kn&&(i-=y)}else m<=kn&&(i+=m);return{width:i,height:l,x:o,y:d}}const bm=new Set(["absolute","fixed"]);function vm(s,t){const r=Jt(s,!0,t==="fixed"),a=r.top+s.clientTop,n=r.left+s.clientLeft,i=Ct(s)?ps(s):_t(1),l=s.clientWidth*i.x,o=s.clientHeight*i.y,d=n*i.x,m=a*i.y;return{width:l,height:o,x:d,y:m}}function _n(s,t,r){let a;if(t==="viewport")a=ym(s,r);else if(t==="document")a=fm(Tt(s));else if(jt(t))a=vm(t,r);else{const n=_i(s);a={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return _r(a)}function Ti(s,t){const r=Vt(s);return r===t||!jt(r)||bs(r)?!1:wt(r).position==="fixed"||Ti(r,t)}function jm(s,t){const r=t.get(s);if(r)return r;let a=Fs(s,[],!1).filter(o=>jt(o)&&ks(o)!=="body"),n=null;const i=wt(s).position==="fixed";let l=i?Vt(s):s;for(;jt(l)&&!bs(l);){const o=wt(l),d=Da(l);!d&&o.position==="fixed"&&(n=null),(i?!d&&!n:!d&&o.position==="static"&&!!n&&bm.has(n.position)||Vs(l)&&!d&&Ti(s,l))?a=a.filter(u=>u!==l):n=o,l=Vt(l)}return t.set(s,a),a}function wm(s){let{element:t,boundary:r,rootBoundary:a,strategy:n}=s;const l=[...r==="clippingAncestors"?Lr(t)?[]:jm(t,this._c):[].concat(r),a],o=l[0],d=l.reduce((m,u)=>{const x=_n(t,u,n);return m.top=dt(x.top,m.top),m.right=Ht(x.right,m.right),m.bottom=Ht(x.bottom,m.bottom),m.left=dt(x.left,m.left),m},_n(t,o,n));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function Nm(s){const{width:t,height:r}=ki(s);return{width:t,height:r}}function Sm(s,t,r){const a=Ct(t),n=Tt(t),i=r==="fixed",l=Jt(s,!0,i,t);let o={scrollLeft:0,scrollTop:0};const d=_t(0);function m(){d.x=$r(n)}if(a||!a&&!i)if((ks(t)!=="body"||Vs(n))&&(o=Or(t)),a){const g=Jt(t,!0,i,t);d.x=g.x+t.clientLeft,d.y=g.y+t.clientTop}else n&&m();i&&!a&&n&&m();const u=n&&!a&&!i?Ci(n,o):_t(0),x=l.left+o.scrollLeft-d.x-u.x,p=l.top+o.scrollTop-d.y-u.y;return{x,y:p,width:l.width,height:l.height}}function Kr(s){return wt(s).position==="static"}function Cn(s,t){if(!Ct(s)||wt(s).position==="fixed")return null;if(t)return t(s);let r=s.offsetParent;return Tt(s)===r&&(r=r.ownerDocument.body),r}function Ai(s,t){const r=ut(s);if(Lr(s))return r;if(!Ct(s)){let n=Vt(s);for(;n&&!bs(n);){if(jt(n)&&!Kr(n))return n;n=Vt(n)}return r}let a=Cn(s,t);for(;a&&im(a)&&Kr(a);)a=Cn(a,t);return a&&bs(a)&&Kr(a)&&!Da(a)?r:a||um(s)||r}const km=async function(s){const t=this.getOffsetParent||Ai,r=this.getDimensions,a=await r(s.floating);return{reference:Sm(s.reference,await t(s.floating),s.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function _m(s){return wt(s).direction==="rtl"}const Cm={convertOffsetParentRelativeRectToViewportRelativeRect:gm,getDocumentElement:Tt,getClippingRect:wm,getOffsetParent:Ai,getElementRects:km,getClientRects:pm,getDimensions:Nm,getScale:ps,isElement:jt,isRTL:_m};function Ei(s,t){return s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function Tm(s,t){let r=null,a;const n=Tt(s);function i(){var o;clearTimeout(a),(o=r)==null||o.disconnect(),r=null}function l(o,d){o===void 0&&(o=!1),d===void 0&&(d=1),i();const m=s.getBoundingClientRect(),{left:u,top:x,width:p,height:g}=m;if(o||t(),!p||!g)return;const y=rr(x),f=rr(n.clientWidth-(u+p)),v=rr(n.clientHeight-(x+g)),b=rr(u),h={rootMargin:-y+"px "+-f+"px "+-v+"px "+-b+"px",threshold:dt(0,Ht(1,d))||1};let T=!0;function E(R){const P=R[0].intersectionRatio;if(P!==d){if(!T)return l();P?l(!1,P):a=setTimeout(()=>{l(!1,1e-7)},1e3)}P===1&&!Ei(m,s.getBoundingClientRect())&&l(),T=!1}try{r=new IntersectionObserver(E,{...h,root:n.ownerDocument})}catch{r=new IntersectionObserver(E,h)}r.observe(s)}return l(!0),i}function Am(s,t,r,a){a===void 0&&(a={});const{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:d=!1}=a,m=La(s),u=n||i?[...m?Fs(m):[],...Fs(t)]:[];u.forEach(b=>{n&&b.addEventListener("scroll",r,{passive:!0}),i&&b.addEventListener("resize",r)});const x=m&&o?Tm(m,r):null;let p=-1,g=null;l&&(g=new ResizeObserver(b=>{let[w]=b;w&&w.target===m&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var h;(h=g)==null||h.observe(t)})),r()}),m&&!d&&g.observe(m),g.observe(t));let y,f=d?Jt(s):null;d&&v();function v(){const b=Jt(s);f&&!Ei(f,b)&&r(),f=b,y=requestAnimationFrame(v)}return r(),()=>{var b;u.forEach(w=>{n&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),x?.(),(b=g)==null||b.disconnect(),g=null,d&&cancelAnimationFrame(y)}}const Em=em,Pm=tm,Im=Ju,Mm=rm,Dm=Zu,Tn=Ku,Rm=sm,Lm=(s,t,r)=>{const a=new Map,n={platform:Cm,...r},i={...n.platform,_c:a};return Yu(s,t,{...n,platform:i})};var Om=typeof document<"u",$m=function(){},hr=Om?c.useLayoutEffect:$m;function Cr(s,t){if(s===t)return!0;if(typeof s!=typeof t)return!1;if(typeof s=="function"&&s.toString()===t.toString())return!0;let r,a,n;if(s&&t&&typeof s=="object"){if(Array.isArray(s)){if(r=s.length,r!==t.length)return!1;for(a=r;a--!==0;)if(!Cr(s[a],t[a]))return!1;return!0}if(n=Object.keys(s),r=n.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(t,n[a]))return!1;for(a=r;a--!==0;){const i=n[a];if(!(i==="_owner"&&s.$$typeof)&&!Cr(s[i],t[i]))return!1}return!0}return s!==s&&t!==t}function Pi(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function An(s,t){const r=Pi(s);return Math.round(t*r)/r}function Jr(s){const t=c.useRef(s);return hr(()=>{t.current=s}),t}function Fm(s){s===void 0&&(s={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:n,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:d,open:m}=s,[u,x]=c.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=c.useState(a);Cr(p,a)||g(a);const[y,f]=c.useState(null),[v,b]=c.useState(null),w=c.useCallback(O=>{O!==R.current&&(R.current=O,f(O))},[]),h=c.useCallback(O=>{O!==P.current&&(P.current=O,b(O))},[]),T=i||y,E=l||v,R=c.useRef(null),P=c.useRef(null),k=c.useRef(u),G=d!=null,Q=Jr(d),se=Jr(n),S=Jr(m),U=c.useCallback(()=>{if(!R.current||!P.current)return;const O={placement:t,strategy:r,middleware:p};se.current&&(O.platform=se.current),Lm(R.current,P.current,O).then(_=>{const me={..._,isPositioned:S.current!==!1};ee.current&&!Cr(k.current,me)&&(k.current=me,_a.flushSync(()=>{x(me)}))})},[p,t,r,se,S]);hr(()=>{m===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,x(O=>({...O,isPositioned:!1})))},[m]);const ee=c.useRef(!1);hr(()=>(ee.current=!0,()=>{ee.current=!1}),[]),hr(()=>{if(T&&(R.current=T),E&&(P.current=E),T&&E){if(Q.current)return Q.current(T,E,U);U()}},[T,E,U,Q,G]);const ge=c.useMemo(()=>({reference:R,floating:P,setReference:w,setFloating:h}),[w,h]),q=c.useMemo(()=>({reference:T,floating:E}),[T,E]),oe=c.useMemo(()=>{const O={position:r,left:0,top:0};if(!q.floating)return O;const _=An(q.floating,u.x),me=An(q.floating,u.y);return o?{...O,transform:"translate("+_+"px, "+me+"px)",...Pi(q.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:_,top:me}},[r,o,q.floating,u.x,u.y]);return c.useMemo(()=>({...u,update:U,refs:ge,elements:q,floatingStyles:oe}),[u,U,ge,q,oe])}const qm=s=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:s,fn(r){const{element:a,padding:n}=typeof s=="function"?s(r):s;return a&&t(a)?a.current!=null?Tn({element:a.current,padding:n}).fn(r):{}:a?Tn({element:a,padding:n}).fn(r):{}}}},Bm=(s,t)=>({...Em(s),options:[s,t]}),zm=(s,t)=>({...Pm(s),options:[s,t]}),Um=(s,t)=>({...Rm(s),options:[s,t]}),Gm=(s,t)=>({...Im(s),options:[s,t]}),Hm=(s,t)=>({...Mm(s),options:[s,t]}),Vm=(s,t)=>({...Dm(s),options:[s,t]}),Wm=(s,t)=>({...qm(s),options:[s,t]});var Qm="Arrow",Ii=c.forwardRef((s,t)=>{const{children:r,width:a=10,height:n=5,...i}=s;return e.jsx(Xe.svg,{...i,ref:t,width:a,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ii.displayName=Qm;var Ym=Ii;function Km(s){const[t,r]=c.useState(void 0);return Gt(()=>{if(s){r({width:s.offsetWidth,height:s.offsetHeight});const a=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const i=n[0];let l,o;if("borderBoxSize"in i){const d=i.borderBoxSize,m=Array.isArray(d)?d[0]:d;l=m.inlineSize,o=m.blockSize}else l=s.offsetWidth,o=s.offsetHeight;r({width:l,height:o})});return a.observe(s,{box:"border-box"}),()=>a.unobserve(s)}else r(void 0)},[s]),t}var Oa="Popper",[Mi,Di]=Hs(Oa),[Jm,Ri]=Mi(Oa),Li=s=>{const{__scopePopper:t,children:r}=s,[a,n]=c.useState(null);return e.jsx(Jm,{scope:t,anchor:a,onAnchorChange:n,children:r})};Li.displayName=Oa;var Oi="PopperAnchor",$i=c.forwardRef((s,t)=>{const{__scopePopper:r,virtualRef:a,...n}=s,i=Ri(Oi,r),l=c.useRef(null),o=it(t,l),d=c.useRef(null);return c.useEffect(()=>{const m=d.current;d.current=a?.current||l.current,m!==d.current&&i.onAnchorChange(d.current)}),a?null:e.jsx(Xe.div,{...n,ref:o})});$i.displayName=Oi;var $a="PopperContent",[Zm,Xm]=Mi($a),Fi=c.forwardRef((s,t)=>{const{__scopePopper:r,side:a="bottom",sideOffset:n=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:d=!0,collisionBoundary:m=[],collisionPadding:u=0,sticky:x="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:y,...f}=s,v=Ri($a,r),[b,w]=c.useState(null),h=it(t,re=>w(re)),[T,E]=c.useState(null),R=Km(T),P=R?.width??0,k=R?.height??0,G=a+(i!=="center"?"-"+i:""),Q=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},se=Array.isArray(m)?m:[m],S=se.length>0,U={padding:Q,boundary:se.filter(th),altBoundary:S},{refs:ee,floatingStyles:ge,placement:q,isPositioned:oe,middlewareData:O}=Fm({strategy:"fixed",placement:G,whileElementsMounted:(...re)=>Am(...re,{animationFrame:g==="always"}),elements:{reference:v.anchor},middleware:[Bm({mainAxis:n+k,alignmentAxis:l}),d&&zm({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?Um():void 0,...U}),d&&Gm({...U}),Hm({...U,apply:({elements:re,rects:ce,availableWidth:Te,availableHeight:A})=>{const{width:z,height:ie}=ce.reference,te=re.floating.style;te.setProperty("--radix-popper-available-width",`${Te}px`),te.setProperty("--radix-popper-available-height",`${A}px`),te.setProperty("--radix-popper-anchor-width",`${z}px`),te.setProperty("--radix-popper-anchor-height",`${ie}px`)}}),T&&Wm({element:T,padding:o}),sh({arrowWidth:P,arrowHeight:k}),p&&Vm({strategy:"referenceHidden",...U})]}),[_,me]=zi(q),le=Mt(y);Gt(()=>{oe&&le?.()},[oe,le]);const D=O.arrow?.x,Y=O.arrow?.y,he=O.arrow?.centerOffset!==0,[Ne,ye]=c.useState();return Gt(()=>{b&&ye(window.getComputedStyle(b).zIndex)},[b]),e.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...ge,transform:oe?ge.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[O.transformOrigin?.x,O.transformOrigin?.y].join(" "),...O.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:e.jsx(Zm,{scope:r,placedSide:_,onArrowChange:E,arrowX:D,arrowY:Y,shouldHideArrow:he,children:e.jsx(Xe.div,{"data-side":_,"data-align":me,...f,ref:h,style:{...f.style,animation:oe?void 0:"none"}})})})});Fi.displayName=$a;var qi="PopperArrow",eh={top:"bottom",right:"left",bottom:"top",left:"right"},Bi=c.forwardRef(function(t,r){const{__scopePopper:a,...n}=t,i=Xm(qi,a),l=eh[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(Ym,{...n,ref:r,style:{...n.style,display:"block"}})})});Bi.displayName=qi;function th(s){return s!==null}var sh=s=>({name:"transformOrigin",options:s,fn(t){const{placement:r,rects:a,middlewareData:n}=t,l=n.arrow?.centerOffset!==0,o=l?0:s.arrowWidth,d=l?0:s.arrowHeight,[m,u]=zi(r),x={start:"0%",center:"50%",end:"100%"}[u],p=(n.arrow?.x??0)+o/2,g=(n.arrow?.y??0)+d/2;let y="",f="";return m==="bottom"?(y=l?x:`${p}px`,f=`${-d}px`):m==="top"?(y=l?x:`${p}px`,f=`${a.floating.height+d}px`):m==="right"?(y=`${-d}px`,f=l?x:`${g}px`):m==="left"&&(y=`${a.floating.width+d}px`,f=l?x:`${g}px`),{data:{x:y,y:f}}}});function zi(s){const[t,r="center"]=s.split("-");return[t,r]}var rh=Li,ah=$i,nh=Fi,ih=Bi,oh="Portal",Ui=c.forwardRef((s,t)=>{const{container:r,...a}=s,[n,i]=c.useState(!1);Gt(()=>i(!0),[]);const l=r||n&&globalThis?.document?.body;return l?Uo.createPortal(e.jsx(Xe.div,{...a,ref:t}),l):null});Ui.displayName=oh;function lh(s,t){return c.useReducer((r,a)=>t[r][a]??r,s)}var Ws=s=>{const{present:t,children:r}=s,a=ch(t),n=typeof r=="function"?r({present:a.isPresent}):c.Children.only(r),i=it(a.ref,dh(n));return typeof r=="function"||a.isPresent?c.cloneElement(n,{ref:i}):null};Ws.displayName="Presence";function ch(s){const[t,r]=c.useState(),a=c.useRef(null),n=c.useRef(s),i=c.useRef("none"),l=s?"mounted":"unmounted",[o,d]=lh(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const m=ar(a.current);i.current=o==="mounted"?m:"none"},[o]),Gt(()=>{const m=a.current,u=n.current;if(u!==s){const p=i.current,g=ar(m);s?d("MOUNT"):g==="none"||m?.display==="none"?d("UNMOUNT"):d(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),n.current=s}},[s,d]),Gt(()=>{if(t){let m;const u=t.ownerDocument.defaultView??window,x=g=>{const f=ar(a.current).includes(CSS.escape(g.animationName));if(g.target===t&&f&&(d("ANIMATION_END"),!n.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",m=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},p=g=>{g.target===t&&(i.current=ar(a.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",x),t.addEventListener("animationend",x),()=>{u.clearTimeout(m),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",x),t.removeEventListener("animationend",x)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:c.useCallback(m=>{a.current=m?getComputedStyle(m):null,r(m)},[])}}function ar(s){return s?.animationName||"none"}function dh(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}var Zr="rovingFocusGroup.onEntryFocus",uh={bubbles:!1,cancelable:!0},Qs="RovingFocusGroup",[wa,Gi,mh]=xi(Qs),[hh,Hi]=Hs(Qs,[mh]),[xh,gh]=hh(Qs),Vi=c.forwardRef((s,t)=>e.jsx(wa.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(wa.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(ph,{...s,ref:t})})}));Vi.displayName=Qs;var ph=c.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:n=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:d,onEntryFocus:m,preventScrollOnEntryFocus:u=!1,...x}=s,p=c.useRef(null),g=it(t,p),y=gi(i),[f,v]=mi({prop:l,defaultProp:o??null,onChange:d,caller:Qs}),[b,w]=c.useState(!1),h=Mt(m),T=Gi(r),E=c.useRef(!1),[R,P]=c.useState(0);return c.useEffect(()=>{const k=p.current;if(k)return k.addEventListener(Zr,h),()=>k.removeEventListener(Zr,h)},[h]),e.jsx(xh,{scope:r,orientation:a,dir:y,loop:n,currentTabStopId:f,onItemFocus:c.useCallback(k=>v(k),[v]),onItemShiftTab:c.useCallback(()=>w(!0),[]),onFocusableItemAdd:c.useCallback(()=>P(k=>k+1),[]),onFocusableItemRemove:c.useCallback(()=>P(k=>k-1),[]),children:e.jsx(Xe.div,{tabIndex:b||R===0?-1:0,"data-orientation":a,...x,ref:g,style:{outline:"none",...s.style},onMouseDown:ke(s.onMouseDown,()=>{E.current=!0}),onFocus:ke(s.onFocus,k=>{const G=!E.current;if(k.target===k.currentTarget&&G&&!b){const Q=new CustomEvent(Zr,uh);if(k.currentTarget.dispatchEvent(Q),!Q.defaultPrevented){const se=T().filter(q=>q.focusable),S=se.find(q=>q.active),U=se.find(q=>q.id===f),ge=[S,U,...se].filter(Boolean).map(q=>q.ref.current);Yi(ge,u)}}E.current=!1}),onBlur:ke(s.onBlur,()=>w(!1))})})}),Wi="RovingFocusGroupItem",Qi=c.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:n=!1,tabStopId:i,children:l,...o}=s,d=ya(),m=i||d,u=gh(Wi,r),x=u.currentTabStopId===m,p=Gi(r),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:f}=u;return c.useEffect(()=>{if(a)return g(),()=>y()},[a,g,y]),e.jsx(wa.ItemSlot,{scope:r,id:m,focusable:a,active:n,children:e.jsx(Xe.span,{tabIndex:x?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:ke(s.onMouseDown,v=>{a?u.onItemFocus(m):v.preventDefault()}),onFocus:ke(s.onFocus,()=>u.onItemFocus(m)),onKeyDown:ke(s.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const b=bh(v,u.orientation,u.dir);if(b!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let h=p().filter(T=>T.focusable).map(T=>T.ref.current);if(b==="last")h.reverse();else if(b==="prev"||b==="next"){b==="prev"&&h.reverse();const T=h.indexOf(v.currentTarget);h=u.loop?vh(h,T+1):h.slice(T+1)}setTimeout(()=>Yi(h))}}),children:typeof l=="function"?l({isCurrentTabStop:x,hasTabStop:f!=null}):l})})});Qi.displayName=Wi;var fh={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function yh(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function bh(s,t,r){const a=yh(s.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return fh[a]}function Yi(s,t=!1){const r=document.activeElement;for(const a of s)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}function vh(s,t){return s.map((r,a)=>s[(t+a)%s.length])}var jh=Vi,wh=Qi,Nh=function(s){if(typeof document>"u")return null;var t=Array.isArray(s)?s[0]:s;return t.ownerDocument.body},is=new WeakMap,nr=new WeakMap,ir={},Xr=0,Ki=function(s){return s&&(s.host||Ki(s.parentNode))},Sh=function(s,t){return t.map(function(r){if(s.contains(r))return r;var a=Ki(r);return a&&s.contains(a)?a:(console.error("aria-hidden",r,"in not contained inside",s,". Doing nothing"),null)}).filter(function(r){return!!r})},kh=function(s,t,r,a){var n=Sh(t,Array.isArray(s)?s:[s]);ir[r]||(ir[r]=new WeakMap);var i=ir[r],l=[],o=new Set,d=new Set(n),m=function(x){!x||o.has(x)||(o.add(x),m(x.parentNode))};n.forEach(m);var u=function(x){!x||d.has(x)||Array.prototype.forEach.call(x.children,function(p){if(o.has(p))u(p);else try{var g=p.getAttribute(a),y=g!==null&&g!=="false",f=(is.get(p)||0)+1,v=(i.get(p)||0)+1;is.set(p,f),i.set(p,v),l.push(p),f===1&&y&&nr.set(p,!0),v===1&&p.setAttribute(r,"true"),y||p.setAttribute(a,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return u(t),o.clear(),Xr++,function(){l.forEach(function(x){var p=is.get(x)-1,g=i.get(x)-1;is.set(x,p),i.set(x,g),p||(nr.has(x)||x.removeAttribute(a),nr.delete(x)),g||x.removeAttribute(r)}),Xr--,Xr||(is=new WeakMap,is=new WeakMap,nr=new WeakMap,ir={})}},_h=function(s,t,r){r===void 0&&(r="data-aria-hidden");var a=Array.from(Array.isArray(s)?s:[s]),n=t||Nh(s);return n?(a.push.apply(a,Array.from(n.querySelectorAll("[aria-live], script"))),kh(a,n,r,"aria-hidden")):function(){return null}},Nt=function(){return Nt=Object.assign||function(t){for(var r,a=1,n=arguments.length;a<n;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Nt.apply(this,arguments)};function Ji(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(s);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(s,a[n])&&(r[a[n]]=s[a[n]]);return r}function Ch(s,t,r){if(r||arguments.length===2)for(var a=0,n=t.length,i;a<n;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return s.concat(i||Array.prototype.slice.call(t))}var xr="right-scroll-bar-position",gr="width-before-scroll-bar",Th="with-scroll-bars-hidden",Ah="--removed-body-scroll-bar-size";function ea(s,t){return typeof s=="function"?s(t):s&&(s.current=t),s}function Eh(s,t){var r=c.useState(function(){return{value:s,callback:t,facade:{get current(){return r.value},set current(a){var n=r.value;n!==a&&(r.value=a,r.callback(a,n))}}}})[0];return r.callback=t,r.facade}var Ph=typeof window<"u"?c.useLayoutEffect:c.useEffect,En=new WeakMap;function Ih(s,t){var r=Eh(t||null,function(a){return s.forEach(function(n){return ea(n,a)})});return Ph(function(){var a=En.get(r);if(a){var n=new Set(a),i=new Set(s),l=r.current;n.forEach(function(o){i.has(o)||ea(o,null)}),i.forEach(function(o){n.has(o)||ea(o,l)})}En.set(r,s)},[s]),r}function Mh(s){return s}function Dh(s,t){t===void 0&&(t=Mh);var r=[],a=!1,n={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:s},useMedium:function(i){var l=t(i,a);return r.push(l),function(){r=r.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(a=!0;r.length;){var l=r;r=[],l.forEach(i)}r={push:function(o){return i(o)},filter:function(){return r}}},assignMedium:function(i){a=!0;var l=[];if(r.length){var o=r;r=[],o.forEach(i),l=r}var d=function(){var u=l;l=[],u.forEach(i)},m=function(){return Promise.resolve().then(d)};m(),r={push:function(u){l.push(u),m()},filter:function(u){return l=l.filter(u),r}}}};return n}function Rh(s){s===void 0&&(s={});var t=Dh(null);return t.options=Nt({async:!0,ssr:!1},s),t}var Zi=function(s){var t=s.sideCar,r=Ji(s,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return c.createElement(a,Nt({},r))};Zi.isSideCarExport=!0;function Lh(s,t){return s.useMedium(t),Zi}var Xi=Rh(),ta=function(){},Fr=c.forwardRef(function(s,t){var r=c.useRef(null),a=c.useState({onScrollCapture:ta,onWheelCapture:ta,onTouchMoveCapture:ta}),n=a[0],i=a[1],l=s.forwardProps,o=s.children,d=s.className,m=s.removeScrollBar,u=s.enabled,x=s.shards,p=s.sideCar,g=s.noRelative,y=s.noIsolation,f=s.inert,v=s.allowPinchZoom,b=s.as,w=b===void 0?"div":b,h=s.gapMode,T=Ji(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=p,R=Ih([r,t]),P=Nt(Nt({},T),n);return c.createElement(c.Fragment,null,u&&c.createElement(E,{sideCar:Xi,removeScrollBar:m,shards:x,noRelative:g,noIsolation:y,inert:f,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:h}),l?c.cloneElement(c.Children.only(o),Nt(Nt({},P),{ref:R})):c.createElement(w,Nt({},P,{className:d,ref:R}),o))});Fr.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fr.classNames={fullWidth:gr,zeroRight:xr};var Pn,Oh=function(){if(Pn)return Pn;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $h(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var t=Oh();return t&&s.setAttribute("nonce",t),s}function Fh(s,t){s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}function qh(s){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(s)}var Bh=function(){var s=0,t=null;return{add:function(r){s==0&&(t=$h())&&(Fh(t,r),qh(t)),s++},remove:function(){s--,!s&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},zh=function(){var s=Bh();return function(t,r){c.useEffect(function(){return s.add(t),function(){s.remove()}},[t&&r])}},eo=function(){var s=zh(),t=function(r){var a=r.styles,n=r.dynamic;return s(a,n),null};return t},Uh={left:0,top:0,right:0,gap:0},sa=function(s){return parseInt(s||"",10)||0},Gh=function(s){var t=window.getComputedStyle(document.body),r=t[s==="padding"?"paddingLeft":"marginLeft"],a=t[s==="padding"?"paddingTop":"marginTop"],n=t[s==="padding"?"paddingRight":"marginRight"];return[sa(r),sa(a),sa(n)]},Hh=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return Uh;var t=Gh(s),r=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-r+t[2]-t[0])}},Vh=eo(),fs="data-scroll-locked",Wh=function(s,t,r,a){var n=s.left,i=s.top,l=s.right,o=s.gap;return r===void 0&&(r="margin"),`
  .`.concat(Th,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(o,"px ").concat(a,`;
  }
  body[`).concat(fs,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),r==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(a,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(xr,` {
    right: `).concat(o,"px ").concat(a,`;
  }
  
  .`).concat(gr,` {
    margin-right: `).concat(o,"px ").concat(a,`;
  }
  
  .`).concat(xr," .").concat(xr,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(gr," .").concat(gr,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(fs,`] {
    `).concat(Ah,": ").concat(o,`px;
  }
`)},In=function(){var s=parseInt(document.body.getAttribute(fs)||"0",10);return isFinite(s)?s:0},Qh=function(){c.useEffect(function(){return document.body.setAttribute(fs,(In()+1).toString()),function(){var s=In()-1;s<=0?document.body.removeAttribute(fs):document.body.setAttribute(fs,s.toString())}},[])},Yh=function(s){var t=s.noRelative,r=s.noImportant,a=s.gapMode,n=a===void 0?"margin":a;Qh();var i=c.useMemo(function(){return Hh(n)},[n]);return c.createElement(Vh,{styles:Wh(i,!t,n,r?"":"!important")})},Na=!1;if(typeof window<"u")try{var or=Object.defineProperty({},"passive",{get:function(){return Na=!0,!0}});window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{Na=!1}var os=Na?{passive:!1}:!1,Kh=function(s){return s.tagName==="TEXTAREA"},to=function(s,t){if(!(s instanceof Element))return!1;var r=window.getComputedStyle(s);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Kh(s)&&r[t]==="visible")},Jh=function(s){return to(s,"overflowY")},Zh=function(s){return to(s,"overflowX")},Mn=function(s,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var n=so(s,a);if(n){var i=ro(s,a),l=i[1],o=i[2];if(l>o)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},Xh=function(s){var t=s.scrollTop,r=s.scrollHeight,a=s.clientHeight;return[t,r,a]},ex=function(s){var t=s.scrollLeft,r=s.scrollWidth,a=s.clientWidth;return[t,r,a]},so=function(s,t){return s==="v"?Jh(t):Zh(t)},ro=function(s,t){return s==="v"?Xh(t):ex(t)},tx=function(s,t){return s==="h"&&t==="rtl"?-1:1},sx=function(s,t,r,a,n){var i=tx(s,window.getComputedStyle(t).direction),l=i*a,o=r.target,d=t.contains(o),m=!1,u=l>0,x=0,p=0;do{if(!o)break;var g=ro(s,o),y=g[0],f=g[1],v=g[2],b=f-v-i*y;(y||b)&&so(s,o)&&(x+=b,p+=y);var w=o.parentNode;o=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!d&&o!==document.body||d&&(t.contains(o)||t===o));return(u&&(n&&Math.abs(x)<1||!n&&l>x)||!u&&(n&&Math.abs(p)<1||!n&&-l>p))&&(m=!0),m},lr=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},Dn=function(s){return[s.deltaX,s.deltaY]},Rn=function(s){return s&&"current"in s?s.current:s},rx=function(s,t){return s[0]===t[0]&&s[1]===t[1]},ax=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},nx=0,ls=[];function ix(s){var t=c.useRef([]),r=c.useRef([0,0]),a=c.useRef(),n=c.useState(nx++)[0],i=c.useState(eo)[0],l=c.useRef(s);c.useEffect(function(){l.current=s},[s]),c.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(n));var f=Ch([s.lockRef.current],(s.shards||[]).map(Rn),!0).filter(Boolean);return f.forEach(function(v){return v.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),f.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(n))})}}},[s.inert,s.lockRef.current,s.shards]);var o=c.useCallback(function(f,v){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!l.current.allowPinchZoom;var b=lr(f),w=r.current,h="deltaX"in f?f.deltaX:w[0]-b[0],T="deltaY"in f?f.deltaY:w[1]-b[1],E,R=f.target,P=Math.abs(h)>Math.abs(T)?"h":"v";if("touches"in f&&P==="h"&&R.type==="range")return!1;var k=Mn(P,R);if(!k)return!0;if(k?E=P:(E=P==="v"?"h":"v",k=Mn(P,R)),!k)return!1;if(!a.current&&"changedTouches"in f&&(h||T)&&(a.current=E),!E)return!0;var G=a.current||E;return sx(G,v,f,G==="h"?h:T,!0)},[]),d=c.useCallback(function(f){var v=f;if(!(!ls.length||ls[ls.length-1]!==i)){var b="deltaY"in v?Dn(v):lr(v),w=t.current.filter(function(E){return E.name===v.type&&(E.target===v.target||v.target===E.shadowParent)&&rx(E.delta,b)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var h=(l.current.shards||[]).map(Rn).filter(Boolean).filter(function(E){return E.contains(v.target)}),T=h.length>0?o(v,h[0]):!l.current.noIsolation;T&&v.cancelable&&v.preventDefault()}}},[]),m=c.useCallback(function(f,v,b,w){var h={name:f,delta:v,target:b,should:w,shadowParent:ox(b)};t.current.push(h),setTimeout(function(){t.current=t.current.filter(function(T){return T!==h})},1)},[]),u=c.useCallback(function(f){r.current=lr(f),a.current=void 0},[]),x=c.useCallback(function(f){m(f.type,Dn(f),f.target,o(f,s.lockRef.current))},[]),p=c.useCallback(function(f){m(f.type,lr(f),f.target,o(f,s.lockRef.current))},[]);c.useEffect(function(){return ls.push(i),s.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:p}),document.addEventListener("wheel",d,os),document.addEventListener("touchmove",d,os),document.addEventListener("touchstart",u,os),function(){ls=ls.filter(function(f){return f!==i}),document.removeEventListener("wheel",d,os),document.removeEventListener("touchmove",d,os),document.removeEventListener("touchstart",u,os)}},[]);var g=s.removeScrollBar,y=s.inert;return c.createElement(c.Fragment,null,y?c.createElement(i,{styles:ax(n)}):null,g?c.createElement(Yh,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function ox(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const lx=Lh(Xi,ix);var ao=c.forwardRef(function(s,t){return c.createElement(Fr,Nt({},s,{ref:t,sideCar:lx}))});ao.classNames=Fr.classNames;const cx=ao;var Sa=["Enter"," "],dx=["ArrowDown","PageUp","Home"],no=["ArrowUp","PageDown","End"],ux=[...dx,...no],mx={ltr:[...Sa,"ArrowRight"],rtl:[...Sa,"ArrowLeft"]},hx={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ys="Menu",[qs,xx,gx]=xi(Ys),[ts,io]=Hs(Ys,[gx,Di,Hi]),qr=Di(),oo=Hi(),[px,ss]=ts(Ys),[fx,Ks]=ts(Ys),lo=s=>{const{__scopeMenu:t,open:r=!1,children:a,dir:n,onOpenChange:i,modal:l=!0}=s,o=qr(t),[d,m]=c.useState(null),u=c.useRef(!1),x=Mt(i),p=gi(n);return c.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),e.jsx(rh,{...o,children:e.jsx(px,{scope:t,open:r,onOpenChange:x,content:d,onContentChange:m,children:e.jsx(fx,{scope:t,onClose:c.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:u,dir:p,modal:l,children:a})})})};lo.displayName=Ys;var yx="MenuAnchor",Fa=c.forwardRef((s,t)=>{const{__scopeMenu:r,...a}=s,n=qr(r);return e.jsx(ah,{...n,...a,ref:t})});Fa.displayName=yx;var qa="MenuPortal",[bx,co]=ts(qa,{forceMount:void 0}),uo=s=>{const{__scopeMenu:t,forceMount:r,children:a,container:n}=s,i=ss(qa,t);return e.jsx(bx,{scope:t,forceMount:r,children:e.jsx(Ws,{present:r||i.open,children:e.jsx(Ui,{asChild:!0,container:n,children:a})})})};uo.displayName=qa;var gt="MenuContent",[vx,Ba]=ts(gt),mo=c.forwardRef((s,t)=>{const r=co(gt,s.__scopeMenu),{forceMount:a=r.forceMount,...n}=s,i=ss(gt,s.__scopeMenu),l=Ks(gt,s.__scopeMenu);return e.jsx(qs.Provider,{scope:s.__scopeMenu,children:e.jsx(Ws,{present:a||i.open,children:e.jsx(qs.Slot,{scope:s.__scopeMenu,children:l.modal?e.jsx(jx,{...n,ref:t}):e.jsx(wx,{...n,ref:t})})})})}),jx=c.forwardRef((s,t)=>{const r=ss(gt,s.__scopeMenu),a=c.useRef(null),n=it(t,a);return c.useEffect(()=>{const i=a.current;if(i)return _h(i)},[]),e.jsx(za,{...s,ref:n,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ke(s.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),wx=c.forwardRef((s,t)=>{const r=ss(gt,s.__scopeMenu);return e.jsx(za,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Nx=Nr("MenuContent.ScrollLock"),za=c.forwardRef((s,t)=>{const{__scopeMenu:r,loop:a=!1,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:d,onEscapeKeyDown:m,onPointerDownOutside:u,onFocusOutside:x,onInteractOutside:p,onDismiss:g,disableOutsideScroll:y,...f}=s,v=ss(gt,r),b=Ks(gt,r),w=qr(r),h=oo(r),T=xx(r),[E,R]=c.useState(null),P=c.useRef(null),k=it(t,P,v.onContentChange),G=c.useRef(0),Q=c.useRef(""),se=c.useRef(0),S=c.useRef(null),U=c.useRef("right"),ee=c.useRef(0),ge=y?cx:c.Fragment,q=y?{as:Nx,allowPinchZoom:!0}:void 0,oe=_=>{const me=Q.current+_,le=T().filter(re=>!re.disabled),D=document.activeElement,Y=le.find(re=>re.ref.current===D)?.textValue,he=le.map(re=>re.textValue),Ne=Rx(he,me,Y),ye=le.find(re=>re.textValue===Ne)?.ref.current;(function re(ce){Q.current=ce,window.clearTimeout(G.current),ce!==""&&(G.current=window.setTimeout(()=>re(""),1e3))})(me),ye&&setTimeout(()=>ye.focus())};c.useEffect(()=>()=>window.clearTimeout(G.current),[]),Tu();const O=c.useCallback(_=>U.current===S.current?.side&&Ox(_,S.current?.area),[]);return e.jsx(vx,{scope:r,searchRef:Q,onItemEnter:c.useCallback(_=>{O(_)&&_.preventDefault()},[O]),onItemLeave:c.useCallback(_=>{O(_)||(P.current?.focus(),R(null))},[O]),onTriggerLeave:c.useCallback(_=>{O(_)&&_.preventDefault()},[O]),pointerGraceTimerRef:se,onPointerGraceIntentChange:c.useCallback(_=>{S.current=_},[]),children:e.jsx(ge,{...q,children:e.jsx(bi,{asChild:!0,trapped:n,onMountAutoFocus:ke(i,_=>{_.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(fi,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:m,onPointerDownOutside:u,onFocusOutside:x,onInteractOutside:p,onDismiss:g,children:e.jsx(jh,{asChild:!0,...h,dir:b.dir,orientation:"vertical",loop:a,currentTabStopId:E,onCurrentTabStopIdChange:R,onEntryFocus:ke(d,_=>{b.isUsingKeyboardRef.current||_.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(nh,{role:"menu","aria-orientation":"vertical","data-state":To(v.open),"data-radix-menu-content":"",dir:b.dir,...w,...f,ref:k,style:{outline:"none",...f.style},onKeyDown:ke(f.onKeyDown,_=>{const le=_.target.closest("[data-radix-menu-content]")===_.currentTarget,D=_.ctrlKey||_.altKey||_.metaKey,Y=_.key.length===1;le&&(_.key==="Tab"&&_.preventDefault(),!D&&Y&&oe(_.key));const he=P.current;if(_.target!==he||!ux.includes(_.key))return;_.preventDefault();const ye=T().filter(re=>!re.disabled).map(re=>re.ref.current);no.includes(_.key)&&ye.reverse(),Mx(ye)}),onBlur:ke(s.onBlur,_=>{_.currentTarget.contains(_.target)||(window.clearTimeout(G.current),Q.current="")}),onPointerMove:ke(s.onPointerMove,Bs(_=>{const me=_.target,le=ee.current!==_.clientX;if(_.currentTarget.contains(me)&&le){const D=_.clientX>ee.current?"right":"left";U.current=D,ee.current=_.clientX}}))})})})})})})});mo.displayName=gt;var Sx="MenuGroup",Ua=c.forwardRef((s,t)=>{const{__scopeMenu:r,...a}=s;return e.jsx(Xe.div,{role:"group",...a,ref:t})});Ua.displayName=Sx;var kx="MenuLabel",ho=c.forwardRef((s,t)=>{const{__scopeMenu:r,...a}=s;return e.jsx(Xe.div,{...a,ref:t})});ho.displayName=kx;var Tr="MenuItem",Ln="menu.itemSelect",Br=c.forwardRef((s,t)=>{const{disabled:r=!1,onSelect:a,...n}=s,i=c.useRef(null),l=Ks(Tr,s.__scopeMenu),o=Ba(Tr,s.__scopeMenu),d=it(t,i),m=c.useRef(!1),u=()=>{const x=i.current;if(!r&&x){const p=new CustomEvent(Ln,{bubbles:!0,cancelable:!0});x.addEventListener(Ln,g=>a?.(g),{once:!0}),hi(x,p),p.defaultPrevented?m.current=!1:l.onClose()}};return e.jsx(xo,{...n,ref:d,disabled:r,onClick:ke(s.onClick,u),onPointerDown:x=>{s.onPointerDown?.(x),m.current=!0},onPointerUp:ke(s.onPointerUp,x=>{m.current||x.currentTarget?.click()}),onKeyDown:ke(s.onKeyDown,x=>{const p=o.searchRef.current!=="";r||p&&x.key===" "||Sa.includes(x.key)&&(x.currentTarget.click(),x.preventDefault())})})});Br.displayName=Tr;var xo=c.forwardRef((s,t)=>{const{__scopeMenu:r,disabled:a=!1,textValue:n,...i}=s,l=Ba(Tr,r),o=oo(r),d=c.useRef(null),m=it(t,d),[u,x]=c.useState(!1),[p,g]=c.useState("");return c.useEffect(()=>{const y=d.current;y&&g((y.textContent??"").trim())},[i.children]),e.jsx(qs.ItemSlot,{scope:r,disabled:a,textValue:n??p,children:e.jsx(wh,{asChild:!0,...o,focusable:!a,children:e.jsx(Xe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...i,ref:m,onPointerMove:ke(s.onPointerMove,Bs(y=>{a?l.onItemLeave(y):(l.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ke(s.onPointerLeave,Bs(y=>l.onItemLeave(y))),onFocus:ke(s.onFocus,()=>x(!0)),onBlur:ke(s.onBlur,()=>x(!1))})})})}),_x="MenuCheckboxItem",go=c.forwardRef((s,t)=>{const{checked:r=!1,onCheckedChange:a,...n}=s;return e.jsx(vo,{scope:s.__scopeMenu,checked:r,children:e.jsx(Br,{role:"menuitemcheckbox","aria-checked":Ar(r)?"mixed":r,...n,ref:t,"data-state":Ha(r),onSelect:ke(n.onSelect,()=>a?.(Ar(r)?!0:!r),{checkForDefaultPrevented:!1})})})});go.displayName=_x;var po="MenuRadioGroup",[Cx,Tx]=ts(po,{value:void 0,onValueChange:()=>{}}),fo=c.forwardRef((s,t)=>{const{value:r,onValueChange:a,...n}=s,i=Mt(a);return e.jsx(Cx,{scope:s.__scopeMenu,value:r,onValueChange:i,children:e.jsx(Ua,{...n,ref:t})})});fo.displayName=po;var yo="MenuRadioItem",bo=c.forwardRef((s,t)=>{const{value:r,...a}=s,n=Tx(yo,s.__scopeMenu),i=r===n.value;return e.jsx(vo,{scope:s.__scopeMenu,checked:i,children:e.jsx(Br,{role:"menuitemradio","aria-checked":i,...a,ref:t,"data-state":Ha(i),onSelect:ke(a.onSelect,()=>n.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});bo.displayName=yo;var Ga="MenuItemIndicator",[vo,Ax]=ts(Ga,{checked:!1}),jo=c.forwardRef((s,t)=>{const{__scopeMenu:r,forceMount:a,...n}=s,i=Ax(Ga,r);return e.jsx(Ws,{present:a||Ar(i.checked)||i.checked===!0,children:e.jsx(Xe.span,{...n,ref:t,"data-state":Ha(i.checked)})})});jo.displayName=Ga;var Ex="MenuSeparator",wo=c.forwardRef((s,t)=>{const{__scopeMenu:r,...a}=s;return e.jsx(Xe.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})});wo.displayName=Ex;var Px="MenuArrow",No=c.forwardRef((s,t)=>{const{__scopeMenu:r,...a}=s,n=qr(r);return e.jsx(ih,{...n,...a,ref:t})});No.displayName=Px;var Ix="MenuSub",[I0,So]=ts(Ix),Is="MenuSubTrigger",ko=c.forwardRef((s,t)=>{const r=ss(Is,s.__scopeMenu),a=Ks(Is,s.__scopeMenu),n=So(Is,s.__scopeMenu),i=Ba(Is,s.__scopeMenu),l=c.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:d}=i,m={__scopeMenu:s.__scopeMenu},u=c.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return c.useEffect(()=>u,[u]),c.useEffect(()=>{const x=o.current;return()=>{window.clearTimeout(x),d(null)}},[o,d]),e.jsx(Fa,{asChild:!0,...m,children:e.jsx(xo,{id:n.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":n.contentId,"data-state":To(r.open),...s,ref:Dr(t,n.onTriggerChange),onClick:x=>{s.onClick?.(x),!(s.disabled||x.defaultPrevented)&&(x.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ke(s.onPointerMove,Bs(x=>{i.onItemEnter(x),!x.defaultPrevented&&!s.disabled&&!r.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:ke(s.onPointerLeave,Bs(x=>{u();const p=r.content?.getBoundingClientRect();if(p){const g=r.content?.dataset.side,y=g==="right",f=y?-5:5,v=p[y?"left":"right"],b=p[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:x.clientX+f,y:x.clientY},{x:v,y:p.top},{x:b,y:p.top},{x:b,y:p.bottom},{x:v,y:p.bottom}],side:g}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(x),x.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ke(s.onKeyDown,x=>{const p=i.searchRef.current!=="";s.disabled||p&&x.key===" "||mx[a.dir].includes(x.key)&&(r.onOpenChange(!0),r.content?.focus(),x.preventDefault())})})})});ko.displayName=Is;var _o="MenuSubContent",Co=c.forwardRef((s,t)=>{const r=co(gt,s.__scopeMenu),{forceMount:a=r.forceMount,...n}=s,i=ss(gt,s.__scopeMenu),l=Ks(gt,s.__scopeMenu),o=So(_o,s.__scopeMenu),d=c.useRef(null),m=it(t,d);return e.jsx(qs.Provider,{scope:s.__scopeMenu,children:e.jsx(Ws,{present:a||i.open,children:e.jsx(qs.Slot,{scope:s.__scopeMenu,children:e.jsx(za,{id:o.contentId,"aria-labelledby":o.triggerId,...n,ref:m,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{l.isUsingKeyboardRef.current&&d.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ke(s.onFocusOutside,u=>{u.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ke(s.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:ke(s.onKeyDown,u=>{const x=u.currentTarget.contains(u.target),p=hx[l.dir].includes(u.key);x&&p&&(i.onOpenChange(!1),o.trigger?.focus(),u.preventDefault())})})})})})});Co.displayName=_o;function To(s){return s?"open":"closed"}function Ar(s){return s==="indeterminate"}function Ha(s){return Ar(s)?"indeterminate":s?"checked":"unchecked"}function Mx(s){const t=document.activeElement;for(const r of s)if(r===t||(r.focus(),document.activeElement!==t))return}function Dx(s,t){return s.map((r,a)=>s[(t+a)%s.length])}function Rx(s,t,r){const n=t.length>1&&Array.from(t).every(m=>m===t[0])?t[0]:t,i=r?s.indexOf(r):-1;let l=Dx(s,Math.max(i,0));n.length===1&&(l=l.filter(m=>m!==r));const d=l.find(m=>m.toLowerCase().startsWith(n.toLowerCase()));return d!==r?d:void 0}function Lx(s,t){const{x:r,y:a}=s;let n=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const o=t[i],d=t[l],m=o.x,u=o.y,x=d.x,p=d.y;u>a!=p>a&&r<(x-m)*(a-u)/(p-u)+m&&(n=!n)}return n}function Ox(s,t){if(!t)return!1;const r={x:s.clientX,y:s.clientY};return Lx(r,t)}function Bs(s){return t=>t.pointerType==="mouse"?s(t):void 0}var $x=lo,Fx=Fa,qx=uo,Bx=mo,zx=Ua,Ux=ho,Gx=Br,Hx=go,Vx=fo,Wx=bo,Qx=jo,Yx=wo,Kx=No,Jx=ko,Zx=Co,zr="DropdownMenu",[Xx,M0]=Hs(zr,[io]),et=io(),[eg,Ao]=Xx(zr),Eo=s=>{const{__scopeDropdownMenu:t,children:r,dir:a,open:n,defaultOpen:i,onOpenChange:l,modal:o=!0}=s,d=et(t),m=c.useRef(null),[u,x]=mi({prop:n,defaultProp:i??!1,onChange:l,caller:zr});return e.jsx(eg,{scope:t,triggerId:ya(),triggerRef:m,contentId:ya(),open:u,onOpenChange:x,onOpenToggle:c.useCallback(()=>x(p=>!p),[x]),modal:o,children:e.jsx($x,{...d,open:u,onOpenChange:x,dir:a,modal:o,children:r})})};Eo.displayName=zr;var Po="DropdownMenuTrigger",Io=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,disabled:a=!1,...n}=s,i=Ao(Po,r),l=et(r);return e.jsx(Fx,{asChild:!0,...l,children:e.jsx(Xe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...n,ref:Dr(t,i.triggerRef),onPointerDown:ke(s.onPointerDown,o=>{!a&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:ke(s.onKeyDown,o=>{a||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});Io.displayName=Po;var tg="DropdownMenuPortal",Mo=s=>{const{__scopeDropdownMenu:t,...r}=s,a=et(t);return e.jsx(qx,{...a,...r})};Mo.displayName=tg;var Do="DropdownMenuContent",Ro=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=Ao(Do,r),i=et(r),l=c.useRef(!1);return e.jsx(Bx,{id:n.contentId,"aria-labelledby":n.triggerId,...i,...a,ref:t,onCloseAutoFocus:ke(s.onCloseAutoFocus,o=>{l.current||n.triggerRef.current?.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:ke(s.onInteractOutside,o=>{const d=o.detail.originalEvent,m=d.button===0&&d.ctrlKey===!0,u=d.button===2||m;(!n.modal||u)&&(l.current=!0)}),style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ro.displayName=Do;var sg="DropdownMenuGroup",rg=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=et(r);return e.jsx(zx,{...n,...a,ref:t})});rg.displayName=sg;var ag="DropdownMenuLabel",Lo=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=et(r);return e.jsx(Ux,{...n,...a,ref:t})});Lo.displayName=ag;var ng="DropdownMenuItem",Oo=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=et(r);return e.jsx(Gx,{...n,...a,ref:t})});Oo.displayName=ng;var ig="DropdownMenuCheckboxItem",og=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=et(r);return e.jsx(Hx,{...n,...a,ref:t})});og.displayName=ig;var lg="DropdownMenuRadioGroup",cg=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=et(r);return e.jsx(Vx,{...n,...a,ref:t})});cg.displayName=lg;var dg="DropdownMenuRadioItem",ug=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=et(r);return e.jsx(Wx,{...n,...a,ref:t})});ug.displayName=dg;var mg="DropdownMenuItemIndicator",hg=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=et(r);return e.jsx(Qx,{...n,...a,ref:t})});hg.displayName=mg;var xg="DropdownMenuSeparator",$o=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=et(r);return e.jsx(Yx,{...n,...a,ref:t})});$o.displayName=xg;var gg="DropdownMenuArrow",pg=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=et(r);return e.jsx(Kx,{...n,...a,ref:t})});pg.displayName=gg;var fg="DropdownMenuSubTrigger",yg=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=et(r);return e.jsx(Jx,{...n,...a,ref:t})});yg.displayName=fg;var bg="DropdownMenuSubContent",vg=c.forwardRef((s,t)=>{const{__scopeDropdownMenu:r,...a}=s,n=et(r);return e.jsx(Zx,{...n,...a,ref:t,style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});vg.displayName=bg;var jg=Eo,wg=Io,Ng=Mo,Sg=Ro,kg=Lo,_g=Oo,Cg=$o;function On({...s}){return e.jsx(jg,{"data-slot":"dropdown-menu",...s})}function $n({...s}){return e.jsx(wg,{"data-slot":"dropdown-menu-trigger",...s})}function Fn({className:s,sideOffset:t=4,...r}){return e.jsx(Ng,{children:e.jsx(Sg,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Ce("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...r})})}function As({className:s,inset:t,variant:r="default",...a}){return e.jsx(_g,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":r,className:Ce("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}function qn({className:s,inset:t,...r}){return e.jsx(kg,{"data-slot":"dropdown-menu-label","data-inset":t,className:Ce("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",s),...r})}function Bn({className:s,...t}){return e.jsx(Cg,{"data-slot":"dropdown-menu-separator",className:Ce("bg-border -mx-1 my-1 h-px",s),...t})}const Tg={nav:{dashboard:"Dashboard",learning:"Learning",practice:"Practice",analytics:"Analytics",account:"Account",aiTutor:"AI Tutor",lessons:"Interactive Lessons",lessonsDesc:"Structured lessons with AI-powered explanations",visualLearning:"Visual Learning",visualLearningDesc:"Learn through videos and visual content",practiceMode:"Topical Practice",practiceModeDesc:"Practice questions with instant feedback",mockExams:"Mock Exams",mockExamsDesc:"Full-length exams with detailed grading",flashcards:"Flashcards",flashcardsDesc:"Quick review with flashcards"},welcome:"Welcome back",teacherTasks:"Teacher Assigned Tasks",createStudyPlan:"Create New Study Plan",studySchedule:"Study Schedule",date:"Date",studyTime:"Study Time",topics:"Topics",questions:"Questions",status:"Status",planned:"Planned",completed:"Completed",missed:"Missed",hours:"hours",minutes:"minutes",expandQuestions:"Show Questions",collapseQuestions:"Hide Questions",resumePractice:"Resume Practice",suggestedForYou:"Suggested for You",studyRecommendations:"Study Recommendations",recentActivity:"Recent Activity",achievements:"Achievements",studyStreak:"Study Streak",weeklyGoal:"Weekly Goal",upcomingDeadlines:"Upcoming Deadlines",viewAll:"View All",startPractice:"Start Practice",continue:"Continue",newBadge:"New Badge!",consecutiveDays:"{count} consecutive days",hoursThisWeek:"{count} hours this week",questionsCompleted:"{count} questions completed today",mockExam:"Mock Exam",visualLearning:"Visual Learning",aiTutor:"AI Tutor Session",askAI:"Ask AI Tutor",aiTutorDescription:"Get instant help with any topic",curriculum:{label:"Curriculum",igcse:"IGCSE",oLevels:"O Levels",aLevels:"A Levels",edexcel:"Edexcel",ib:"IB System"}};function Ag(){const{setCurrentPage:s,user:t,setUser:r,curriculum:a,setCurriculum:n,studySessions:i,setStudySessions:l}=Re();Gs({pageTitle:"Student Dashboard",pageUrl:"/dashboard",trackClicks:!0,trackTime:!0,trackScroll:!0}),c.useState({});const[o,d]=c.useState([]),[m,u]=c.useState(!1),[x,p]=c.useState(0),[g,y]=c.useState([]),[f,v]=c.useState({currentStreak:0,longestStreak:0}),[b,w]=c.useState({preferredStudyTime:"Morning",averageSessionLength:30,topicsPerSession:1,retentionRate:0}),[h,T]=c.useState(!0),[E,R]=c.useState(null),[P,k]=c.useState(null),[G,Q]=c.useState(!1),[se,S]=c.useState([]);c.useEffect(()=>{if(!t?.id)return;const j=async()=>{const $=await re();S($),console.log(" Auto-refreshed recent activities:",$.length)};j();const N=setInterval(j,3e4);return()=>clearInterval(N)},[t?.id]);const[,U]=c.useState(0);c.useEffect(()=>{const j=setInterval(()=>{U(N=>N+1)},6e4);return()=>clearInterval(j)},[]);const[ee,ge]=c.useState({timeBuffers:0,events:0,totalSeconds:0}),q=Tg;c.useEffect(()=>{console.log("Dashboard mounted, user:",t),t?.id?(console.log("User authenticated, fetching study plans for:",t.id),_()):console.log("No authenticated user yet, skipping study plans fetch")},[t?.id]),c.useEffect(()=>{t?.id?(console.log(" Dashboard: Quick load starting..."),(async()=>{try{T(!1);const[N,$]=await Promise.all([De.forceRefreshAnalytics(t.id),re()]);R(N),S($),k(new Date),console.log(" Quick load complete:",N.today.studyTimeMinutes,"minutes"),setTimeout(async()=>{try{const[H,Z,X]=await Promise.all([It.getUserAnalytics(t.id),It.getStudyStreaks(t.id),It.getLearningPatterns(t.id)]);y(H),v(Z),w(X),console.log(" Background data loaded")}catch(H){console.log(" Background fetch error (non-critical):",H)}},100),le()}catch(N){console.log(" Dashboard: Quick load error:",N),T(!1)}})()):(R(null),y([]),v({currentStreak:0,longestStreak:0}),w({preferredStudyTime:"Morning",averageSessionLength:30,topicsPerSession:1,retentionRate:0}),T(!1))},[t?.id]),c.useEffect(()=>{if(!t?.id)return;console.log(" Dashboard: Setting up real-time analytics subscription");const j=F.channel("dashboard-analytics-realtime").on("postgres_changes",{event:"*",schema:"public",table:"daily_analytics",filter:`user_id=eq.${t.id}`},N=>{console.log(" Dashboard: Real-time analytics update received:",N),De.forceRefreshAnalytics(t.id).then($=>{R($),k(new Date)})}).subscribe();return()=>{console.log(" Dashboard: Unsubscribing from analytics updates"),F.removeChannel(j)}},[t?.id]),c.useEffect(()=>{if(!t?.id)return;const j=()=>{const $=Ut.getBufferStatus();ge($)};j();const N=setInterval(j,5e3);return()=>clearInterval(N)},[t?.id]);const oe=He.useCallback(async()=>{if(t?.id)try{console.log(" Manual refresh...");const[j,N]=await Promise.all([De.forceRefreshAnalytics(t.id),re()]);R(j),S(N),k(new Date),console.log(" Refresh complete")}catch(j){console.error(" Refresh error:",j)}},[t?.id]),O=He.useCallback(async()=>{if(t?.id){console.log(" Force refreshing analytics..."),T(!0);try{const j=await De.resetAndGetFreshAnalytics(t.id);R(j),k(new Date),console.log(" Analytics force refreshed, study time:",j.today.studyTimeMinutes)}catch(j){console.error(" Failed to force refresh analytics:",j)}finally{T(!1)}}},[t?.id]),_=async()=>{if(!t?.id){console.log("No authenticated user, skipping study plans fetch"),d([]);return}u(!0);try{const{studyPlansService:j}=await Ms(()=>Promise.resolve().then(()=>pr),void 0),{data:N,error:$}=await j.getUserStudyPlans(t.id);$?(console.error("Error fetching study plans:",$),d([])):(console.log("Study plans fetched successfully:",N),d(N||[]))}catch(j){console.error("Error importing study plans service:",j),d([])}finally{u(!1)}},me=()=>{console.log(" Manual refresh triggered by user"),oe()},le=async()=>{if(t?.id)try{await De.trackPlatformActivity(t.id,"dashboard_visit",0,"Dashboard","General"),console.log(" Dashboard visit tracked")}catch(j){console.log("Dashboard visit tracking failed:",j)}},D=()=>{if(g.length===0)return 0;const j=g.reduce((N,$)=>N+$.completionPercentage,0);return Math.round(j/g.length)},Y=()=>g.reduce((j,N)=>j+N.timeSpent,0),he=()=>{if(g.length===0)return 0;const j=g.reduce((N,$)=>N+$.accuracy,0);return Math.round(j/g.length)},Ne=(j=3)=>g.sort((N,$)=>$.accuracy-N.accuracy).slice(0,j),ye=(j=3)=>g.filter(N=>N.accuracy<70).sort((N,$)=>N.accuracy-$.accuracy).slice(0,j),re=async()=>{try{if(!t?.id)return console.log(" No user ID for recent activities"),[];console.log(" Fetching recent page visits and activities for user:",t.id);const j=Ut.getRecentPageVisits(t.id,20);console.log(" Page visits from buffer:",j.length,j);const{data:N,error:$}=await F.from("learning_activities").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(10);$?console.log(" Database query error (non-critical):",$):console.log(" Learning activities from DB:",N?.length||0);const H=[];j&&j.length>0?(j.forEach(X=>{H.push({id:`visit_${X.timestamp}`,type:"page_visit",subject:X.pageName,topic:X.pageName,score:0,timestampRaw:X.timestamp,activityType:X.page,timestamp:new Date(X.timestamp).getTime(),pageName:X.pageName,description:`Studied on ${X.pageName}`,pageKey:X.page})}),console.log(" Added page visits to activities:",j.length)):console.log(" No page visits found in buffer"),N&&N.length>0&&(N.forEach(X=>{H.push({id:`learning_${X.id}`,type:"learning_activity",subject:X.subject_name||"Unknown Subject",topic:X.topic_name||"Unknown Topic",score:X.accuracy||0,timestampRaw:X.created_at,activityType:X.activity_type,duration:X.duration,metadata:X.metadata,timestamp:new Date(X.created_at).getTime(),pageName:ce(X.activity_type),description:A(X.activity_type,X.topic_name,X.accuracy)})}),console.log(" Added learning activities:",N.length)),H.sort((X,fe)=>fe.timestamp-X.timestamp);const Z=H.slice(0,10);return console.log(" FINAL Recent activities:",Z.length),console.log(" Activities detail:",Z),Z.forEach(X=>{console.log(`  - ${X.pageName||X.activityType}: ${X.time}`)}),Z}catch(j){return console.error(" Error in getRecentActivities:",j),[]}},ce=j=>({"ai-tutor":"AI Tutor & Lessons",practice:"Practice Mode",flashcards:"Flashcards","visual-learning":"Visual Learning","mock-exam-p1":"Mock Exam Paper 1","mock-exam-p2":"Mock Exam Paper 2",question:"Practice Mode",lesson:"AI Tutor & Lessons",video_lesson:"Visual Learning",flashcard:"Flashcards",mock_exam:"Mock Exams",practice_session:"Practice Mode",ai_tutor:"AI Tutor"})[j]||"Study Activity",Te=j=>({"ai-tutor":"ai-tutor-topic-selection",practice:"topic-selection",flashcards:"flashcard-selection","visual-learning":"visual-learning","mock-exam-p1":"mock-exam-selection","mock-exam-p2":"mock-exam-selection",question:"topic-selection",lesson:"ai-tutor-topic-selection",video_lesson:"visual-learning",flashcard:"flashcard-selection",mock_exam:"mock-exam-selection",ai_tutor:"ai-tutor-topic-selection",page_visit:j.pageKey||"dashboard"})[j.pageKey||j.activityType]||"dashboard",A=(j,N,$)=>{switch(j){case"question":return $?`Answered questions on ${N} (${$}% accuracy)`:`Practiced questions on ${N}`;case"lesson":return`Studied lesson: ${N}`;case"video_lesson":return`Watched video lesson: ${N}`;case"flashcard":return $?`Reviewed flashcards on ${N} (${$}% mastery)`:`Reviewed flashcards on ${N}`;case"mock_exam":return $?`Completed mock exam: ${N} (${$}% score)`:`Completed mock exam: ${N}`;case"practice_session":return`Completed practice session on ${N}`;case"ai_tutor":return`Used AI tutor for ${N}`;default:return`Activity on ${N}`}},z=j=>{const N=new Date,$=new Date(j),H=N.getTime()-$.getTime(),Z=Math.floor(H/(1e3*60)),X=Math.floor(H/(1e3*60*60)),fe=Math.floor(H/(1e3*60*60*24));if(Z<1)return"Just now";if(Z<60)return`${Z} ${Z===1?"minute":"minutes"} ago`;if(X<24)return`${X} ${X===1?"hour":"hours"} ago`;if(fe===1)return"Yesterday";if(fe<7)return`${fe} days ago`;if(fe<30){const Le=Math.floor(fe/7);return`${Le} ${Le===1?"week":"weeks"} ago`}return $.toLocaleDateString()},ie=j=>{const N=Math.floor(j/3600),$=Math.floor(j%3600/60);return N>0?`${N}h ${$}m`:`${$}m`};(()=>{const j=()=>"IGCSE",N=fe=>{const Le=g.filter(tt=>tt.subjectName.toLowerCase().includes(fe.toLowerCase()));return Le.length>0?Le[0].topicName:"Start learning"},$=fe=>g.filter(tt=>tt.subjectName.toLowerCase().includes(fe.toLowerCase())).length||0,H=j(),Z=fe=>{const Le=g.filter(ot=>ot.subjectName.toLowerCase().includes(fe.toLowerCase()));if(Le.length===0)return{progress:0,completed:0,accuracy:0,timeSpent:0};const tt=Math.round(Le.reduce((ot,mt)=>ot+mt.completionPercentage,0)/Le.length),pe=Math.round(Le.reduce((ot,mt)=>ot+mt.lessonsCompleted,0)),Wt=Math.round(Le.reduce((ot,mt)=>ot+mt.accuracy,0)/Le.length),rs=Le.reduce((ot,mt)=>ot+mt.timeSpent,0);return{progress:tt,completed:pe,accuracy:Wt,timeSpent:rs}};return[{name:"Mathematics",progress:Z("Mathematics").progress,nextTopic:N("Mathematics"),color:"bg-imtehaan-accent",chapters:$("Mathematics"),completed:Z("Mathematics").completed,level:H,accuracy:Z("Mathematics").accuracy,timeSpent:Z("Mathematics").timeSpent},{name:"Physics",progress:Z("Physics").progress,nextTopic:N("Physics"),color:"bg-imtehaan-secondary",chapters:$("Physics"),completed:Z("Physics").completed,level:H,accuracy:Z("Physics").accuracy,timeSpent:Z("Physics").timeSpent},{name:"Chemistry",progress:Z("Chemistry").progress,nextTopic:N("Chemistry"),color:"bg-imtehaan-warning",chapters:$("Chemistry"),completed:Z("Chemistry").completed,level:H,accuracy:Z("Chemistry").accuracy,timeSpent:Z("Chemistry").timeSpent},{name:"Biology",progress:Z("Biology").progress,nextTopic:N("Biology"),color:"bg-imtehaan-primary",chapters:$("Biology"),completed:Z("Biology").completed,level:H,accuracy:Z("Biology").accuracy,timeSpent:Z("Biology").timeSpent}]})();const ve=()=>{const j=["Mathematics","Physics","Chemistry"];let N=j[0],$=100;return j.forEach(H=>{const Z=g.filter(X=>X.subjectName===H);if(Z.length>0){const X=Z.reduce((tt,pe)=>tt+pe.questionsAttempted,0),fe=Z.reduce((tt,pe)=>tt+pe.questionsCorrect,0),Le=X>0?Math.round(fe/X*100):0;Le<$&&($=Le,N=H)}}),N},be=[{icon:ur,title:`${f.currentStreak}-Day Streak`,description:"Studied every day this week",isNew:f.currentStreak>=7},{icon:_e,title:"Perfect Score",description:`Got ${he()}% average accuracy`,isNew:he()>=90},{icon:ct,title:"Quick Learner",description:`Completed ${g.reduce((j,N)=>j+N.questionsAttempted,0)} questions total`,isNew:g.reduce((j,N)=>j+N.questionsAttempted,0)>=50}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("nav",{className:"bg-gradient-to-r from-white via-blue-50/30 to-purple-50/30 border-b border-blue-100/50 sticky top-0 z-40 shadow-sm backdrop-blur-sm",children:e.jsx("div",{className:"max-w-6xl mx-auto px-0 sm:px-1 lg:px-2",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Os,{size:"md",showText:!0,className:"-mt-2"}),e.jsx("div",{className:"ml-4 hidden sm:block",children:e.jsx("div",{className:"w-px h-8 bg-gradient-to-b from-transparent via-gray-300 to-transparent"})})]}),e.jsx("div",{className:"hidden md:block ml-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>s("dashboard"),className:"flex items-center px-4 py-2 text-imtehaan-primary font-medium rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200/50 hover:from-blue-100 hover:to-purple-100 hover:border-blue-300 transition-all duration-200 shadow-sm",children:[e.jsx(Ca,{className:"h-4 w-4 mr-2"}),q.nav.dashboard]}),e.jsxs(On,{children:[e.jsx($n,{asChild:!0,children:e.jsxs("button",{className:"flex items-center px-4 py-2 text-gray-700 hover:text-imtehaan-primary font-medium rounded-lg hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 hover:border hover:border-blue-200/50 transition-all duration-200",children:[e.jsx(Mr,{className:"h-4 w-4 mr-2"}),q.nav.learning,e.jsx(ia,{className:"h-4 w-4 ml-1"})]})}),e.jsxs(Fn,{className:"w-80",align:"start",children:[e.jsx(qn,{className:"font-semibold",children:"Choose Learning Mode"}),e.jsx(Bn,{}),e.jsx(As,{onClick:()=>s("ai-tutor-topic-selection"),className:"p-0 hover:bg-transparent cursor-default",children:e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-blue-50 transition-colors w-full cursor-pointer",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(rt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:q.nav.lessons}),e.jsx("p",{className:"text-sm text-gray-600",children:q.nav.lessonsDesc})]})]})}),e.jsx(As,{onClick:()=>s("visual-learning"),className:"p-0 hover:bg-transparent cursor-default",children:e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-green-50 transition-colors w-full cursor-pointer",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(pt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:q.nav.visualLearning}),e.jsx("p",{className:"text-sm text-gray-600",children:q.nav.visualLearningDesc})]})]})})]})]}),e.jsxs(On,{children:[e.jsx($n,{asChild:!0,children:e.jsxs("button",{className:"flex items-center px-4 py-2 text-gray-700 hover:text-imtehaan-primary font-medium rounded-lg hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 hover:border hover:border-blue-200/50 transition-all duration-200",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),q.nav.practice,e.jsx(ia,{className:"h-4 w-4 ml-1"})]})}),e.jsxs(Fn,{className:"w-80",align:"start",children:[e.jsx(qn,{className:"font-semibold",children:"Choose Practice Mode"}),e.jsx(Bn,{}),e.jsx(As,{onClick:()=>s("practice"),className:"p-0 hover:bg-transparent cursor-default",children:e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-orange-50 transition-colors w-full cursor-pointer",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(qe,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:q.nav.practiceMode}),e.jsx("p",{className:"text-sm text-gray-600",children:q.nav.practiceModeDesc})]})]})}),e.jsx(As,{onClick:()=>s("mock-exam-selection"),className:"p-0 hover:bg-transparent cursor-default",children:e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-purple-50 transition-colors w-full cursor-pointer",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ct,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:q.nav.mockExams}),e.jsx("p",{className:"text-sm text-gray-600",children:q.nav.mockExamsDesc})]})]})}),e.jsx(As,{onClick:()=>s("flashcard-selection"),className:"p-0 hover:bg-transparent cursor-default",children:e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-pink-50 transition-colors w-full cursor-pointer",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500 to-rose-600 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ca,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:q.nav.flashcards}),e.jsx("p",{className:"text-sm text-gray-600",children:q.nav.flashcardsDesc})]})]})})]})]}),e.jsxs("button",{onClick:()=>s("analytics"),className:"flex items-center px-4 py-2 text-gray-700 hover:text-imtehaan-primary font-medium rounded-lg hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 hover:border hover:border-blue-200/50 transition-all duration-200",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),q.nav.analytics]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"hidden sm:flex items-center",children:e.jsx("div",{className:"px-3 py-1.5 bg-gradient-to-r from-teal-500 to-blue-600 text-white text-xs font-semibold rounded-full shadow-sm",children:q.curriculum.igcse})}),e.jsx("div",{className:"sm:hidden",children:e.jsx("div",{className:"px-2 py-1 bg-gradient-to-r from-teal-500 to-blue-600 text-white text-xs font-semibold rounded-full",children:q.curriculum.igcse})}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>s("settings"),className:"text-gray-600 hover:text-imtehaan-primary hover:bg-blue-50/50 rounded-lg transition-all duration-200",children:e.jsx(Kt,{className:"h-4 w-4"})}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>{localStorage.removeItem("imtehaan_current_page"),r(null),s("landing")},className:"hover:bg-red-50 hover:text-red-600 hover:border-red-300 transition-colors",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-0 sm:px-1 lg:px-2 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h1",{className:"text-3xl font-bold text-black mb-2",children:[q.welcome,", ",t?.full_name||t?.email?.split("@")[0]||"Student","! "]}),e.jsx("p",{className:"text-gray-600",children:"Ready to continue your learning journey?"}),E&&e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Today's Study Goal"}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[E.today.studyTimeMinutes," / 60 minutes"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-500",style:{width:`${Math.min(E.today.studyTimeMinutes/60*100,100)}%`}})}),E.today.studyTimeMinutes>=60?e.jsxs("div",{className:"flex items-center gap-1 text-green-600 text-xs font-medium mt-1",children:[e.jsx(cr,{className:"h-3 w-3"}),"Goal achieved today!"]}):e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[60-E.today.studyTimeMinutes," min remaining"]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[ee.totalSeconds>0&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-xs font-medium text-blue-700",children:[ee.totalSeconds,"s buffered  Syncing..."]})]}),e.jsx(C,{variant:"outline",size:"sm",onClick:O,disabled:h,className:"flex items-center gap-2 hover:bg-blue-50 ml-auto",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),"Refreshing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"h-4 w-4"}),"Refresh Analytics"]})})]}),!h&&g.length>0&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overall Progress"}),e.jsxs("p",{className:"text-2xl font-bold text-imtehaan-primary",children:[D(),"%"]})]}),e.jsx(Ue,{className:"h-8 w-8 text-imtehaan-primary"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Study Streak"}),e.jsxs("p",{className:"text-2xl font-bold text-imtehaan-error",children:[f.currentStreak," days"]})]}),e.jsx(ur,{className:"h-8 w-8 text-imtehaan-error"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Average Accuracy"}),e.jsxs("p",{className:"text-2xl font-bold text-imtehaan-success",children:[he(),"%"]})]}),e.jsx(_e,{className:"h-8 w-8 text-imtehaan-success"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Time Spent"}),e.jsx("p",{className:"text-2xl font-bold text-imtehaan-accent",children:G?e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-imtehaan-accent"}):ie(E?.today?.studyTimeMinutes?E.today.studyTimeMinutes*60:0)})]}),e.jsx(Fe,{className:"h-8 w-8 text-imtehaan-accent"})]})})]})]})}),e.jsx("div",{className:"mb-8",children:e.jsx(M,{className:"bg-white border border-gray-200 shadow-lg",children:e.jsx(L,{className:"p-6",children:m?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your study schedule..."})]})}):o.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:o.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>p(j=>j===0?o.length-1:j-1),disabled:o.length===1,className:"h-8 w-8 p-0",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-gray-600 font-medium px-2",children:[x+1," / ",o.length]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>p(j=>j===o.length-1?0:j+1),disabled:o.length===1,className:"h-8 w-8 p-0",children:e.jsx(Ae,{className:"h-4 w-4"})})]})}),o.length===1&&e.jsx("div",{}),e.jsxs(C,{onClick:()=>s("study-plan"),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Create New"]})]}),(()=>{const j=o[x],N=Math.floor(j.study_time_minutes/60),$=j.study_time_minutes%60;return e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(qt,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg text-gray-900 mb-1",children:j.plan_name}),e.jsxs("p",{className:"text-gray-600",children:["Subject: ",e.jsx("span",{className:"font-medium",children:j.subject||"Business Studies"})]})]})]}),e.jsx(ae,{className:`text-xs px-3 py-1 ${j.status==="completed"?"bg-green-500 text-white":j.status==="missed"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:j.status||"active"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Exam Date"}),e.jsx("p",{className:"font-semibold text-gray-900",children:j.exam_date?new Date(j.exam_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Daily Study Time"}),e.jsxs("p",{className:"font-semibold text-gray-900 flex items-center gap-1",children:[e.jsx(Fe,{className:"h-4 w-4 text-blue-600"}),N>0?`${N}h`:""," ",$>0?`${$}m`:"0m"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-xs font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4 text-blue-600"}),"Total Topics: ",e.jsx("span",{className:"text-blue-600",children:j.total_topics||0})]})}),j.topics_to_cover&&j.topics_to_cover.length>0&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4 text-blue-600"}),"Topics to Cover:"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.topics_to_cover.map((H,Z)=>e.jsx("div",{className:"px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 shadow-sm hover:bg-blue-100 transition-colors",children:H},Z))})]})]},j.plan_id)})()]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900",children:"No Study Schedule Yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create a study plan to track your learning progress"}),e.jsxs(C,{onClick:()=>s("study-plan"),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Create Study Plan"]})]})})})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-green-500"}),"Today's Progress"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Real-time daily analytics",P&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Last updated: ",P.toLocaleTimeString()]})]})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:me,disabled:h,className:"flex items-center gap-2",children:[e.jsx(Ve,{className:`h-4 w-4 ${h?"animate-spin":""}`}),"Refresh"]})]})}),e.jsx(L,{children:E?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:E.today.totalActivities}),e.jsx("div",{className:"text-sm text-blue-700",children:"Activities"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:G?e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto"}):Math.round(E.today.studyTimeMinutes)}),e.jsx("div",{className:"text-sm text-green-700",children:G?"Resetting...":"Minutes"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[E.today.dailyAccuracy,"%"]}),e.jsx("div",{className:"text-sm text-purple-700",children:"Accuracy"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:E.today.sessionCount}),e.jsx("div",{className:"text-sm text-orange-700",children:"Sessions"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-3 text-gray-900",children:"Learning Activities"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Questions Attempted"}),e.jsx("span",{className:"font-medium",children:E.today.questionsAttempted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lessons Completed"}),e.jsx("span",{className:"font-medium",children:E.today.lessonsCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Flashcards Reviewed"}),e.jsx("span",{className:"font-medium",children:E.today.flashcardsReviewed})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-3 text-gray-900",children:"Platform Usage"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"AI Tutor Interactions"}),e.jsx("span",{className:"font-medium",children:E.today.aiTutorInteractions})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Topic Selections"}),e.jsx("span",{className:"font-medium",children:E.today.topicSelections})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Productivity Score"}),e.jsx("span",{className:"font-medium",children:E.today.productivityScore})]})]})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>s("analytics"),className:"flex-1",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"View Full Analytics"]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>s("practice"),className:"flex-1",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Start Practice"]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ue,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Daily Data Yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Start learning to see your daily progress here."}),e.jsxs(C,{onClick:()=>s("practice"),className:"bg-green-500 hover:bg-green-600 text-white",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Start Learning"]})]})})]}),e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{className:"h-5 w-5 mr-2 text-purple-500"}),"Recent Learning Activity"]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>s("analytics"),children:"View All"})]})}),e.jsx(L,{children:se&&se.length>0?e.jsx("div",{className:"space-y-3",children:se.slice(0,10).map((j,N)=>{const $=()=>j.pageKey==="ai-tutor"||j.activityType==="ai-tutor"||j.activityType==="lesson"?e.jsx(st,{className:"h-5 w-5 text-indigo-600"}):j.pageKey==="practice"||j.activityType==="practice"||j.activityType==="question"?e.jsx(Pe,{className:"h-5 w-5 text-blue-600"}):j.pageKey==="flashcards"||j.activityType==="flashcard"?e.jsx(qe,{className:"h-5 w-5 text-purple-600"}):j.pageKey==="visual-learning"||j.activityType==="video_lesson"?e.jsx(pt,{className:"h-5 w-5 text-green-600"}):j.pageKey==="mock-exam-p1"||j.pageKey==="mock-exam-p2"||j.activityType==="mock_exam"?e.jsx(ct,{className:"h-5 w-5 text-orange-600"}):e.jsx(bt,{className:"h-5 w-5 text-gray-600"}),H=()=>j.pageKey==="ai-tutor"||j.activityType==="ai-tutor"?"bg-indigo-50":j.pageKey==="practice"||j.activityType==="practice"?"bg-blue-50":j.pageKey==="flashcards"||j.activityType==="flashcard"?"bg-purple-50":j.pageKey==="visual-learning"||j.activityType==="video_lesson"?"bg-green-50":j.pageKey==="mock-exam-p1"||j.pageKey==="mock-exam-p2"?"bg-orange-50":"bg-gray-50";return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border border-gray-200 ${H()} hover:shadow-md transition-all cursor-pointer`,onClick:()=>{const Z=Te(j);s(Z)},children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:$()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:j.pageName||ce(j.activityType)}),j.type==="page_visit"?e.jsx("p",{className:"text-xs text-gray-600",children:"You studied on this page"}):e.jsx("p",{className:"text-xs text-gray-600 truncate",children:j.description||`${j.subject} - ${j.topic}`}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:z(j.timestampRaw||j.timestamp)}),j.score>0&&e.jsxs(ae,{className:`text-xs ${j.score>=80?"bg-green-100 text-green-800":j.score>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[j.score,"%"]})]})]})]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:Z=>{Z.stopPropagation();const X=Te(j);s(X)},className:"text-blue-600 hover:text-blue-700 flex-shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})]},j.id||N)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Pe,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-sm font-medium mb-2",children:"No recent activity yet"}),e.jsx("p",{className:"text-xs",children:"Start studying to see your recent pages here"}),e.jsx(C,{onClick:()=>s("topic-selection"),size:"sm",className:"mt-4 bg-blue-600 hover:bg-blue-700",children:"Start Studying"})]})})]}),!h&&(!se||se.length===0)&&g.length>0&&e.jsxs(M,{className:"mt-6",children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(Pe,{className:"h-5 w-5 mr-2 text-gray-600"}),"Topic-Based Activities"]})}),e.jsx(L,{children:g.length>0&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[(()=>{const j=Ne(1)[0];return j?e.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>s("practice"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium",children:[j.topicName," Practice"]}),e.jsxs(ae,{variant:"outline",style:{borderColor:"var(--success)",color:"var(--success)"},children:[j.accuracy,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${j.completionPercentage}%`,background:"linear-gradient(90deg, var(--teal-medium), var(--success))"}})}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[j.questionsAttempted," questions completed  ",ie(j.timeSpent)]}),e.jsxs(C,{size:"sm",variant:"outline",onClick:N=>{N.stopPropagation(),s("ai-tutor-topic-selection")},style:{borderColor:"var(--ai-blue)",color:"var(--ai-blue)"},className:"hover:bg-blue-50",children:[e.jsx(st,{className:"h-3 w-3 mr-1"}),"Get Help"]})]}):null})(),(()=>{const j=ye(1)[0];return j?e.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>s("practice"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium",children:[j.topicName," Review"]}),e.jsxs(ae,{variant:"outline",className:"border-imtehaan-warning text-imtehaan-warning",children:[j.accuracy,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-imtehaan-gradient-secondary h-2 rounded-full transition-all duration-300",style:{width:`${j.completionPercentage}%`}})}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[j.questionsAttempted," questions  ",ie(j.timeSpent)]}),e.jsxs(C,{size:"sm",variant:"outline",onClick:N=>{N.stopPropagation(),s("ai-tutor-topic-selection")},style:{borderColor:"var(--ai-blue)",color:"var(--ai-blue)"},className:"hover:bg-blue-50",children:[e.jsx(st,{className:"h-3 w-3 mr-1"}),"Get Help"]})]}):null})()]})})]}),e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(Ke,{className:"h-5 w-5 mr-2 text-imtehaan-primary"}),q.studyRecommendations]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(_e,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Focus on Weak Areas"}),e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:`Based on your ${he()}% accuracy, practice more questions in challenging topics`}),e.jsx(C,{size:"sm",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-100",onClick:()=>s("practice"),children:"Start Practice"})]})]})}),E?.thisMonth?.studyPatterns?.preferredStudyTime&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-100",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(qt,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-1",children:"Optimal Study Time"}),e.jsx("p",{className:"text-sm text-green-700 mb-3",children:`Your best performance is in the ${E.thisMonth.studyPatterns.preferredStudyTime}. Schedule your study sessions accordingly.`}),e.jsx(C,{size:"sm",variant:"outline",className:"border-green-300 text-green-700 hover:bg-green-100",onClick:()=>s("study-plan"),children:"View Schedule"})]})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-100",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(qe,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-1",children:"AI Tutor Session"}),e.jsx("p",{className:"text-sm text-purple-700 mb-3",children:`You've been struggling with ${ve()}. Let AI help you understand it better.`}),e.jsxs(C,{size:"sm",variant:"outline",className:"border-purple-300 text-purple-700 hover:bg-purple-100",onClick:()=>s("ai-tutor-topic-selection"),children:[e.jsx(st,{className:"h-3 w-3 mr-1"}),"Ask AI Tutor"]})]})]})}),E?.nextMilestone&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg border border-orange-100 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>s("analytics"),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ct,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-1",children:"Next Milestone"}),e.jsx("p",{className:"text-sm text-orange-700 mb-3",children:E.nextMilestone}),E.today?.questionsAttempted>0&&e.jsx("div",{className:"w-full bg-orange-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(E.today.questionsAttempted%10*10,100)}%`}})})]})]})})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"h-5 w-5 text-green-500"}),"Today's Summary"]})}),e.jsx(L,{className:"p-6",children:E?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:E.today.totalActivities}),e.jsx("div",{className:"text-sm text-green-700",children:"Activities Today"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Study Time"}),e.jsxs("span",{className:"font-medium",children:[Math.round(E.today.studyTimeMinutes),"m"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Accuracy"}),e.jsxs("span",{className:"font-medium",children:[E.today.dailyAccuracy,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Sessions"}),e.jsx("span",{className:"font-medium",children:E.today.sessionCount})]})]})]}):e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx(qt,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No data yet"})]})})]}),e.jsx(M,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ur,{className:"h-5 w-5 text-imtehaan-error mr-2"}),e.jsx("span",{className:"font-medium",children:q.studyStreak})]}),e.jsx("span",{className:"text-2xl font-bold text-imtehaan-error",children:h?"...":f.currentStreak})]}),e.jsx("div",{className:"text-sm text-gray-600",children:h?"Loading...":q.consecutiveDays.replace("{count}",f.currentStreak.toString())}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:q.weeklyGoal}),e.jsx("span",{className:"text-sm text-gray-600",children:h?"...":ie(Y())})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${h?0:Math.min(D(),100)}%`,background:"linear-gradient(90deg, var(--emerald), var(--success))"}})}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:h?"Loading...":`${D()}% overall progress`})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Average Accuracy"}),e.jsx("span",{className:"text-sm text-gray-600",children:h?"...":`${he()}%`})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${h?0:he()}%`,background:he()>=80?"linear-gradient(90deg, var(--emerald), var(--success))":he()>=60?"linear-gradient(90deg, var(--teal-medium), var(--emerald))":"linear-gradient(90deg, var(--teal-light), var(--teal-medium))"}})})]})]})})}),e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(Ue,{className:"h-5 w-5 mr-2 text-imtehaan-accent"}),"Learning Patterns"]})}),e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Preferred Study Time"}),e.jsx("span",{className:"font-medium",children:h?"...":b.preferredStudyTime})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Session Length"}),e.jsx("span",{className:"font-medium",children:h?"...":ie(b.averageSessionLength)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Topics per Session"}),e.jsx("span",{className:"font-medium",children:h?"...":b.topicsPerSession})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Retention Rate"}),e.jsx("span",{className:"font-medium",children:h?"...":`${b.retentionRate}%`})]})]})})]}),e.jsx(M,{style:{background:"linear-gradient(135deg, var(--ai-blue-light), var(--ai-blue-accent))",borderColor:"var(--ai-blue)"},children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"var(--ai-blue)"},children:e.jsx(st,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Need Help?"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Ask our AI tutor anything about your studies"}),e.jsxs(C,{onClick:()=>s("ai-tutor-topic-selection"),className:"w-full text-white",style:{backgroundColor:"var(--ai-blue)",borderColor:"var(--ai-blue)"},children:[e.jsx(kt,{className:"h-4 w-4 mr-2"}),q.askAI]})]})}),e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(ct,{className:"h-5 w-5 mr-2 text-imtehaan-warning"}),q.achievements]})}),e.jsx(L,{children:be.length>0?e.jsx("div",{className:"space-y-3",children:be.map((j,N)=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(j.icon,{className:"h-5 w-5 text-imtehaan-primary mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-sm",children:j.title}),j.isNew&&e.jsx(ae,{className:"ml-2 text-xs bg-imtehaan-primary text-white",children:q.newBadge})]}),e.jsx("div",{className:"text-xs text-gray-600",children:j.description})]})]},N))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ct,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg text-gray-600 mb-2",children:"No Achievements Yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Start learning to earn your first achievements."}),e.jsxs(C,{onClick:()=>s("practice"),className:"bg-imtehaan-primary hover:bg-imtehaan-primary-dark text-white",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Start Learning"]})]})})]})]})]})]}),e.jsx("footer",{className:"bg-white border-t border-gray-200 mt-16",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[e.jsx("div",{className:"mb-4",children:e.jsx(Os,{size:"md",showText:!1})}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered learning platform for IGCSE, A-Levels & IB students."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>s("dashboard"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Dashboard"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("ai-tutor"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Lessons"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("practice"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Practice"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("analytics"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Analytics"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Learning"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>s("mock-exam-selection"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Mock Exams"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("flashcards"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Flashcards"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("study-plan"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Study Plans"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Support"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>s("settings"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Settings"})}),e.jsx("li",{children:e.jsx("a",{href:"mailto:support@imtehaan.com",className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Contact Support"})})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[" ",new Date().getFullYear()," Imtehaan AI EdTech Platform. All rights reserved."]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("a",{href:"#",className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"#",className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Terms of Service"})]})]})})]})})]})}function ys({className:s,orientation:t="horizontal",...r}){return e.jsx("div",{className:Ce("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r})}function Zt({className:s,value:t=0,max:r=100,...a}){const n=Math.min(Math.max(t/r*100,0),100);return e.jsx("div",{className:Ce("relative h-2 w-full overflow-hidden rounded-full bg-secondary",s),...a,children:e.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{width:`${n}%`}})})}const Eg={en:{title:"Create Study Plan",subtitle:"Design your personalized study schedule with AI-powered recommendations",backToDashboard:"Back to Dashboard",step1:"Basic Information",step2:"Topics Management",step3:"Schedule & Timeline",stepOf:"Step {current} of 3",basicInfo:"Plan Details",planName:"Study Plan Name",planNamePlaceholder:"Enter a descriptive name for your study plan",subject:"Subject",selectSubject:"Choose your subject",subjectDesc:"Select the subject for your study plan",topicsSection:"Learning Path",topicsToCover:"Topics to Master",topicsToCoverDesc:"Select topics you want to focus on during this study plan",topicsCompleted:"Topics Already Mastered",topicsCompletedDesc:"Mark topics you've already completed to personalize your learning path",scheduleSection:"Timeline & Goals",examDate:"Target Exam Date",selectDate:"Select your exam date",formulaNote:"Based on {topicsLeft} topics and {daysLeft} days remaining, your recommended study time is calculated automatically.",calculatedStudyTime:"Recommended Daily Study Time",hours:"hours",minutes:"minutes",totalTopics:"Total Topics",selectedTopics:"Selected",completedTopics:"Completed",estimatedDays:"Estimated Days",createPlan:"Create Study Plan",savePlan:"Save Plan",cancel:"Cancel",next:"Next Step",previous:"Previous",topics:{},errors:{nameRequired:"Study plan name is required",subjectRequired:"Please select a subject",topicsRequired:"Please select at least one topic to cover",examDateRequired:"Please enter a valid future exam date",insufficientTime:"Not enough time before exam. Please select a later date."},success:"Study plan created successfully! Your personalized schedule is ready.",tips:{planName:"Use descriptive names for your study plan",topics:"Start with a few topics for your first study plan",schedule:"Set realistic daily study time",subject:"Choose a subject you want to focus on"}}};function Pg(){const{language:s,setCurrentPage:t,user:r,curriculum:a,studyPlans:n,setStudyPlans:i,studySessions:l,setStudySessions:o}=Re(),[d,m]=c.useState(1),[u,x]=c.useState({planName:"",subject:"",topicsToCover:[],topicsCompleted:[],examDate:""}),[p,g]=c.useState({hours:0,minutes:0,totalMinutes:0}),[y,f]=c.useState([]),[v,b]=c.useState(!1),[w,h]=c.useState([]),[T,E]=c.useState(!0),[R,P]=c.useState(""),[k,G]=c.useState(!1),[Q,se]=c.useState(!1),S=Eg.en,U=()=>["businessStudies"],ee=A=>({businessStudies:"Business Studies",mathematics:"Mathematics",physics:"Physics",chemistry:"Chemistry",biology:"Biology",english:"English",history:"History",geography:"Geography",economics:"Economics"})[A]||A,ge=async A=>{if(A==="businessStudies")try{const{topicsService:z}=await Ms(()=>Promise.resolve().then(()=>pr),void 0),{data:ie,error:te}=await z.getTopicsBySubject("businessStudies");return te?(console.error("Error fetching Business Studies topics:",te),[]):ie?.map(ve=>ve.title)||[]}catch(z){return console.error("Error importing topics service:",z),["Business Activity","Marketing","Finance","Human Resources","Operations Management","Business Strategy","International Business","Entrepreneurship"]}return[]},q=async A=>{b(!0);try{const z=await ge(A);f(z)}catch(z){console.error("Error fetching topics:",z),f([])}finally{b(!1)}};c.useEffect(()=>{console.log("Component mounted, checking table structure...");const A=setTimeout(()=>{oe()},100);return()=>clearTimeout(A)},[]),c.useEffect(()=>{u.subject&&q(u.subject)},[u.subject]);const oe=async()=>{try{E(!0),P(""),console.log("Starting table structure check...");const{studyPlansService:A}=await Ms(()=>Promise.resolve().then(()=>pr),void 0);console.log("Checking if table exists...");const{exists:z,error:ie}=await A.checkTableStructure();if(!z){console.error("Study plans table does not exist, attempting to create it...");const{success:be,error:j}=await A.createTableIfNotExists();if(!be){console.error("Failed to create table:",j),P("Study plans table does not exist. Please run the SQL script in Supabase SQL Editor to create it."),E(!1);return}console.log("Table created successfully")}console.log("Study plans table is accessible"),console.log("Getting table columns...");const{columns:te,error:ve}=await A.getTableColumns();if(ve){console.error("Error getting table columns:",ve),P(`Error getting table columns: ${ve?.message||"Unknown error"}`),E(!1);return}if(console.log("Available columns in study_plans table:",te),!te||te.length===0){console.error("No columns found in table"),P("No columns found in study_plans table. Please check your database setup."),E(!1);return}h(te),console.log("Table structure check completed successfully. Columns:",te)}catch(A){console.error("Error checking table structure:",A),P(`Error checking table structure: ${A?.message||"Unknown error"}`)}finally{E(!1)}},O=c.useCallback(A=>{if(!A||u.topicsToCover.length===0){g({hours:0,minutes:0,totalMinutes:0});return}const z=new Date,ie=new Date(A),te=Math.ceil((ie.getTime()-z.getTime())/(1e3*60*60*24));if(te<=0){g({hours:0,minutes:0,totalMinutes:0});return}const be=u.topicsToCover.filter(H=>!u.topicsCompleted.includes(H)).length*4.5/te*1.1,j=Math.ceil(be*60),N=Math.floor(j/60),$=j%60;g({hours:N,minutes:$,totalMinutes:j})},[u.topicsToCover,u.topicsCompleted]),_=c.useCallback((A,z)=>{x(ie=>({...ie,[A]:z})),R&&P(""),Q&&se(!1),A==="examDate"&&z&&O(z)},[R,Q,O]);c.useEffect(()=>{d===3&&u.examDate&&O(u.examDate)},[d,u.examDate,u.topicsToCover,u.topicsCompleted,O]);const me=c.useCallback((A,z)=>{const ie=z==="toCover"?"topicsToCover":"topicsCompleted";x(te=>{const ve=te[ie];let be;return ve.includes(A)?be=ve.filter(j=>j!==A):be=[...ve,A],{...te,[ie]:be}}),R&&P(""),Q&&se(!1)},[R,Q]),le=A=>{switch(A){case 1:if(!u.planName.trim())return P(S.errors.nameRequired),!1;if(!u.subject)return P(S.errors.subjectRequired),!1;break;case 2:if(u.topicsToCover.length===0)return P(S.errors.topicsRequired),!1;break;case 3:if(!u.examDate)return P(S.errors.examDateRequired),!1;const z=new Date(u.examDate);if(isNaN(z.getTime())||z<=new Date)return P(S.errors.examDateRequired),!1;const ie=new Date;if(Math.ceil((z.getTime()-ie.getTime())/(1e3*60*60*24))<1)return P(S.errors.insufficientTime),!1;if(p.totalMinutes===0)return P("Unable to calculate study time. Please ensure you have selected topics."),!1;break}return!0},D=()=>{le(d)&&(P(""),m(A=>Math.min(A+1,3)))},Y=()=>{P(""),m(A=>Math.max(A-1,1))},he=async A=>{if(A.preventDefault(),!!le(3)){if(w.length===0&&(console.log("Table structure not ready, checking again..."),await oe(),w.length===0)){P("Table structure not ready. Please wait or refresh the page.");return}G(!0),P("");try{const{studyPlansService:z}=await Ms(()=>Promise.resolve().then(()=>pr),void 0),{data:{session:ie},error:te}=await F.auth.getSession();if(te||!ie)throw new Error("No active session. Please log in again.");const ve=ie.user;if(console.log("Supabase session result:",{session:ie,sessionError:te}),console.log("Supabase auth user:",ve),!ve)throw new Error("User not authenticated. Please log in again.");p.totalMinutes===0&&O(u.examDate);let be={user_id:ve.id,study_date:new Date().toISOString().split("T")[0],study_time_minutes:p.totalMinutes,total_topics:u.topicsToCover.length,topics_done:0,exam_date:u.examDate};console.log("Current user context:",{user:r}),console.log("Supabase auth user:",ve),console.log("User ID being sent:",be.user_id),w.includes("subject")&&(be.subject=u.subject),w.includes("topics_to_cover")&&(be.topics_to_cover=u.topicsToCover),w.includes("plan_name")?be.plan_name=u.planName:w.includes("name")?be.name=u.planName:w.includes("title")&&(be.title=u.planName),w.includes("status")&&(be.status="active"),console.log("Study plan data being sent:",be),console.log("Available columns in table:",w);const{data:j,error:N}=await z.createStudyPlan(be);if(N)throw console.error("Database error details:",N),new Error(`Failed to save study plan: ${N.message||"Unknown error"}`);const $={plan_id:j.plan_id,user_id:j.user_id,study_date:j.study_date,study_time_minutes:j.study_time_minutes,total_topics:j.total_topics,topics_done:j.topics_done,topics_left:j.topics_left,exam_date:j.exam_date,...j.subject&&{subject:j.subject},...j.topics_to_cover&&{topics_to_cover:j.topics_to_cover},...j.plan_name&&{plan_name:j.plan_name},...j.status&&{status:j.status},...j.created_at&&{created_at:j.created_at},...j.updated_at&&{updated_at:j.updated_at}};i([...n,$]),se(!0),setTimeout(()=>{t("dashboard")},2e3)}catch(z){console.error("Error creating study plan:",z),P(`Failed to create study plan: ${z?.message||"Please try again."}`)}finally{G(!1)}}},Ne=U(),ye=y.length,re=u.topicsToCover.length,ce=u.topicsCompleted.length,Te=u.examDate?Math.ceil((new Date(u.examDate).getTime()-new Date().getTime())/(1e3*60*60*24)):0;return T?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Checking database structure..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-teal-50/30",children:[e.jsx("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200/60 sticky top-0 z-50 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Os,{size:"md",showText:!0}),e.jsx(ys,{orientation:"vertical",className:"mx-4 h-6"}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsx(Mr,{className:"h-5 w-5 text-teal-medium"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:S.title})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>t("dashboard"),children:e.jsx(Ca,{className:"h-4 w-4"})})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(C,{variant:"ghost",onClick:()=>t("dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),S.backToDashboard]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3].map(A=>e.jsx("div",{className:Ce("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all",d>=A?"bg-gradient-to-r from-teal-medium to-emerald text-white shadow-md":"bg-gray-200 text-gray-500"),children:d>A?e.jsx(cr,{className:"h-4 w-4"}):A},A))}),e.jsx("div",{className:"text-sm text-gray-600",children:S.stepOf.replace("{current}",d.toString())})]})]}),e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-3",children:S.title}),e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:S.subtitle}),e.jsx("div",{className:"max-w-md mx-auto",children:e.jsx(Zt,{value:d/3*100,className:"h-2"})})]})]}),Q&&e.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:e.jsxs(at,{className:"border-emerald-200 bg-gradient-to-r from-emerald-50 to-teal-50 text-emerald-800",children:[e.jsx(Bt,{className:"h-5 w-5"}),e.jsx(nt,{className:"text-lg font-medium",children:S.success})]})}),R&&e.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:e.jsxs(at,{className:"border-red-200 bg-red-50 text-red-800",children:[e.jsx(Je,{className:"h-5 w-5"}),e.jsxs(nt,{children:[R,R.includes("table does not exist")&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm",children:"Please run this SQL in your Supabase SQL Editor:"}),e.jsxs("code",{className:"block mt-1 p-2 bg-red-100 rounded text-xs",children:["CREATE TABLE IF NOT EXISTS public.study_plans ( plan_id smallint NOT NULL, user_id smallint NOT NULL, study_date date NOT NULL, study_time_minutes integer NOT NULL, total_topics integer NOT NULL, topics_done integer NULL DEFAULT 0, topics_left integer GENERATED ALWAYS AS (total_topics - topics_done) STORED NULL, exam_date date NOT NULL, subject text DEFAULT 'businessStudies', topics_to_cover text[] DEFAULT '","', plan_name text, status text DEFAULT 'active', created_at timestamp with time zone DEFAULT NOW(), updated_at timestamp with time zone DEFAULT NOW(), CONSTRAINT study_plans_pkey PRIMARY KEY (plan_id) );"]})]})]})]})}),e.jsxs("div",{className:"grid lg:grid-cols-12 gap-8",children:[e.jsx("div",{className:"lg:col-span-8",children:e.jsxs("form",{onSubmit:he,className:"space-y-8",children:[d===1&&e.jsxs(M,{className:"border-0 shadow-lg bg-white/70 backdrop-blur-sm",children:[e.jsx(B,{className:"pb-6",children:e.jsxs(V,{className:"flex items-center text-2xl",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-blue-500 to-teal-500 flex items-center justify-center mr-3",children:e.jsx(Pe,{className:"h-5 w-5 text-white"})}),S.basicInfo]})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(we,{htmlFor:"planName",className:"text-base font-medium",children:S.planName}),e.jsx(We,{id:"planName",type:"text",placeholder:S.planNamePlaceholder,value:u.planName,onChange:A=>_("planName",A.target.value),disabled:k,className:"h-12 bg-white/80 border-gray-300 focus:border-teal-500 focus:ring-teal-500"}),e.jsx("p",{className:"text-sm text-gray-500",children:S.tips.planName})]}),e.jsxs("div",{children:[e.jsxs(we,{className:"text-lg font-medium flex items-center",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2 text-blue-500"}),S.subject]}),e.jsx("p",{className:"text-gray-600 mt-1",children:S.subjectDesc}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:S.tips.subject})]}),e.jsx("div",{children:e.jsxs("select",{value:u.subject,onChange:A=>{_("subject",A.target.value),_("topicsToCover",[]),_("topicsCompleted",[])},disabled:k,className:"h-12 w-full bg-white/80 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:S.selectSubject}),Ne.map(A=>e.jsx("option",{value:A,children:ee(A)},A))]})})]})]}),d===2&&u.subject&&e.jsxs(M,{className:"border-0 shadow-lg bg-white/70 backdrop-blur-sm",children:[e.jsx(B,{className:"pb-6",children:e.jsxs(V,{className:"flex items-center text-2xl",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center mr-3",children:e.jsx(_e,{className:"h-5 w-5 text-white"})}),S.topicsSection]})}),e.jsxs(L,{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(we,{className:"text-lg font-medium flex items-center",children:[e.jsx(kt,{className:"h-4 w-4 mr-2 text-orange-500"}),S.topicsToCover]}),e.jsx("p",{className:"text-gray-600 mt-1",children:S.topicsToCoverDesc}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:S.tips.topics})]}),v?e.jsxs("div",{className:"col-span-2 text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading Business Studies topics..."})]}):y.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(A=>{const z=u.topicsCompleted.includes(A),ie=u.topicsToCover.includes(A);return e.jsxs("div",{className:Ce("flex items-center space-x-3 p-4 rounded-lg border transition-all",ie?"border-teal-300 bg-teal-50":z?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 bg-white hover:border-teal-200"),children:[e.jsx(wr,{id:`cover-${A}`,checked:ie,onCheckedChange:()=>!z&&me(A,"toCover"),disabled:k||z,className:"data-[state=checked]:bg-teal-600 data-[state=checked]:border-teal-600"}),e.jsx(we,{htmlFor:`cover-${A}`,className:Ce("cursor-pointer flex-1",z&&"text-gray-400 line-through"),children:A})]},`cover-${A}`)})}):e.jsx("div",{className:"col-span-2 text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No topics available for Business Studies"})}),u.topicsToCover.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:u.topicsToCover.map(A=>e.jsxs(ae,{className:"bg-teal-100 text-teal-800 hover:bg-teal-200",children:[A,e.jsx("button",{type:"button",onClick:()=>me(A,"toCover"),className:"ml-2 hover:text-teal-900",children:e.jsx(Qe,{className:"h-3 w-3"})})]},`badge-cover-${A}`))})]}),e.jsx(ys,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(we,{className:"text-lg font-medium flex items-center",children:[e.jsx(cr,{className:"h-4 w-4 mr-2 text-green-500"}),S.topicsCompleted]}),e.jsx("p",{className:"text-gray-600 mt-1",children:S.topicsCompletedDesc})]}),v?e.jsxs("div",{className:"col-span-2 text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading Business Studies topics..."})]}):y.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(A=>{const z=u.topicsCompleted.includes(A),ie=u.topicsToCover.includes(A);return e.jsxs("div",{className:Ce("flex items-center space-x-3 p-4 rounded-lg border transition-all",z?"border-green-300 bg-green-50":ie?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 bg-white hover:border-green-200"),children:[e.jsx(wr,{id:`completed-${A}`,checked:z,onCheckedChange:()=>!ie&&me(A,"completed"),disabled:k||ie,className:"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600"}),e.jsx(we,{htmlFor:`completed-${A}`,className:Ce("cursor-pointer flex-1",ie&&"text-gray-400"),children:A})]},`completed-${A}`)})}):e.jsx("div",{className:"col-span-2 text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No topics available for Business Studies"})}),u.topicsCompleted.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:u.topicsCompleted.map(A=>e.jsxs(ae,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:[e.jsx(cr,{className:"h-3 w-3 mr-1"}),A,e.jsx("button",{type:"button",onClick:()=>me(A,"completed"),className:"ml-2 hover:text-green-900",children:e.jsx(Qe,{className:"h-3 w-3"})})]},`badge-completed-${A}`))})]})]})]}),d===3&&e.jsxs(M,{className:"border-0 shadow-lg bg-white/70 backdrop-blur-sm",children:[e.jsx(B,{className:"pb-6",children:e.jsxs(V,{className:"flex items-center text-2xl",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center mr-3",children:e.jsx(Fe,{className:"h-5 w-5 text-white"})}),S.scheduleSection]})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(we,{htmlFor:"examDate",className:"text-base font-medium",children:S.examDate}),e.jsxs("div",{className:"relative",children:[e.jsx(We,{id:"examDate",type:"date",value:u.examDate,onChange:A=>_("examDate",A.target.value),disabled:k,className:"h-12 bg-white/80 border-gray-300 focus:border-orange-500 focus:ring-orange-500 pl-12",min:new Date().toISOString().split("T")[0]}),e.jsx(qt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),p.totalMinutes>0&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-lg border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center",children:e.jsx(Fe,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(we,{className:"text-lg font-semibold text-blue-800",children:S.calculatedStudyTime}),e.jsxs("p",{className:"text-xs text-blue-600",children:["Based on your ",u.topicsToCover.filter(A=>!u.topicsCompleted.includes(A)).length," topics remaining"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600",children:p.hours}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:S.hours})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-4xl font-bold text-indigo-600",children:p.minutes}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:S.minutes})]})]}),u.examDate&&e.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:e.jsx("p",{className:"text-sm text-gray-700",children:S.formulaNote.replace("{topicsLeft}",u.topicsToCover.filter(A=>!u.topicsCompleted.includes(A)).length.toString()).replace("{daysLeft}",Math.ceil((new Date(u.examDate).getTime()-new Date().getTime())/(1e3*60*60*24)).toString())})})]}),!u.examDate&&e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 p-4 rounded-lg border border-orange-200",children:e.jsx("p",{className:"text-sm text-gray-700",children:"Please select your exam date to calculate recommended study time"})})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(C,{type:"button",variant:"outline",onClick:Y,disabled:d===1||k,className:"px-6 py-3",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),S.previous]}),d<3?e.jsxs(C,{type:"button",onClick:D,disabled:k,className:"px-6 py-3 bg-gradient-to-r from-teal-500 to-blue-500 hover:from-teal-600 hover:to-blue-600 text-white",children:[S.next,e.jsx(Ie,{className:"h-4 w-4 ml-2 rotate-180"})]}):e.jsx(C,{type:"submit",disabled:k,className:"px-8 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white text-lg",children:k?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),S.createPlan]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-5 w-5 mr-2"}),S.createPlan]})})]})]})}),e.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[e.jsxs(M,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-gray-50/50 backdrop-blur-sm",children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(Ue,{className:"h-5 w-5 mr-2 text-teal-600"}),"Study Plan Statistics"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ye}),e.jsx("div",{className:"text-sm text-gray-600",children:S.totalTopics})]}),e.jsxs("div",{className:"text-center p-3 bg-teal-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-teal-600",children:re}),e.jsx("div",{className:"text-sm text-gray-600",children:S.selectedTopics})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:ce}),e.jsx("div",{className:"text-sm text-gray-600",children:S.completedTopics})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Te}),e.jsx("div",{className:"text-sm text-gray-600",children:S.estimatedDays})]})]}),re>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(re/ye*100),"%"]})]}),e.jsx(Zt,{value:re/ye*100,className:"h-2"})]})]})]}),e.jsxs(M,{className:"border-0 shadow-lg bg-gradient-to-br from-blue-50 to-teal-50/50",children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(Bt,{className:"h-5 w-5 mr-2 text-blue-600"}),"AI Study Tips"]})}),e.jsxs(L,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-white/60 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Break large topics into smaller, manageable chunks for better retention."})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-white/60 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full mt-2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Plan review sessions before your exam date to reinforce learning."})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-white/60 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Use active recall and spaced repetition for maximum effectiveness."})]})]})]}),u.subject&&re>0&&e.jsxs(M,{className:"border-0 shadow-lg bg-gradient-to-br from-green-50 to-emerald-50/50",children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(jr,{className:"h-5 w-5 mr-2 text-green-600"}),"Plan Preview"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Subject:"}),e.jsx("span",{className:"text-sm font-medium",children:ee(u.subject)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Topics:"}),e.jsxs("span",{className:"text-sm font-medium",children:[re," topics"]})]}),u.examDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Exam Date:"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(u.examDate).toLocaleDateString()})]}),p.totalMinutes>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Daily Time:"}),e.jsxs("span",{className:"text-sm font-medium",children:[p.hours,"h ",p.minutes,"m"]})]})]})})]})]})]})]})]})}function _s({timeSpent:s,savedTimeRef:t}){const r=i=>{const l=Math.floor(i/60),o=i%60;return`${l}:${o.toString().padStart(2,"0")}`},n=s-t.current<5;return e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs("div",{className:"bg-white border-2 border-blue-500 shadow-lg rounded-lg px-4 py-2 flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:`h-5 w-5 ${n?"text-green-500":"text-blue-500"}`}),!n&&e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Study Time"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:r(s)})]}),n?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-green-600",children:"Saved"})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-orange-600",children:"Tracking..."})]})]})})}const Ig={async signUp(s,t,r,a){try{const{data:n,error:i}=await F.auth.signUp({email:s,password:t,options:{data:{full_name:r,user_type:a?.user_type||"student",curriculum:a?.curriculum||"igcse",grade:a?.grade||"",subjects:a?.subjects||["Mathematics","Physics","Chemistry"],preferences:a?.preferences||{}}}});return{data:n,error:i}}catch(n){return console.error("Signup error:",n),{data:null,error:n}}},async signIn(s,t){try{const{data:r,error:a}=await F.auth.signInWithPassword({email:s,password:t});return{data:r,error:a}}catch(r){return console.error("Signin error:",r),{data:null,error:r}}},async signOut(){try{const{error:s}=await F.auth.signOut();return{error:s}}catch(s){return console.error("Signout error:",s),{error:s}}},async getCurrentUser(){try{const{data:{user:s},error:t}=await F.auth.getUser();return{user:s,error:t}}catch(s){return console.error("Get user error:",s),{user:null,error:s}}},onAuthStateChange(s){return F.auth.onAuthStateChange(s)}},Mg={async getQuestions(s,t){const{data:r,error:a}=await ht.from("questions").select("*").eq("subject",s).eq("topic",t).order("created_at",{ascending:!1});return{data:r,error:a}},async addQuestion(s){const{data:t,error:r}=await ht.from("questions").insert(s).select();return{data:t,error:r}},async getQuestionsBySubject(s){const{data:t,error:r}=await ht.from("questions").select("*").eq("subject",s).order("created_at",{ascending:!1});return{data:t,error:r}}},Dg={async saveSession(s){const{data:t,error:r}=await ht.from("study_sessions").insert(s).select();return{data:t,error:r}},async getUserSessions(s){const{data:t,error:r}=await ht.from("study_sessions").select("*").eq("user_id",s).order("created_at",{ascending:!1});return{data:t,error:r}},async getSessionsByDateRange(s,t,r){const{data:a,error:n}=await ht.from("study_sessions").select("*").eq("user_id",s).gte("created_at",t).lte("created_at",r).order("created_at",{ascending:!1});return{data:a,error:n}},async getUserStats(s){const{data:t,error:r}=await ht.from("study_sessions").select("*").eq("user_id",s);return r?{data:null,error:r}:{data:{totalSessions:t.length,totalTime:t.reduce((n,i)=>n+i.duration,0),totalQuestions:t.reduce((n,i)=>n+i.questions_answered,0),totalCorrect:t.reduce((n,i)=>n+i.correct_answers,0),accuracy:t.length>0?t.reduce((n,i)=>n+i.correct_answers,0)/t.reduce((n,i)=>n+i.questions_answered,0)*100:0},error:null}}},Rg={async saveMessage(s){const{data:t,error:r}=await ht.from("chat_messages").insert(s).select();return{data:t,error:r}},async getChatHistory(s,t){let r=ht.from("chat_messages").select("*").eq("user_id",s).order("created_at",{ascending:!1});t&&(r=r.eq("subject",t));const{data:a,error:n}=await r;return{data:a,error:n}}},Lg={async getUserProfile(s){const{data:t,error:r}=await ht.from("users").select("*").eq("id",s).single();return{data:t,error:r}},async updateUserProfile(s,t){const{data:r,error:a}=await ht.from("users").update(t).eq("id",s).select();return{data:r,error:a}},async createUserProfile(s){const{data:t,error:r}=await ht.from("users").insert(s).select();return{data:t,error:r}}},Lt={async getTopicsBySubject(s){try{console.log("=== TOPICS DEBUG START ==="),console.log("Fetching topics for subject:",s);const{data:{session:t},error:r}=await F.auth.getSession();console.log("Current session:",t?"Authenticated":"Not authenticated"),console.log("Session details:",t),r&&console.error("Session error:",r);const n={businessStudies:Ts.BUSINESS_STUDIES,mathematics:Ts.MATHEMATICS,physics:Ts.PHYSICS,chemistry:Ts.CHEMISTRY}[s]||Ts.BUSINESS_STUDIES;console.log("Using subject_id:",n);let{data:i,error:l}=await ft(async()=>await F.from(yt.TOPICS).select("topic_id, topic").eq("subject_id",n));if(console.log("Database query result:",{data:i,error:l}),l){console.error("Database query failed:",l),console.log("Trying without authentication...");const{data:d,error:m}=await F.from("topics").select("topic_id, topic").eq("subject_id",n);if(console.log("Public access result:",{data:d,error:m}),m)throw console.error("Public access also failed:",m),l;i=d,l=null}if(console.log("Final data result:",i),!i||i.length===0)throw console.log("No topics found for subject_id:",n),new Error(`No topics found for subject_id: ${n}`);const o=i.map(d=>({id:d.topic_id.toString(),topic_id:d.topic_id,title:d.topic,description:`Topic: ${d.topic}`}));return console.log("Transformed data:",o),console.log("=== TOPICS DEBUG END ==="),{data:o,error:null}}catch(t){return console.error("=== TOPICS ERROR ==="),console.error("Error fetching topics:",t),{data:null,error:t}}},async getAllTopics(){try{const{data:s,error:t}=await F.from("topics").select("*").eq("is_active",!0).order("subject",{ascending:!0}).order("order_index",{ascending:!0});if(t)throw t;return{data:s,error:null}}catch(s){return console.error("Error fetching all topics:",s),{data:null,error:s}}},async getBusinessActivityQuestions(s){try{console.log("Fetching questions for topic_id:",s);const{data:t,error:r}=await ft(async()=>await F.from(yt.BUSINESS_ACTIVITY_QUESTIONS).select("context, question, marks, skill, hint, topic_name, part, model_answer, explanation").eq("topic_id",s));if(console.log("Database response:",{data:t,error:r}),r)throw console.error("Error fetching business activity questions:",r),r;return console.log("Questions found:",t?.length||0),{data:t,error:null}}catch(t){return console.error("Error in getBusinessActivityQuestions:",t),{data:null,error:t}}},async getAvailableBusinessTopicIds(){try{const{data:s,error:t}=await ft(async()=>await F.from(yt.BUSINESS_ACTIVITY_QUESTIONS).select("topic_id").order("topic_id"));if(t)throw console.error("Error fetching available topic IDs:",t),t;const r=[...new Set(s?.map(a=>a.topic_id)||[])];return console.log("Available topic IDs in business_activity_questions:",r),{data:r,error:null}}catch(s){return console.error("Error in getAvailableBusinessTopicIds:",s),{data:null,error:s}}}},Og={async getUserStudyPlans(s){try{console.log("Fetching study plans for user:",s);const{data:t,error:r}=await F.from("study_plans").select("plan_id").limit(1);if(r)throw console.error("Table check failed:",r),new Error(`Table 'study_plans' might not exist: ${r.message}`);console.log("Table exists, proceeding with fetch...");const{data:a,error:n}=await F.from("study_plans").select("*").eq("user_id",s).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching study plans:",n),n;return console.log("Study plans fetched:",a?.length||0),{data:a,error:null}}catch(t){return console.error("Error in getUserStudyPlans:",t),{data:null,error:t}}},async createStudyPlan(s){try{console.log("Creating study plan:",s);const t=[];if(s.user_id||t.push("user_id"),s.study_date||t.push("study_date"),s.study_time_minutes||t.push("study_time_minutes"),s.total_topics||t.push("total_topics"),s.exam_date||t.push("exam_date"),t.length>0)throw new Error(`Missing required fields: ${t.join(", ")}`);const r={...s,user_id:s.user_id,study_time_minutes:parseInt(s.study_time_minutes),total_topics:parseInt(s.total_topics),topics_done:parseInt(s.topics_done||0)};console.log("Validated study plan data:",r);const{data:a,error:n}=await F.from("study_plans").insert(r).select().single();if(n)throw console.error("Supabase error creating study plan:",n),n;return console.log("Study plan created successfully:",a),{data:a,error:null}}catch(t){return console.error("Error in createStudyPlan:",t),{data:null,error:t}}},async updateStudyPlanStatus(s,t){try{const{data:r,error:a}=await F.from("study_plans").update({status:t,updated_at:new Date().toISOString()}).eq("plan_id",s).select().single();if(a)throw a;return{data:r,error:null}}catch(r){return console.error("Error updating study plan status:",r),{data:null,error:r}}},async updateTopicsProgress(s,t){try{const{data:r,error:a}=await F.from("study_plans").update({topics_done:t,updated_at:new Date().toISOString()}).eq("plan_id",s).select().single();if(a)throw a;return{data:r,error:null}}catch(r){return console.error("Error updating topics progress:",r),{data:null,error:r}}},async checkTableStructure(){try{console.log("Checking study_plans table structure..."),console.log("Testing database connection...");const{data:s,error:t}=await F.from("study_plans").select("*").limit(0);return t?(console.error("Database connection test failed:",t),t.message&&t.message.includes('relation "study_plans" does not exist')?(console.log("Table does not exist"),{exists:!1,error:new Error("Table does not exist")}):t.message&&t.message.includes("permission denied")?(console.log("Permission denied"),{exists:!1,error:new Error("Permission denied - check your database permissions")}):{exists:!1,error:t}):(console.log("Table exists and is accessible"),{exists:!0,error:null})}catch(s){return console.error("Error checking table structure:",s),{exists:!1,error:s}}},async getTableColumns(){try{console.log("Getting study_plans table columns...");const s=["plan_id","user_id","study_date","study_time_minutes","total_topics","topics_done","topics_left","exam_date","subject","topics_to_cover","plan_name","status","created_at","updated_at"];return console.log("Using expected columns:",s),{columns:s,error:null}}catch(s){return console.error("Error in getTableColumns:",s),{columns:null,error:s}}},async createTableIfNotExists(){try{console.log("Creating study_plans table if it doesn't exist...");const{error:s}=await F.rpc("create_study_plans_table");return s?(console.error("Error creating table via RPC:",s),await this.createTableDirectly()):(console.log("Table created successfully via RPC"),{success:!0,error:null})}catch(s){return console.error("Error in createTableIfNotExists:",s),await this.createTableDirectly()}},async createTableDirectly(){try{console.log("Attempting to create table directly...");const{error:s}=await F.from("study_plans").select("plan_id").limit(1);return s&&s.message.includes('relation "study_plans" does not exist')?(console.log("Table does not exist, please run the SQL script manually"),{success:!1,error:new Error("Table does not exist. Please run the SQL script in Supabase SQL Editor.")}):{success:!0,error:null}}catch(s){return console.error("Error in createTableDirectly:",s),{success:!1,error:s}}}},Va={async getFlashcardsByTopic(s){try{console.log(" Getting flashcards for topic ID:",s);const{data:t,error:r}=await ft(async()=>await F.from(yt.FLASHCARDS).select(`
            card_id,
            flashcard_id,
            question,
            option_a,
            option_b,
            option_c,
            option_d,
            correct_option,
            hint,
            explanation,
            difficulty
          `).eq("topic_id",s).order("card_id",{ascending:!0}));return console.log(" Flashcards database response:",{data:t,error:r}),r?(console.error(" Error fetching flashcards:",r),{data:null,error:r}):{data:t,error:null}}catch(t){return console.error(" Error in getFlashcardsByTopic:",t),{data:null,error:t}}},async getFlashcardsBySubject(s){try{console.log(" Getting flashcards for subject ID:",s);const{data:t,error:r}=await F.from("flashcards").select(`
          card_id,
          flashcard_id,
          question,
          option_a,
          option_b,
          option_c,
          option_d,
          correct_option,
          hint,
          explanation,
          difficulty
        `).eq("subject_id",s).order("card_id",{ascending:!0});return r?(console.error(" Error fetching flashcards by subject:",r),{data:null,error:r}):{data:t,error:null}}catch(t){return console.error(" Error in getFlashcardsBySubject:",t),{data:null,error:t}}},async getFlashcardsByDifficulty(s,t){try{console.log(" Getting flashcards for topic ID:",s,"with difficulty:",t);const{data:r,error:a}=await F.from("flashcards").select(`
          card_id,
          flashcard_id,
          question,
          option_a,
          option_b,
          option_c,
          option_d,
          correct_option,
          hint,
          explanation,
          difficulty
        `).eq("topic_id",s).eq("difficulty",t).order("card_id",{ascending:!0});return a?(console.error(" Error fetching flashcards by difficulty:",a),{data:null,error:a}):{data:r,error:null}}catch(r){return console.error(" Error in getFlashcardsByDifficulty:",r),{data:null,error:r}}}},Fo={async getVideoLessonsByTopic(s){try{console.log(" Getting video lessons for topic ID:",s);const{data:t,error:r}=await ft(async()=>await F.from(yt.VIDEO_LESSONS).select(`
            video_id,
            video_num,
            title,
            description,
            duration_seconds,
            source,
            tags,
            language
          `).eq("topic_id",s).order("video_num",{ascending:!0}));return console.log(" Video lessons database response:",{data:t,error:r}),r?(console.error(" Error fetching video lessons:",r),{data:null,error:r}):{data:t,error:null}}catch(t){return console.error(" Error in getVideoLessonsByTopic:",t),{data:null,error:t}}},async getVideoLessonsBySubject(s){try{console.log(" Getting video lessons for subject ID:",s);const{data:t,error:r}=await F.from("video_lessons").select(`
          video_id,
          video_num,
          title,
          description,
          duration_seconds,
          source,
          tags,
          language
        `).eq("subject_id",s).order("video_num",{ascending:!0});return r?(console.error(" Error fetching video lessons by subject:",r),{data:null,error:r}):{data:t,error:null}}catch(t){return console.error(" Error in getVideoLessonsBySubject:",t),{data:null,error:t}}}},qo={async getLessonsByTopic(s){try{console.log(" Getting lessons for topic ID:",s);const{data:t,error:r}=await ft(async()=>await F.from(yt.LESSONS).select(`
            lessons_id,
            title,
            content,
            media_type,
            reading_time_minutes,
            created_at,
            updated_at
          `).eq("topic_id",s).order("lessons_id",{ascending:!0}));return console.log(" Lessons database response:",{data:t,error:r}),r?(console.error(" Error fetching lessons:",r),{data:null,error:r}):{data:t,error:null}}catch(t){return console.error(" Error in getLessonsByTopic:",t),{data:null,error:t}}}},ka={async getQuestionSets(){try{const{data:s,error:t}=await F.from("p1_mock_exam").select("*").order("Set",{ascending:!0}).order("part",{ascending:!0});if(t)throw t;const r=new Map;return s?.forEach(n=>{const i=n.Set||"Unknown";r.has(i)||r.set(i,{questions:[],totalMarks:0});const l=r.get(i);l.questions.push(n),l.totalMarks+=n.marks}),Array.from(r.entries()).map(([n,i])=>({set:n,...i})).sort((n,i)=>n.set.localeCompare(i.set))}catch(s){return console.error("Error fetching P1 mock exam data:",s),[]}},async getQuestionsBySet(s){try{const{data:t,error:r}=await F.from("p1_mock_exam").select("*").eq("Set",s).order("part",{ascending:!0});if(r)throw r;return t||[]}catch(t){return console.error("Error fetching questions by set:",t),[]}}},Bo={async getCaseStudies(){try{const{data:s,error:t}=await F.from("p2_mock_exam").select("*").limit(1);console.log("Table structure check:",{tableInfo:s,tableError:t}),s&&s.length>0&&console.log("Available columns:",Object.keys(s[0]));const{data:r,error:a}=await F.from("p2_mock_exam").select("*").order("case",{ascending:!0}).order("question_number",{ascending:!0});if(console.log("Database query result:",{data:r,error:a}),console.log("Sample question data:",r?.[0]),a)throw a;console.log("Raw P2 mock exam data:",r);const n=[...new Set(r?.map(o=>o.case).filter(Boolean))];console.log("Unique case values found:",n),n.forEach(o=>{const d=r?.filter(u=>u.case===o)||[],m=[...new Set(d.map(u=>u.case_study))];console.log(`Case "${o}": ${d.length} questions, ${m.length} unique case studies`),m.length>1&&console.warn(` Case "${o}" has ${m.length} different case study texts!`)});const i=new Map;r?.forEach(o=>{const d=o.case||o.case||"Unknown";console.log("Processing question:",{question_id:o.question_id,case:o.case,caseQuoted:o.case,caseKey:d,part:o.part,marks:o.marks,case_study:o.case_study?.substring(0,50)+"..."}),i.has(d)||(i.set(d,{questions:[],totalMarks:0,caseStudyText:o.case_study||""}),console.log(`Created new case group for: ${d} with case study text`));const m=i.get(d);m.questions.push(o),m.totalMarks+=o.marks,console.log(`Added question ${o.question_id} to case ${d}. Total questions: ${m.questions.length}, Total marks: ${m.totalMarks}`)}),console.log("Cases map:",i);const l=Array.from(i.entries()).map(([o,d])=>({case:o,questions:d.questions,totalMarks:d.totalMarks,caseStudyText:d.caseStudyText})).sort((o,d)=>o.case.localeCompare(d.case));return console.log("Final allCases:",l),l}catch(s){return console.error("Error fetching P2 mock exam data:",s),[]}},async getQuestionsByCase(s){try{const{data:t,error:r}=await F.from("p2_mock_exam").select("*").eq("case",s).order("question_number",{ascending:!0});if(r)throw r;return t||[]}catch(t){return console.error("Error fetching questions by case:",t),[]}}},pr=Object.freeze(Object.defineProperty({__proto__:null,authService:Ig,chatService:Rg,flashcardsService:Va,lessonsService:qo,p1MockExamService:ka,p2MockExamService:Bo,questionsService:Mg,studyPlansService:Og,studySessionsService:Dg,topicsService:Lt,userService:Lg,videoLessonsService:Fo},Symbol.toStringTag,{value:"Module"}));function zs({value:s,onValueChange:t,children:r}){const[a,n]=c.useState(!1),[i,l]=c.useState(s||""),o=c.useRef(null),d=c.useRef(null);c.useEffect(()=>{l(s||"")},[s]);const m=()=>{console.log("Trigger clicked, toggling dropdown"),n(!a)},u=p=>{console.log("Item clicked:",p),l(p),t?.(p),n(!1)};c.useEffect(()=>{const p=g=>{const y=g.target;o.current&&d.current&&!o.current.contains(y)&&!d.current.contains(y)&&n(!1)};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]);const x=c.Children.map(r,p=>{if(c.isValidElement(p)){if(p.type===Xt)return c.cloneElement(p,{onClick:m,ref:o});if(p.type===es){const g=c.Children.map(p.props.children,y=>c.isValidElement(y)&&y.type===Et?c.cloneElement(y,{onClick:()=>u(y.props.value),"data-selected":y.props.value===i}):y);return c.cloneElement(p,{ref:d,style:{display:a?"block":"none"},children:g})}if(p.type===vs)return c.cloneElement(p,{selectedValue:i})}return p});return e.jsx("div",{className:"relative",children:x})}const Xt=c.forwardRef(({className:s,children:t,onClick:r,...a},n)=>e.jsx("div",{ref:n,className:Ce("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",s),onClick:r,...a,children:t}));Xt.displayName="SelectTrigger";const es=c.forwardRef(({className:s,children:t,style:r,...a},n)=>e.jsx("div",{ref:n,className:Ce("absolute top-full left-0 z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md mt-1",s),style:r,...a,children:t}));es.displayName="SelectContent";function Et({value:s,children:t,onClick:r,className:a,...n}){return e.jsx("div",{className:Ce("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none hover:bg-accent hover:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n["data-selected"]&&"bg-accent text-accent-foreground",a),onClick:r,...n,children:t})}function vs({placeholder:s,selectedValue:t}){return t?e.jsxs("span",{className:"text-foreground",children:[t,"x"]}):e.jsx("span",{className:"text-muted-foreground",children:s})}class hs{static instance;activeSessions=new Map;sessionTimeouts=new Map;analyticsUpdateCallbacks=new Map;constructor(){}static getInstance(){return hs.instance||(hs.instance=new hs),hs.instance}async trackPageEntry(t,r,a,n={}){try{const i=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,l={id:i,userId:t,pageName:r,pageCategory:a,startTime:new Date,activities:[],metadata:n};this.activeSessions.set(i,l);const o=setTimeout(()=>{this.autoCloseSession(i)},30*60*1e3);return this.sessionTimeouts.set(i,o),await this.trackPageVisit(t,r,a),console.log(` Page entry tracked: ${r} (${a})`),i}catch(i){return console.error("Error tracking page entry:",i),""}}async trackPageExit(t,r={}){try{const a=this.activeSessions.get(t);if(!a){console.warn(`Session ${t} not found for exit tracking`);return}const n=new Date,i=Math.floor((n.getTime()-a.startTime.getTime())/1e3);a.endTime=n,a.duration=i,a.metadata={...a.metadata,...r};const l=this.sessionTimeouts.get(t);l&&(clearTimeout(l),this.sessionTimeouts.delete(t)),await this.updateDailyAnalytics(a),await this.storeSessionHistory(a),De.clearUserCache(a.userId),this.triggerAnalyticsUpdate(a.userId),this.activeSessions.delete(t),console.log(` Page exit tracked: ${a.pageName} (${i}s) - Analytics cache cleared`)}catch(a){console.error("Error tracking page exit:",a)}}async trackPageActivity(t,r,a={}){try{const n=this.activeSessions.get(t);if(!n){console.warn(`Session ${t} not found for activity tracking`);return}const i={type:r,timestamp:new Date,data:a};n.activities.push(i),await this.trackRealTimeActivity(n.userId,r,a),console.log(` Activity tracked: ${r} in ${n.pageName}`)}catch(n){console.error("Error tracking page activity:",n)}}async trackPageVisit(t,r,a){try{await this.updatePageVisitCounters(t,r,a),a==="dashboard"&&await this.updateDashboardVisitCount(t),De.clearUserCache(t),this.triggerAnalyticsUpdate(t),console.log(` Analytics cache cleared for user ${t} after page visit to ${r}`)}catch(n){console.error("Error tracking page visit:",n)}}async updatePageVisitCounters(t,r,a){try{const n=new Date().toISOString().split("T")[0],{data:i,error:l}=await F.from("daily_analytics").select("*").eq("user_id",t).eq("date",n).single();if(l&&l.code!=="PGRST116")throw l;const o={total_activities:(i?.total_activities||0)+1,updated_at:new Date().toISOString()};a==="practice"?o.questions_attempted=(i?.questions_attempted||0)+1:a==="lessons"?o.lessons_started=(i?.lessons_started||0)+1:a==="visual_learning"?o.video_lessons_watched=(i?.video_lessons_watched||0)+1:a==="flashcards"&&(o.flashcards_reviewed=(i?.flashcards_reviewed||0)+1);const{error:d}=await F.from("daily_analytics").upsert({date:n,user_id:t,...o},{onConflict:"date,user_id"});if(d)throw d}catch(n){console.error("Error updating page visit counters:",n)}}async updateDashboardVisitCount(t){try{const r=new Date().toISOString().split("T")[0],{data:a,error:n}=await F.from("daily_analytics").select("*").eq("user_id",t).eq("date",r).single();if(n&&n.code!=="PGRST116")throw n;const{error:i}=await F.from("daily_analytics").upsert({date:r,user_id:t,dashboard_visits:(a?.dashboard_visits||0)+1,updated_at:new Date().toISOString()},{onConflict:"date,user_id"});if(i)throw i}catch(r){console.error("Error updating dashboard visit count:",r)}}async updateDailyAnalytics(t){try{const r=new Date().toISOString().split("T")[0],a=t.duration||0,n=t.activities.length,{data:i,error:l}=await F.from("daily_analytics").select("*").eq("user_id",t.userId).eq("date",r).single();if(l&&l.code!=="PGRST116")throw l;const{error:o}=await F.from("daily_analytics").upsert({date:r,user_id:t.userId,total_time_spent:(i?.total_time_spent||0)+a,session_count:(i?.session_count||0)+1,total_activities:(i?.total_activities||0)+n,updated_at:new Date().toISOString()},{onConflict:"date,user_id"});if(o)throw o;for(const d of t.activities)await this.trackRealTimeActivity(t.userId,d.type,d.data);De.clearUserCache(t.userId),this.triggerAnalyticsUpdate(t.userId),console.log(` Analytics cache cleared for user ${t.userId} after session analytics update`)}catch(r){console.error("Error updating daily analytics:",r)}}async trackRealTimeActivity(t,r,a){try{De.clearUserCache(t),this.triggerAnalyticsUpdate(t),console.log(` Analytics cache cleared for user ${t} after ${r} activity`)}catch(n){console.error("Error tracking real-time activity:",n)}}async storeSessionHistory(t){try{const{error:r}=await F.from("page_sessions").insert({user_id:t.userId,page_name:t.pageName,page_category:t.pageCategory,start_time:t.startTime.toISOString(),end_time:t.endTime?.toISOString(),duration:t.duration,activities:t.activities,metadata:t.metadata});if(r)throw r}catch(r){console.error("Error storing session history:",r)}}async autoCloseSession(t){try{const r=this.activeSessions.get(t);r&&(console.log(` Auto-closing session: ${r.pageName}`),await this.trackPageExit(t,{autoClosed:!0}))}catch(r){console.error("Error auto-closing session:",r)}}getActiveSession(t){for(const r of this.activeSessions.values())if(r.userId===t)return r}async cleanupUserSessions(t){try{const r=Array.from(this.activeSessions.values()).filter(a=>a.userId===t);for(const a of r)await this.trackPageExit(a.id,{cleanup:!0})}catch(r){console.error("Error cleaning up user sessions:",r)}}onAnalyticsUpdate(t,r){this.analyticsUpdateCallbacks.has(t)||this.analyticsUpdateCallbacks.set(t,[]),this.analyticsUpdateCallbacks.get(t).push(r)}offAnalyticsUpdate(t,r){const a=this.analyticsUpdateCallbacks.get(t);if(a){const n=a.indexOf(r);n>-1&&a.splice(n,1)}}triggerAnalyticsUpdate(t){const r=this.analyticsUpdateCallbacks.get(t);r&&r.forEach(a=>{try{a()}catch(n){console.error("Error in analytics update callback:",n)}})}}const ra=hs.getInstance();function Ur({pageName:s,pageCategory:t,metadata:r={},trackActivities:a=!0}){const{user:n}=Re(),i=c.useRef(""),l=c.useRef(new Date);c.useEffect(()=>n?.id?((async()=>{try{const v=await ra.trackPageEntry(n.id,s,t,{...r,entryTime:new Date().toISOString(),userAgent:navigator.userAgent,screenResolution:`${screen.width}x${screen.height}`,viewport:`${window.innerWidth}x${window.innerHeight}`});i.current=v,l.current=new Date,console.log(` Page tracking started: ${s}`)}catch(v){console.error("Error tracking page entry:",v)}})(),()=>{if(i.current&&n?.id){const v=new Date,b=Math.floor((v.getTime()-l.current.getTime())/1e3);ra.trackPageExit(i.current,{...r,exitTime:v.toISOString(),sessionDuration:b,exitReason:"component_unmount",finalViewport:`${window.innerWidth}x${window.innerHeight}`}),console.log(` Page tracking ended: ${s} (${b}s)`)}}):void 0,[n?.id,s,t]);const o=async(f,v={})=>{if(!(!i.current||!a))try{await ra.trackPageActivity(i.current,f,{...v,timestamp:new Date().toISOString(),pageName:s,pageCategory:t})}catch(b){console.error("Error tracking page activity:",b)}};return{trackActivity:o,trackQuestionAttempt:async f=>{await o("question_attempt",f)},trackLessonProgress:async f=>{await o("lesson_progress",f)},trackFlashcardReview:async f=>{await o("flashcard_review",f)},trackVideoProgress:async f=>{await o("video_progress",f)},trackAITutorInteraction:async f=>{await o("ai_tutor_interaction",f)},trackEngagement:async f=>{await o("user_engagement",f)},trackError:async f=>{await o("error_occurred",f)},sessionId:i.current}}const $g={en:{practiceMode:"Exam Style Question Paper Practice",backToDashboard:"Back to Dashboard",question:"Question",of:"of",timeRemaining:"Time Remaining",difficulty:"Difficulty",topic:"Topic",hint:"Show Hint",showHint:"Show Hint",hideHint:"Hide Hint",skip:"Next Question",next:"Next",submit:"Submit Answer",explanation:"Explanation",correct:"Correct!",incorrect:"Incorrect",wellDone:"Well done! Your answer is correct.",tryAgain:"Not quite right. Here's the explanation:",aiHint:"AI Hint",hintText:"Try breaking this problem into smaller steps. Start by identifying what you're solving for.",aiTutor:"AI Tutor",askTutor:"Ask your AI tutor anything about this question...",send:"Send",typing:"AI Tutor is thinking...",selectSubject:"Select Subject",selectTopic:"Select Topic",startPractice:"Start Practice",subjects:{mathematics:"Mathematics",physics:"Physics",chemistry:"Chemistry",biology:"Biology",english:"English",history:"History",geography:"Geography",economics:"Economics",businessStudies:"Business Studies"},difficulties:{easy:"Easy",medium:"Medium",hard:"Hard"},welcomeTutor:"Hi! I'm your AI tutor. I'm here to help you understand this question and guide you through the solution. Feel free to ask me anything!"}};function Fg(){const{setCurrentPage:s,user:t}=Re(),[r,a]=c.useState("businessStudies"),[n,i]=c.useState(""),[l,o]=c.useState(null),[d,m]=c.useState(0),[u,x]=c.useState(null);c.useState(!1);const[p,g]=c.useState(!1),[y,f]=c.useState(!1),[v,b]=c.useState(!1),[w,h]=c.useState(450);c.useState(0);const[T,E]=c.useState(!1),[R,P]=c.useState(""),[k,G]=c.useState([]);c.useState(!1);const[Q,se]=c.useState([]),[S,U]=c.useState([]),[ee,ge]=c.useState(!1),[q,oe]=c.useState(0);c.useState(""),c.useState(!1),c.useState(!1);const[O,_]=c.useState([]),[me,le]=c.useState(!1),[D,Y]=c.useState(null),[he,Ne]=c.useState(!1),[ye,re]=c.useState(!1),[ce,Te]=c.useState([]),[A,z]=c.useState(new Set),ie=c.useRef(null);c.useRef(null);const te=$g.en,{trackQuestionAttempt:ve,trackEngagement:be,trackError:j}=Ur({pageName:"Practice Mode",pageCategory:"practice",metadata:{subject:r,topic:n}});c.useEffect(()=>{const I=setInterval(()=>{oe(W=>W+1)},1e3);return()=>clearInterval(I)},[]);const N=c.useRef(0);c.useEffect(()=>()=>{if(t?.id&&q>0){const I=q-N.current;I>0&&(console.log(` PracticeMode: Saving ${I} seconds of unsaved study time`),De.addStudyTime(t.id,I,"practice"))}},[t?.id,q]),c.useEffect(()=>{if(!t?.id)return;const I=setInterval(()=>{const W=q-N.current;W>=30&&(console.log(` PracticeMode: Periodic save - ${W} seconds`),De.addStudyTime(t.id,W,"practice"),N.current=q)},3e4);return()=>clearInterval(I)},[t?.id]);const $=I=>({mathematics:1,physics:2,chemistry:3,biology:4,english:5,history:6,geography:7,economics:8,businessStudies:9})[I]||0;c.useEffect(()=>{if(T&&k.length===0){const I={id:"1",type:"bot",content:te.welcomeTutor,timestamp:new Date,subject:r};G([I])}},[T,te.welcomeTutor,r,k.length]),c.useEffect(()=>{Q.length>0&&U(Q)},[Q]),c.useEffect(()=>{t?.id&&r&&l&&H()},[t?.id,r,l]);const H=async()=>{try{const{data:I,error:W}=await F.from("topics").select("topic_id").eq("subject_id",9);if(W)throw W}catch{}};c.useEffect(()=>{Z()},[k]),c.useEffect(()=>{const I=()=>{if(t?.id){const W=Math.round(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100);be({scrollDepth:W,timeOnPage:0,interactions:A.size,focusTime:0})}};return window.addEventListener("scroll",I),()=>window.removeEventListener("scroll",I)},[t?.id,A.size]),c.useEffect(()=>{console.log(" DEBUG: Current user state:",{currentUser:t,userId:t?.id,isLoggedIn:!!t,sessionId:R,selectedTopicId:l,selectedSubject:r}),console.log(" DEBUG: Analytics tracker available:",!!vt),console.log(" DEBUG: Analytics tracker methods:",Object.keys(vt))},[t,R,l,r]);const Z=()=>{ie.current?.scrollIntoView({behavior:"smooth"})},X=async I=>{le(!0);try{const{data:W,error:Se}=await Lt.getTopicsBySubject("businessStudies");Se?(console.error("Error fetching topics:",Se),_([])):_(W||[])}catch(W){console.error("Error in fetchTopics:",W),_([])}finally{le(!1)}};c.useEffect(()=>{X()},[]);const fe=async I=>{ge(!0);try{const{data:W,error:Se}=await Lt.getBusinessActivityQuestions(I);Se?(console.error("Error fetching business questions:",Se),se([])):(se(W||[]),console.log("Fetched business questions:",W))}catch(W){console.error("Error in fetchBusinessQuestions:",W),se([])}finally{ge(!1)}},Le=()=>r==="businessStudies"&&Q.length>0?Q.map(I=>({id:I.id||`q_${Math.random()}`,question:I.question||"Question text not available",options:I.options||["Option A","Option B","Option C","Option D"],correctAnswer:I.correct_option||"A",explanation:I.explanation||"Explanation not available",difficulty:I.difficulty||"medium",marks:I.marks||1,topic:I.topic||"Business Studies"})):S,pe=(()=>{if(r==="businessStudies"&&Q.length>0){const W=Q[d];if(W){console.log(" Raw question data from database:",W);const Se={id:W.id||`q_${d}`,question:W.question||"Question text not available",context:W.context||"",marks:W.marks||1,skill:W.skill||"",hint:W.hint||"",modelAnswer:W.model_answer||"",explanation:W.explanation||"",difficulty:W.difficulty||"medium",topic:W.topic_name||W.topic||"Business Studies"};return console.log(" Mapped question data:",Se),Se}}return Le()[d]})();if(console.log("=== DEBUG INFO ==="),console.log("Current questions:",S),console.log("Questions length:",S.length),console.log("Business questions state:",Q),console.log("Business questions length:",Q.length),console.log("Selected subject:",r),console.log("Selected topic ID:",l),console.log("Practice started:",T),console.log("Current question index:",d),console.log("Current question data:",pe),console.log("Hint data:",pe?.hint),console.log("Model answer data:",pe?.modelAnswer),console.log("=================="),T&&S.length===0)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading questions..."}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Business questions: ",Q.length]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Selected topic ID: ",l]})]})});const Wt=async()=>{z(I=>new Set([...I,d])),r==="businessStudies"&&u?await rs(u):g(!0);try{if(t?.id&&l&&pe){const I=pe;if(l){const W=parseInt(l);if(!isNaN(W)){await vt.trackActivity({userId:t.id,activityType:"question",topicId:W,subjectId:$(r),topicName:n,subjectName:r==="businessStudies"?"Business Studies":r,duration:450-w,timestamp:new Date().toISOString(),metadata:{questionId:String(I.id||`q_${d}`),isCorrect:!0,difficulty:I.difficulty||"medium",marks:I.marks||1,score:100}});const Se=!0,Ge=450-w;await It.trackQuestion(W,n,r==="businessStudies"?"Business Studies":r,Se,Ge,I.difficulty||"medium",I.marks||1)}}}}catch(I){console.error("Error tracking analytics:",I)}},rs=async I=>{if(console.log(" GradeAnswer function called with:",{studentAnswer:I,currentQuestionData:pe,selectedTopic:n,hasModelAnswer:!!pe?.modelAnswer}),!pe||!I.trim()){console.log(" Missing data:",{currentQuestionData:pe,studentAnswer:I}),alert("Please make sure you have selected a question and written an answer.");return}if(!pe.question){console.log(" No question text available"),alert("Question text not available. Please try again.");return}if(t?.id&&pe)try{await ve({subject:r||"Business Studies",topic:n||"General",difficulty:pe.difficulty||"medium",correct:!1,timeSpent:0,questionId:pe.id?.toString()})}catch(W){console.error("Error tracking question attempt:",W)}Ne(!0);try{const W={question:pe.question,model_answer:pe.modelAnswer||"No model answer available for this question.",student_answer:I,subject:"Business Studies",topic:n||"General Business"};console.log(" Sending grading request:",W);const Se=await fetch("http://localhost:8000/grade-answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)});if(console.log(" Response received:",Se.status,Se.statusText),Se.ok){const Ge=await Se.json();console.log(" Grading successful:",Ge),Y(Ge.result),g(!0);const K={questionNumber:d+1,questionText:pe.question,studentAnswer:I,gradingResult:Ge.result,topic:n,difficulty:pe.difficulty||"medium",marks:pe.marks||1,timestamp:new Date().toISOString()};Te(ne=>[...ne.filter(Ee=>Ee.questionNumber!==K.questionNumber),K])}else{console.error(" Grading failed:",Se.statusText);const Ge=await Se.text();console.error("Error details:",Ge),g(!0);const K={questionNumber:d+1,questionText:pe.question,studentAnswer:I,gradingResult:null,topic:n,difficulty:pe.difficulty||"medium",marks:pe.marks||1,timestamp:new Date().toISOString(),error:"Grading failed"};Te(ne=>[...ne.filter(Ee=>Ee.questionNumber!==K.questionNumber),K])}}catch(W){if(console.error(" Error grading answer:",W),t?.id)try{await j({errorType:"grading_error",errorMessage:W instanceof Error?W.message:"Unknown grading error",component:"PracticeMode",userAction:"submit_answer"})}catch(Ge){console.error("Error tracking error:",Ge)}g(!0);const Se={questionNumber:d+1,questionText:pe.question,studentAnswer:I,gradingResult:null,topic:n,difficulty:pe.difficulty||"medium",marks:pe.marks||1,timestamp:new Date().toISOString(),error:W instanceof Error?W.message:"Unknown error"};Te(Ge=>[...Ge.filter(ne=>ne.questionNumber!==Se.questionNumber),Se])}finally{Ne(!1)}},ot=async()=>{if(d<S.length-1){if(t?.id&&S[d])try{await ve({subject:r||"Business Studies",topic:n||"General",difficulty:S[d].difficulty||"medium",correct:u===S[d].correctAnswer,timeSpent:0,questionId:S[d].id?.toString()})}catch(I){console.error("Error tracking question attempt:",I)}m(d+1),x(null),g(!1),f(!1),Y(null),re(!1)}else{try{if(t?.id&&l){const I=450-w,W=S.length,Se=S.length;R&&(await vt.trackActivity({userId:t.id,activityType:"practice_session",topicId:parseInt(l),subjectId:$(r),topicName:n,subjectName:r==="businessStudies"?"Business Studies":r,duration:I,timestamp:new Date().toISOString(),metadata:{sessionId:R,questionsAnswered:W,correctAnswers:Se,totalQuestions:S.length,score:W>0?Math.round(Se/W*100):0}}),await It.trackPracticeSession(parseInt(l),n,r==="businessStudies"?"Business Studies":r,I,W,Se))}}catch(I){console.error("Error tracking session analytics:",I)}try{await It.endStudySession()}catch(I){console.log(" Could not end learning activity session:",I)}s("feedback")}},mt=()=>{ot()},Js=()=>{d>0&&(m(d-1),x(null),g(!1),f(!1),Y(null),re(!1))},Zs=I=>{switch(I){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return T?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(C,{variant:"ghost",onClick:()=>s("dashboard"),className:"mr-4",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),te.backToDashboard]})}),e.jsx("div",{className:"flex-1 flex justify-center items-center",children:e.jsx("h1",{className:"text-lg font-medium text-center",children:te.practiceMode})}),e.jsx("div",{className:"flex items-center space-x-4",children:me?e.jsx("div",{className:"w-[200px] h-8 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}):O.length>0?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 hidden md:block",children:"Topic:"}),e.jsxs(zs,{value:O.find(I=>I.title.toLowerCase().replace(/\s+/g,"_")===n)?.topic_id.toString()||"",onValueChange:I=>{const W=O.find(Se=>Se.topic_id.toString()===I);W&&(i(W.title),o(W.topic_id||null),m(0),x(null),g(!1),f(!1),b(!1),Y(null),re(!1),z(new Set),Te([]),W.topic_id&&fe(W.topic_id.toString()))},children:[e.jsxs(Xt,{className:"w-[200px] h-9 bg-white border-2 border-blue-200 hover:border-blue-400 focus:border-blue-500 shadow-sm hover:shadow-md transition-all",children:[e.jsx(_e,{className:"h-3.5 w-3.5 mr-2 text-blue-600"}),e.jsx(vs,{placeholder:"Select topic"})]}),e.jsx(es,{className:"max-h-[300px] overflow-y-auto bg-white border-2 border-blue-200 shadow-lg rounded-lg z-50",children:O.map((I,W)=>e.jsxs(Et,{value:I.topic_id.toString(),className:"cursor-pointer hover:bg-blue-50 focus:bg-blue-50 transition-colors",children:[e.jsxs("span",{className:"text-xs font-semibold text-blue-600 mr-2",children:[W+1,"."]}),I.title]},I.topic_id))})]})]}):null})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-2xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[pe?.hint&&e.jsxs(C,{variant:"outline",onClick:()=>f(!y),className:"flex items-center gap-2 bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-200 text-yellow-700 hover:from-yellow-100 hover:to-amber-100 hover:border-yellow-300 transition-all duration-300 shadow-sm",children:[e.jsx(Ke,{className:"h-4 w-4"}),y?te.hideHint:te.showHint]}),e.jsxs(C,{variant:"outline",onClick:()=>b(!v),className:"flex items-center gap-2 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 text-blue-700 hover:from-blue-100 hover:to-indigo-100 hover:border-blue-300 transition-all duration-300 shadow-sm",children:[e.jsx(Za,{className:"h-4 w-4"}),v?"Hide Guidelines":"Answering Guidelines"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Progress"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[d+1," of ",S.length]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(C,{variant:"outline",onClick:Js,disabled:d===0,className:"flex items-center gap-2 bg-gradient-to-r from-gray-50 to-slate-50 border-gray-300 text-gray-700 hover:from-gray-100 hover:to-slate-100 hover:border-gray-400 transition-all duration-300 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Previous Question"]}),e.jsxs(C,{variant:"outline",onClick:mt,disabled:d===S.length-1,className:"flex items-center gap-2 bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200 text-blue-700 hover:from-blue-100 hover:to-purple-100 hover:border-blue-300 transition-all duration-300 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:["Next Question",e.jsx(Ae,{className:"h-4 w-4"})]})]})]}),y&&pe?.hint&&e.jsx("div",{className:"absolute top-full left-0 mt-2 z-50 w-96 max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-yellow-200/50 p-6 animate-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h4",{className:"font-semibold text-yellow-800 text-lg",children:"Hint"})]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>f(!1),className:"text-yellow-600 hover:text-yellow-700 hover:bg-yellow-50 rounded-full p-1",children:e.jsx(Qe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-yellow-700 leading-relaxed",children:pe.hint})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(!1),className:"bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-200 text-yellow-700 hover:from-yellow-100 hover:to-amber-100 hover:border-yellow-300 transition-all duration-300",children:"Got it!"})})]})}),v&&e.jsx("div",{className:"absolute top-full left-0 mt-2 z-50 w-[450px] max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-blue-200/50 p-6 animate-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Za,{className:"h-5 w-5 text-blue-600"}),e.jsxs("h4",{className:"font-semibold text-blue-800 text-lg",children:["Answering Guidelines (",pe?.marks||0," marks)"]})]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>b(!1),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-full p-1",children:e.jsx(Qe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mb-4 space-y-3",children:[pe?.marks===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-3",children:[e.jsx("p",{className:"text-blue-800 text-sm font-semibold mb-1",children:"2 Mark Question Strategy:"}),e.jsx("p",{className:"text-blue-600 text-xs",children:"Brief, focused answers with key points. Aim for 2-3 sentences (30-50 words)."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"State the main point or definition clearly"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Provide one brief example or explanation"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Use business terminology appropriately"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Be concise - avoid lengthy explanations"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Aim for approximately 1 mark per well-explained point"})]})]}),pe?.marks===4&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-3",children:[e.jsx("p",{className:"text-blue-800 text-sm font-semibold mb-1",children:"4 Mark Question Strategy:"}),e.jsx("p",{className:"text-blue-600 text-xs",children:"Detailed explanation with examples. Aim for 4-6 sentences (70-100 words)."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Make 2-4 distinct points addressing the question"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Explain each point with relevant business concepts"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Provide specific examples to support your points"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Use context from the question in your answer"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Structure with clear, separate points or short paragraphs"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Balance depth with breadth - cover multiple aspects"})]})]}),pe?.marks===6&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-3",children:[e.jsx("p",{className:"text-blue-800 text-sm font-semibold mb-1",children:"6 Mark Question Strategy:"}),e.jsx("p",{className:"text-blue-600 text-xs",children:"Comprehensive analysis with depth. Aim for 8-12 sentences (120-180 words)."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Provide a well-structured answer with introduction and development"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Make 3-6 detailed points with thorough explanations"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Analyze using business theory and apply to the context"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Include multiple relevant examples to illustrate points"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Discuss different perspectives or factors (advantages/disadvantages)"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Use proper paragraphs to organize your answer logically"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Conclude by linking back to the question or context provided"})]})]}),pe?.marks!==2&&pe?.marks!==4&&pe?.marks!==6&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-3",children:[e.jsx("p",{className:"text-blue-800 text-sm font-semibold mb-1",children:"General Answering Strategy:"}),e.jsx("p",{className:"text-blue-600 text-xs",children:"Write a comprehensive answer addressing all parts of the question."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Address all parts of the question systematically"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Use relevant business terminology and concepts"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Provide examples where appropriate"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Structure your answer with clear paragraphs"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-blue-700 text-sm",children:"Ensure your answer length matches the marks allocated"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{variant:"outline",size:"sm",onClick:()=>b(!1),className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 text-blue-700 hover:from-blue-100 hover:to-indigo-100 hover:border-blue-300 transition-all duration-300",children:"Got it!"})})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 shadow-inner",children:e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-orange-500 h-3 rounded-full transition-all duration-500 shadow-sm",style:{width:`${(d+1)/S.length*100}%`}})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs(M,{className:"shadow-xl border-0 bg-gradient-to-br from-white via-blue-50/30 to-purple-50/30",children:[e.jsx(B,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(V,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg px-1 py-0.5",children:d+1}),e.jsxs("span",{className:"text-xl font-semibold",children:[te.question," ",d+1]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"bg-white/20 text-white border-white/30 backdrop-blur-sm font-medium",children:pe?.difficulty||"medium"}),r==="businessStudies"&&pe?.marks&&e.jsxs(ae,{className:"bg-white/20 text-white border-white/30 backdrop-blur-sm font-medium",children:[pe.marks," marks"]}),r==="businessStudies"&&pe?.skill&&e.jsx(ae,{className:"bg-white/20 text-white border-white/30 backdrop-blur-sm font-medium",children:pe.skill})]})]})}),e.jsxs(L,{className:"space-y-8 p-8",children:[r==="businessStudies"&&pe?.context&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-200/50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("h4",{className:"font-semibold text-blue-800 text-lg",children:"Context"})]}),e.jsx("p",{className:"text-blue-700 leading-relaxed",children:pe.context})]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50/30 p-6 rounded-2xl border border-gray-200/50 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-md flex-shrink-0",children:"Q"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 leading-relaxed",children:pe?.question})]})}),r!=="businessStudies"&&pe?.options&&pe.options.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"Select your answer:"}),pe.options.map(I=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"answer",value:I.id,checked:u===I.id,onChange:W=>x(W.target.value),className:"w-4 h-4 text-cyan-600 border-gray-300 focus:ring-cyan-500"}),e.jsx("span",{className:"text-gray-700",children:I.text})]},I.id))]}),p&&pe?.explanation&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-2xl border border-green-200/50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Me,{className:"h-5 w-5 text-green-600"}),e.jsx("h4",{className:"font-semibold text-green-800 text-lg",children:te.explanation})]}),e.jsx("p",{className:"text-green-700 leading-relaxed",children:pe.explanation})]})]})]})}),e.jsx("div",{children:e.jsxs(M,{className:"shadow-xl border-0 bg-gradient-to-br from-white via-orange-50/30 to-red-50/30",children:[e.jsx(B,{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-t-lg",children:e.jsxs(V,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center",children:e.jsx(Ls,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xl font-semibold",children:"Answer Here"})]})}),e.jsxs(L,{className:"h-full flex flex-col space-y-6 p-6",children:[r==="businessStudies"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-orange-50/30 p-4 rounded-2xl border border-orange-200/50 shadow-sm",children:e.jsx("textarea",{value:u||"",onChange:I=>x(I.target.value),className:"w-full h-32 p-4 border-0 bg-transparent focus:ring-0 focus:outline-none resize-none text-gray-700 leading-relaxed"})}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[e.jsx("span",{children:"Minimum 10 words required"}),e.jsxs("span",{children:[u?.split(" ").filter(I=>I.length>0).length||0," words"]})]}),e.jsx(C,{onClick:Wt,disabled:!u||u.trim().length<10||he,className:"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-orange-500/50 transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:he?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Grading Answer..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Submit Answer"]})}),e.jsxs(C,{onClick:()=>re(!0),disabled:!D,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-green-500/50 transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e.jsx(ec,{className:"h-4 w-4 mr-2"}),"Complete Session & View Report"]})]}),p&&r==="businessStudies"&&D&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-200/50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_e,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-800 text-lg",children:"AI Grading Results"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/50 p-4 rounded-xl text-center shadow-sm",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:[D.overall_score,"/50"]}),e.jsx("div",{className:"text-sm text-blue-500 font-medium",children:"Score"})]}),e.jsxs("div",{className:"bg-white/50 p-4 rounded-xl text-center shadow-sm",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:[D.percentage,"%"]}),e.jsx("div",{className:"text-sm text-blue-500 font-medium",children:"Percentage"})]})]}),e.jsx("div",{className:"text-center mb-6",children:e.jsxs(ae,{className:`text-xl px-6 py-3 rounded-xl font-bold shadow-lg ${D.grade==="A"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border-green-200":D.grade==="B"?"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 border-blue-200":D.grade==="C"?"bg-gradient-to-r from-yellow-100 to-amber-100 text-yellow-800 border-yellow-200":D.grade==="D"?"bg-gradient-to-r from-orange-100 to-red-100 text-orange-800 border-orange-200":"bg-gradient-to-r from-red-100 to-pink-100 text-red-800 border-red-200"}`,children:["Grade: ",D.grade]})}),D.strengths&&D.strengths.length>0&&e.jsxs("div",{className:"mb-6 bg-green-50/50 p-4 rounded-xl border border-green-200/50",children:[e.jsxs("h5",{className:"font-semibold text-green-700 mb-3 flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5"}),"Strengths"]}),e.jsx("ul",{className:"space-y-2",children:D.strengths.map((I,W)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-green-600 leading-relaxed",children:I})]},W))})]}),D.areas_for_improvement&&D.areas_for_improvement.length>0&&e.jsxs("div",{className:"mb-6 bg-orange-50/50 p-4 rounded-xl border border-orange-200/50",children:[e.jsxs("h5",{className:"font-semibold text-orange-700 mb-3 flex items-center gap-2",children:[e.jsx(gs,{className:"h-5 w-5"}),"Areas for Improvement"]}),e.jsx("ul",{className:"space-y-2",children:D.areas_for_improvement.map((I,W)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-orange-600 leading-relaxed",children:I})]},W))})]}),D.specific_feedback&&e.jsxs("div",{className:"mb-6 bg-blue-50/50 p-4 rounded-xl border border-blue-200/50",children:[e.jsxs("h5",{className:"font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(st,{className:"h-5 w-5"}),"Specific Feedback"]}),e.jsx("p",{className:"text-sm text-blue-600 leading-relaxed",children:D.specific_feedback})]}),D.suggestions&&D.suggestions.length>0&&e.jsxs("div",{className:"bg-purple-50/50 p-4 rounded-xl border border-purple-200/50",children:[e.jsxs("h5",{className:"font-semibold text-purple-700 mb-3 flex items-center gap-2",children:[e.jsx(kt,{className:"h-5 w-5"}),"Suggestions for Improvement"]}),e.jsx("ul",{className:"space-y-2",children:D.suggestions.map((I,W)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-purple-600 leading-relaxed",children:I})]},W))})]})]}),p&&r==="businessStudies"&&pe?.modelAnswer&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-2xl border border-green-200/50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("h4",{className:"font-semibold text-green-800 text-lg",children:"Model Answer"})]}),e.jsx("p",{className:"text-green-700 leading-relaxed",children:pe.modelAnswer})]})]})]})})]})]}),ye&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Practice Session Report"}),e.jsx(C,{onClick:()=>re(!1),variant:"outline",className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Topic"}),e.jsx("p",{className:"text-blue-600",children:n})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Questions Attempted"}),e.jsxs("p",{className:"text-green-600",children:[ce.length," of ",S.length]}),e.jsxs("p",{className:"text-xs text-green-500 mt-1",children:[S.length>0?Math.round(ce.length/S.length*100):0,"% completed"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:"Session Duration"}),e.jsxs("p",{className:"text-purple-600",children:[Math.ceil((450-w)/60)," minutes"]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("h3",{className:"font-semibold text-orange-800 mb-2",children:"Average Score"}),e.jsxs("p",{className:"text-orange-600",children:[ce.length>0?Math.round(ce.filter(I=>I.gradingResult).reduce((I,W)=>I+(W.gradingResult?.percentage||0),0)/ce.filter(I=>I.gradingResult).length):0,"%"]})]})]}),ce.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 p-6 rounded-lg border border-cyan-200 mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Overall Performance Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[ce.filter(I=>I.gradingResult).reduce((I,W)=>I+(W.gradingResult?.overall_score||0),0),"/",ce.filter(I=>I.gradingResult).length*50]}),e.jsx("div",{className:"text-sm text-blue-500",children:"Total Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[ce.length>0?Math.round(ce.filter(I=>I.gradingResult).reduce((I,W)=>I+(W.gradingResult?.percentage||0),0)/ce.filter(I=>I.gradingResult).length):0,"%"]}),e.jsx("div",{className:"text-sm text-green-500",children:"Average Percentage"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:ce.filter(I=>I.gradingResult).length>0?ce.filter(I=>I.gradingResult).reduce((I,W)=>{const Se=W.gradingResult?.grade==="A"?5:W.gradingResult?.grade==="B"?4:W.gradingResult?.grade==="C"?3:W.gradingResult?.grade==="D"?2:1;return I+Se},0)/ce.filter(I=>I.gradingResult).length:0}),e.jsx("div",{className:"text-sm text-purple-500",children:"Average Grade"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:ce.length}),e.jsx("div",{className:"text-sm text-orange-500",children:"Questions Attempted"})]})]})]}),ce.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Questions Summary"}),e.jsx("div",{className:"space-y-4",children:ce.sort((I,W)=>I.questionNumber-W.questionNumber).map((I,W)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Question ",I.questionNumber]}),e.jsx(ae,{className:Zs(I.difficulty),children:I.difficulty}),e.jsxs(ae,{className:"bg-purple-100 text-purple-800",children:[I.marks," marks"]}),I.gradingResult?e.jsxs(ae,{className:`${I.gradingResult.grade==="A"?"bg-green-100 text-green-800":I.gradingResult.grade==="B"?"bg-blue-100 text-blue-800":I.gradingResult.grade==="C"?"bg-yellow-100 text-yellow-800":I.gradingResult.grade==="D"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:["Grade: ",I.gradingResult.grade," (",I.gradingResult.percentage,"%)"]}):e.jsx(ae,{className:"bg-red-100 text-red-800",children:I.error||"Not Graded"})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:I.questionText})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-1",children:"Your Answer:"}),e.jsx("div",{className:"bg-white p-3 rounded border border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-700",children:I.studentAnswer})})]}),I.gradingResult&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"font-medium text-green-700 mb-2 flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),"Strengths"]}),e.jsx("ul",{className:"list-disc list-inside text-sm text-green-600 space-y-1",children:I.gradingResult.strengths?.slice(0,2).map((Se,Ge)=>e.jsx("li",{children:Se},Ge))})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-medium text-orange-700 mb-2 flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),"Areas for Improvement"]}),e.jsx("ul",{className:"list-disc list-inside text-sm text-orange-600 space-y-1",children:I.gradingResult.areas_for_improvement?.slice(0,2).map((Se,Ge)=>e.jsx("li",{children:Se},Ge))})]})]})]},W))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(C,{onClick:()=>re(!1),className:"flex-1 bg-gradient-to-r from-cyan-500 to-orange-500 hover:from-cyan-600 hover:to-orange-600 text-white",children:"Continue Practice"}),e.jsx(C,{onClick:()=>{re(!1),s("dashboard")},variant:"outline",className:"flex-1",children:"Back to Dashboard"})]})]})})}),e.jsx(_s,{timeSpent:q,savedTimeRef:N})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(C,{variant:"ghost",onClick:()=>s("dashboard"),className:"hover:bg-gray-100 rounded-xl px-4 py-2.5 transition-all duration-200",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-medium",children:te.backToDashboard})]})}),e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:te.practiceMode})}),e.jsxs(C,{size:"lg",className:`px-6 py-2 font-semibold shadow-lg transition-all duration-300 rounded-xl ${n?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,onClick:()=>{l&&(fe(l),E(!0))},disabled:!n||ee,children:[e.jsx(kt,{className:"h-5 w-5 mr-2"}),te.startPractice,e.jsx(Ae,{className:"h-5 w-5 ml-2"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 h-[calc(100vh-7.5rem)] overflow-hidden",children:e.jsxs("div",{className:"flex gap-6 h-full",children:[e.jsx("div",{className:"w-64 flex-shrink-0 h-full",children:e.jsxs(M,{className:"h-full shadow-lg border-0 bg-white/90 backdrop-blur-sm flex flex-col",children:[e.jsx(B,{className:"pb-3 border-b border-gray-200 flex-shrink-0",children:e.jsxs(V,{className:"text-base flex items-center gap-2 text-gray-800",children:[e.jsx(Pe,{className:"h-5 w-5 text-blue-600"}),"Subjects"]})}),e.jsxs(L,{className:"p-4 space-y-2 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Us,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Mathematics"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pr,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Physics"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ir,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Chemistry"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:`p-3 border-2 rounded-xl cursor-pointer transition-all duration-300 ${r==="businessStudies"?"border-blue-500 bg-gradient-to-br from-blue-50 to-purple-50 shadow-md":"border-gray-200 hover:border-blue-400 hover:shadow-sm"}`,onClick:()=>a("businessStudies"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yn,{className:`h-5 w-5 ${r==="businessStudies"?"text-blue-600":"text-gray-600"}`}),e.jsx("span",{className:`text-sm font-medium ${r==="businessStudies"?"text-blue-700":"text-gray-700"}`,children:"Business Studies"})]}),r==="businessStudies"&&e.jsx("div",{className:"mt-2 ml-8",children:e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"})})]})]})]})}),e.jsx("div",{className:"flex-1 h-full",children:e.jsxs(M,{className:"h-full shadow-lg border-0 bg-white/90 backdrop-blur-sm flex flex-col",children:[e.jsx(B,{className:"pb-3 border-b border-gray-200 flex-shrink-0",children:e.jsxs(V,{className:"text-base flex items-center gap-2 text-gray-800",children:[e.jsx(_e,{className:"h-5 w-5 text-blue-600"}),"Select Your Topic"]})}),e.jsx(L,{className:"p-4 flex-1 overflow-y-auto bg-white",children:me?e.jsxs("div",{className:"flex items-center justify-center py-20 text-gray-500",children:[e.jsx("div",{className:"w-6 h-6 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mr-3"}),e.jsx("span",{className:"text-lg",children:"Loading topics..."})]}):O.length>0?e.jsx("div",{className:"space-y-2",children:O.map((I,W)=>e.jsx("button",{onClick:()=>{i(I.title),o(I.topic_id||null)},className:`group w-full p-4 rounded-xl border-2 transition-all duration-200 text-left bg-white ${n===I.title?"border-blue-500 shadow-sm":"border-gray-200 hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${n===I.title?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 group-hover:bg-blue-100"}`,children:e.jsx("span",{className:"text-sm font-bold",children:W+1})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:`text-sm font-semibold ${n===I.title?"text-blue-700":"text-gray-700 group-hover:text-blue-600"}`,children:I.title})}),n===I.title&&e.jsx(_e,{className:"h-5 w-5 text-blue-600 flex-shrink-0"})]})},I.topic_id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(_e,{className:"h-16 w-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 text-center",children:"No topics available for this subject"})]})})]})})]})})]})}const qg={en:{title:"Flashcard Selection",subtitle:"Choose your Business Studies topic for focused learning",backToDashboard:"Back to Dashboard",selectSubject:"Select Subject",selectTopic:"Select Topic",startFlashcards:"Start Flashcards",allSubjects:"All Subjects",allTopics:"All Topics",subjects:{businessStudies:"Business Studies"},topics:{businessStudies:[]}}};function Bg(){const{setCurrentPage:s}=Re(),[t,r]=c.useState("businessStudies"),[a,n]=c.useState(""),[i,l]=c.useState([]),[o,d]=c.useState(!1),[m,u]=c.useState([]),[x,p]=c.useState(!1),g=qg.en;c.useEffect(()=>{y()},[]);const y=async()=>{d(!0);try{const{data:w,error:h}=await Lt.getTopicsBySubject("businessStudies");if(h)throw h;l(w||[])}catch{l([])}finally{d(!1)}},f=async w=>{p(!0);try{const{data:h,error:T}=await Va.getFlashcardsByTopic(w);if(T)throw T;u(h||[])}catch{u([])}finally{p(!1)}},v=w=>{const h=i.find(T=>T.topic_id.toString()===w);h?(n(h.title),h.topic_id&&f(h.topic_id)):(n(""),u([]))},b=()=>{localStorage.setItem("flashcardSubject",t),localStorage.setItem("flashcardTopic",a),m.length>0&&(localStorage.setItem("flashcardsData",JSON.stringify(m)),localStorage.setItem("selectedTopicId",i.find(w=>w.title===a)?.topic_id?.toString()||"")),s("flashcards")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(C,{variant:"ghost",onClick:()=>s("dashboard"),className:"mr-4",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),g.backToDashboard]})}),e.jsx("div",{className:"flex-1 flex justify-center items-center",children:e.jsx("h1",{className:"text-2xl font-bold text-center bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Flashcard Selection"})}),e.jsxs(C,{size:"lg",className:`px-6 py-2 font-semibold shadow-lg transition-all duration-300 rounded-xl ${a?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,onClick:b,disabled:!a||x,children:[e.jsx(qe,{className:"h-5 w-5 mr-2"}),g.startFlashcards,e.jsx(Ae,{className:"h-5 w-5 ml-2"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 h-[calc(100vh-7rem)] overflow-hidden",children:e.jsxs("div",{className:"flex gap-6 h-full",children:[e.jsx("div",{className:"w-64 flex-shrink-0 h-full",children:e.jsxs(M,{className:"h-full shadow-lg border-0 bg-white/90 backdrop-blur-sm flex flex-col",children:[e.jsx(B,{className:"pb-3 border-b border-gray-200 flex-shrink-0",children:e.jsxs(V,{className:"text-base flex items-center gap-2 text-gray-800",children:[e.jsx(Pe,{className:"h-5 w-5 text-purple-600"}),"Subjects"]})}),e.jsxs(L,{className:"p-4 space-y-2 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Us,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Mathematics"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pr,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Physics"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ir,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Chemistry"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:`p-3 border-2 rounded-xl cursor-pointer transition-all duration-300 ${t==="businessStudies"?"border-purple-500 bg-gradient-to-br from-purple-50 to-pink-50 shadow-md":"border-gray-200 hover:border-purple-400 hover:shadow-sm"}`,onClick:()=>r("businessStudies"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yn,{className:`h-5 w-5 ${t==="businessStudies"?"text-purple-600":"text-gray-600"}`}),e.jsx("span",{className:`text-sm font-medium ${t==="businessStudies"?"text-purple-700":"text-gray-700"}`,children:"Business Studies"})]}),t==="businessStudies"&&e.jsx("div",{className:"mt-2 ml-8",children:e.jsx("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-pulse"})})]})]})]})}),e.jsx("div",{className:"flex-1 h-full",children:e.jsxs(M,{className:"h-full shadow-lg border-0 bg-white/90 backdrop-blur-sm flex flex-col",children:[e.jsx(B,{className:"pb-3 border-b border-gray-200 flex-shrink-0",children:e.jsxs(V,{className:"text-base flex items-center gap-2 text-gray-800",children:[e.jsx(_e,{className:"h-5 w-5 text-purple-600"}),"Select Your Topic"]})}),e.jsx(L,{className:"p-4 flex-1 overflow-y-auto bg-white",children:o?e.jsxs("div",{className:"flex items-center justify-center py-20 text-gray-500",children:[e.jsx("div",{className:"w-6 h-6 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mr-3"}),e.jsx("span",{className:"text-lg",children:"Loading topics..."})]}):i.length>0?e.jsx("div",{className:"space-y-2",children:i.map((w,h)=>e.jsx("button",{onClick:()=>v(w.topic_id.toString()),className:`group w-full p-4 rounded-xl border-2 transition-all duration-200 text-left bg-white ${a===w.title?"border-purple-500 shadow-sm":"border-gray-200 hover:border-purple-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${a===w.title?"bg-purple-600 text-white":"bg-gray-100 text-gray-600 group-hover:bg-purple-100"}`,children:e.jsx("span",{className:"text-sm font-bold",children:h+1})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:`text-sm font-semibold ${a===w.title?"text-purple-700":"text-gray-700 group-hover:text-purple-600"}`,children:w.title})}),a===w.title&&e.jsx(Me,{className:"h-5 w-5 text-purple-600 flex-shrink-0"})]})},w.topic_id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(_e,{className:"h-16 w-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 text-center",children:"No topics available for this subject"})]})})]})})]})})]})}function zg(){const{language:s,setCurrentPage:t,user:r}=Re(),{trackFlashcardReview:a,trackEngagement:n,trackError:i}=Ur({pageName:"Flashcards",pageCategory:"flashcards",metadata:{subject:"Business Studies",topic:"General",studyMode:"learn"}}),[l,o]=c.useState(0),[d,m]=c.useState(null),[u,x]=c.useState(null),[p,g]=c.useState(!1);c.useState("learn");const[y,f]=c.useState(!1);c.useState(!1);const[v,b]=c.useState(!1),[w]=c.useState(Date.now());c.useState("businessStudies");const[h,T]=c.useState("all"),[E,R]=c.useState([]),[P,k]=c.useState(!1),[G,Q]=c.useState([]),[se,S]=c.useState(!1),[U,ee]=c.useState({cardsStudied:0,correctAnswers:0,streak:0,timeSpent:0,xpEarned:0,level:1}),[ge,q]=c.useState(0),[oe,O]=c.useState(0),[_,me]=c.useState(0),[le,D]=c.useState(0);c.useEffect(()=>{Y()},[]),c.useEffect(()=>{o(0),m(null),x(null),f(!1),D(0)},[h]);const Y=async()=>{k(!0);try{const{data:j,error:N}=await Lt.getTopicsBySubject("businessStudies");if(N)throw N;R(j||[])}catch{R([])}finally{k(!1)}},he=async(j,N)=>{S(!0);try{const{data:$,error:H}=await Va.getFlashcardsByTopic(j);if(H)throw H;const Z=N||h,X=($||[]).map((fe,Le)=>({id:fe.card_id,front:fe.question,back:`Correct Answer: ${fe.correct_option}

Options:
A) ${fe.option_a}
B) ${fe.option_b}
C) ${fe.option_c}
D) ${fe.option_d}`,subject:"Business Studies",topic:Z,difficulty:fe.difficulty||"medium",hint:fe.hint||"",explanation:fe.explanation||"",mastered:!1,reviewCount:0,optionA:fe.option_a,optionB:fe.option_b,optionC:fe.option_c,optionD:fe.option_d,correctOption:fe.correct_option}));Q(X)}catch($){console.error("Error fetching flashcards:",$),Q([])}finally{S(!1)}};c.useEffect(()=>{const j=localStorage.getItem("flashcardsData"),N=localStorage.getItem("flashcardTopic"),$=localStorage.getItem("selectedTopicId");if(j&&N&&$)try{const Z=JSON.parse(j).map((X,fe)=>({id:X.card_id,front:X.question,back:`Correct Answer: ${X.correct_option}

Options:
A) ${X.option_a}
B) ${X.option_b}
C) ${X.option_c}
D) ${X.option_d}`,subject:"Business Studies",topic:N,difficulty:X.difficulty||"medium",hint:X.hint||"",explanation:X.explanation||"",mastered:!1,reviewCount:0,optionA:X.option_a,optionB:X.option_b,optionC:X.option_c,optionD:X.option_d,correctOption:X.correct_option}));Q(Z),T(N),localStorage.removeItem("flashcardsData"),localStorage.removeItem("flashcardTopic"),localStorage.removeItem("selectedTopicId")}catch(H){console.error(" FlashcardPage: Error parsing flashcards from localStorage:",H)}else console.log(" FlashcardPage: No flashcards data in localStorage, will fetch from database")},[]),c.useEffect(()=>{if(v){const j=setInterval(()=>{l<G.length-1&&Te()},5e3);return()=>clearInterval(j)}},[v,l,G.length]),c.useEffect(()=>{const j=setInterval(()=>{ee(N=>({...N,timeSpent:N.timeSpent+1}))},1e3);return()=>clearInterval(j)},[w]);const Ne=c.useRef(0);c.useEffect(()=>()=>{if(r?.id&&U.timeSpent>0){const j=U.timeSpent-Ne.current;j>0&&(console.log(` FlashcardPage: Saving ${j} seconds of unsaved study time`),De.addStudyTime(r.id,j,"flashcards"))}},[r?.id,U.timeSpent]),c.useEffect(()=>{if(!r?.id)return;const j=setInterval(()=>{const N=U.timeSpent-Ne.current;N>=30&&(console.log(` FlashcardPage: Periodic save - ${N} seconds`),De.addStudyTime(r.id,N,"flashcards"),Ne.current=U.timeSpent)},3e4);return()=>clearInterval(j)},[r?.id]);const ye=U.cardsStudied>0?Math.round(U.correctAnswers/U.cardsStudied*100):0,re=h==="all"?G:G.filter(j=>j.topic===h),ce=re[l],Te=()=>{l<re.length-1&&(o(l+1),m(null),x(null),g(!1),f(!1))},A=async()=>{const j=E.findIndex(N=>N.title===h);if(j>=0&&j<E.length-1){const N=E[j+1];S(!0),T(N.title),N.topic_id?await he(N.topic_id,N.title):N.id&&await he(N.id,N.title)}},z=()=>{l>0&&(o(l-1),m(null),x(null),g(!1),f(!1))},ie=async j=>{const N=j===ce?.correctOption;x(j),m(N?"easy":"hard"),N||g(!0),me(H=>H+1),D(H=>H+1),N?q(H=>H+1):O(H=>H+1),ee(H=>({...H,cardsStudied:H.cardsStudied+1,correctAnswers:N?H.correctAnswers+1:H.correctAnswers,xpEarned:H.xpEarned+(N?10:5)}));try{if(r?.id&&ce){const H=Math.floor((Date.now()-w)/1e3);await a({subject:ce.subject||"Business Studies",topic:ce.topic||"General",difficulty:ce.difficulty||"medium",correct:N,timeSpent:H,cardId:ce.id?.toString()});const Z=E.find(fe=>fe.title===h),X=Number(Z?.topic_id)||1;await It.trackFlashcard(X,ce.topic||"General",ce.subject||"Business Studies",N,H,ce.difficulty||"medium")}}catch{}setTimeout(()=>{l<re.length-1&&Te()},N?2e3:4e3)},te=()=>{const j=(l+1)/re.length;return j>=.8?"Almost there! Just a few more! ":j>=.6?"Well done! You're on fire! ":"Excellent work! You're improving! "},be={en:{title:"Flashcards",subtitle:"Master Business Studies concepts",backToDashboard:"Back to Dashboard",learn:"Learn",review:"Review",test:"Test",previous:"Previous",next:"Next",cardOf:"Card {current} of {total}",hint:"Hint",mastered:"Mastered!",reviewLater:"Review Later",easy:"Easy",hard:"Hard",cardsToday:"Cards Today",accuracy:"Accuracy",streak:"Streak",timeSpent:"Time Spent",achievements:"Achievements",fireStreak:"Fire Streak",perfectScore:"Perfect Score",speedLearner:"Speed Learner"}}.en;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200/60 sticky top-0 z-50 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(C,{variant:"ghost",onClick:()=>t("dashboard"),className:"text-gray-600 hover:text-gray-900",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),be.backToDashboard]})}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:be.title}),h&&h!=="all"&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h})]}),e.jsx("div",{className:"hidden md:flex items-center space-x-6",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-green-100 px-3 py-1.5 rounded-full",children:[e.jsx(_e,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-green-700",children:[ye,"%"]})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:be.cardOf.replace("{current}",(l+1).toString()).replace("{total}",re.length.toString())}),e.jsxs("span",{className:"text-sm font-medium text-purple-600",children:[Math.round((l+1)/re.length*100),"%"]})]}),e.jsx(Zt,{value:(l+1)/re.length*100,className:"h-3 bg-white/60"}),e.jsx("p",{className:"text-xs text-gray-600 mt-2 text-center",children:te()})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3",children:[se?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(Ve,{className:"h-16 w-16 mx-auto mb-4 text-blue-500 animate-spin"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Loading Flashcards..."}),e.jsx("p",{className:"text-gray-500",children:"Fetching questions from the database"})]}):re.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(Pe,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Flashcards Available"}),e.jsx("p",{className:"text-gray-500",children:h==="all"?"Please select a specific topic to view flashcards":"No flashcards found for this topic. Please try another topic or check the database."})]}):e.jsx("div",{className:"relative mb-8 -mt-4",children:e.jsxs(M,{className:"relative w-full min-h-[400px] transition-all duration-300 transform-gpu shadow-2xl bg-gradient-to-br from-white via-blue-50/30 to-purple-50/30 border-0 backdrop-blur-sm",children:[ce?.hint&&e.jsxs("div",{className:"absolute top-4 right-4 z-10",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>f(!y),className:"text-blue-600 border-blue-300 hover:bg-blue-50 bg-white/90 backdrop-blur-sm",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),y?"Hide":"Hint"]}),y&&e.jsx("div",{className:"absolute top-full right-0 mt-2 z-50 w-80 max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-blue-200/50 p-6 animate-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ke,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Hint"}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:ce.hint})]}),e.jsx("button",{onClick:()=>f(!1),className:"w-6 h-6 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-gray-500 text-sm",children:""})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("button",{onClick:()=>f(!1),className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-700 text-sm font-medium py-2 px-4 rounded-lg transition-colors",children:"Got it!"})})]})})]}),e.jsx(L,{className:"p-10 flex flex-col justify-center items-center text-center min-h-[400px]",children:e.jsxs("div",{className:"space-y-7 w-full max-w-xl",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:e.jsx(qe,{className:"h-10 w-10 text-white"})}),e.jsx("div",{className:"absolute w-20 h-20 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full opacity-20 animate-ping"})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:ce?.front})}),e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-5 w-full",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 text-center",children:"Choose your answer"}),e.jsx("div",{className:"grid grid-cols-2 gap-5 w-full max-w-lg",children:["A","B","C","D"].map((j,N)=>{const $=ce?.[`option${j}`],H=u===j,Z=ce?.correctOption===j;return e.jsxs("button",{onClick:X=>{X.stopPropagation(),ie(j)},className:`
                                  relative p-5 rounded-2xl border-2 transition-all duration-300 cursor-pointer text-left
                                  hover:scale-105 hover:shadow-lg transform
                                  ${H?Z?"bg-green-50 border-green-400 shadow-green-200 shadow-lg":"bg-red-50 border-red-400 shadow-red-200 shadow-lg":"bg-white border-gray-200 hover:border-blue-300 hover:shadow-md"}
                                  ${u!==null?"cursor-not-allowed":"cursor-pointer"}
                                `,disabled:u!==null,children:[e.jsx("div",{className:`
                                  absolute -top-2 -left-2 w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold
                                  ${H?Z?"bg-green-500 text-white":"bg-red-500 text-white":"bg-blue-500 text-white"}
                                `,children:j}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-gray-800 font-medium text-sm leading-relaxed",children:$||`Option ${j}`})}),H&&e.jsx("div",{className:"absolute top-3 right-3",children:Z?e.jsx(Me,{className:"h-5 w-5 text-green-500"}):e.jsx(gs,{className:"h-5 w-5 text-red-500"})})]},j)})})]}),p&&u&&u!==ce?.correctOption&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(gs,{className:"h-5 w-5 text-red-600"}),e.jsx("h4",{className:"text-sm font-semibold text-red-800",children:"Incorrect Answer"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-red-700 mb-2",children:"Correct Answer:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"bg-green-600 text-white px-2 py-1 text-xs",children:ce?.correctOption}),e.jsxs("span",{className:"text-sm text-gray-700",children:[ce?.correctOption==="A"&&ce?.optionA,ce?.correctOption==="B"&&ce?.optionB,ce?.correctOption==="C"&&ce?.optionC,ce?.correctOption==="D"&&ce?.optionD]})]})]}),ce?.explanation&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-red-700 mb-2",children:"Explanation:"}),e.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-200",children:ce.explanation})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-red-200",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-red-600",children:[e.jsx(Fe,{className:"h-3 w-3"}),e.jsx("span",{children:"Next card in 5 seconds..."})]})})]})]})})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(C,{variant:"outline",onClick:z,disabled:l===0,className:"px-6 py-3 bg-white/80 backdrop-blur-sm",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),be.previous]}),e.jsx("div",{className:"flex space-x-2",children:re.map((j,N)=>e.jsx("div",{className:`w-4 h-4 rounded-full transition-all duration-300 ${N===l?"bg-gradient-to-r from-blue-500 to-purple-500 scale-125 shadow-lg":N<l?"bg-green-500 shadow-md":"bg-gray-200"}`},N))}),e.jsxs(C,{onClick:le>=5?A:Te,disabled:le>=5?!1:l===re.length-1,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white shadow-lg",children:[le>=5?"Next Topic":be.next,e.jsx(Ae,{className:"h-4 w-4 ml-2"})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(M,{className:"sticky top-24 shadow-lg border-0 bg-white/90 backdrop-blur-sm",children:[e.jsx(B,{className:"pb-3 border-b border-gray-200",children:e.jsxs(V,{className:"text-base flex items-center gap-2 text-gray-800",children:[e.jsx(ct,{className:"h-5 w-5 text-yellow-500"}),"Your Progress"]})}),e.jsxs(L,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(qe,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Attempted"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:_})]})]})}),e.jsx("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-xl border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center",children:e.jsx(Me,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Correct"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:ge})]})]})}),e.jsx("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-xl border border-red-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center",children:e.jsx(gs,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Incorrect"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:oe})]})]})}),_>0&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Accuracy"}),e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[Math.round(ge/_*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${ge/_*100}%`}})})]}),_>0&&ge===_&&e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-gradient-to-r from-yellow-100 to-amber-100 rounded-xl border border-yellow-300",children:[e.jsx(ur,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{className:"text-sm font-semibold text-orange-700",children:"Perfect Score! "})]})]})]})})]})]}),e.jsx("style",{children:`
        .animate-slideInUp {
          animation: slideInUp 0.3s ease-out;
        }
        @keyframes slideInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `}),e.jsx(_s,{timeSpent:U.timeSpent,savedTimeRef:Ne})]})}function Ug(){const{setCurrentPage:s}=Re(),r={en:{backToDashboard:"Back to Dashboard",mathematics:"Mathematics",progress:"Overall Progress",chapters:"Chapters",smartPractice:"Smart Practice",smartPracticeDesc:"AI-powered questions based on past papers",visualLearning:"Visual Learning",visualLearningDesc:"Interactive animations and diagrams",flashcards:"Flashcards",flashcardsDesc:"Spaced repetition learning system",mockExams:"Mock Exams",mockExamsDesc:"Full-length practice examinations",startPractice:"Start Practice",watchVideo:"Watch Video",reviewCards:"Review Cards",takeExam:"Take Exam",completed:"Completed",inProgress:"In Progress",notStarted:"Not Started"}}.en,a=[{id:1,title:"Algebra Fundamentals",progress:100,status:"completed",topics:8,completedTopics:8},{id:2,title:"Quadratic Equations",progress:75,status:"inProgress",topics:6,completedTopics:4},{id:3,title:"Functions and Graphs",progress:60,status:"inProgress",topics:10,completedTopics:6},{id:4,title:"Calculus Introduction",progress:0,status:"notStarted",topics:12,completedTopics:0}],n=Math.round(a.reduce((o,d)=>o+d.progress,0)/a.length),i=o=>{switch(o){case"completed":return"bg-green-100 text-green-800";case"inProgress":return"bg-blue-100 text-blue-800";case"notStarted":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},l=o=>{switch(o){case"completed":return r.completed;case"inProgress":return r.inProgress;case"notStarted":return r.notStarted;default:return r.notStarted}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs(C,{variant:"ghost",onClick:()=>s("dashboard"),className:"mr-4",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),r.backToDashboard]}),e.jsx("h1",{className:"text-xl font-semibold",children:r.mathematics})]})})})}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs(M,{className:"border-0 shadow-lg",children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2 text-[#FF4A10]"}),r.progress]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-3xl font-bold text-[#FF4A10]",children:[n,"%"]}),e.jsxs("span",{className:"text-gray-600",children:[a.filter(o=>o.status==="completed").length," / ",a.length," ",r.chapters]})]}),e.jsx(Zt,{value:n,className:"h-3"})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(M,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>s("practice"),children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(qe,{className:"h-6 w-6 mr-3 text-[#FF4A10]"}),r.smartPractice]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:r.smartPracticeDesc}),e.jsxs(C,{className:"w-full bg-[#FF4A10] hover:bg-[#E63E0E] text-white",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),r.startPractice]})]})]}),e.jsxs(M,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>s("visual-learning"),children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(xt,{className:"h-6 w-6 mr-3 text-blue-600"}),r.visualLearning]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:r.visualLearningDesc}),e.jsxs(C,{variant:"outline",className:"w-full border-blue-600 text-blue-600 hover:bg-blue-50",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),r.watchVideo]})]})]}),e.jsxs(M,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>s("flashcard-selection"),children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(ca,{className:"h-6 w-6 mr-3 text-green-600"}),r.flashcards]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:r.flashcardsDesc}),e.jsxs(C,{variant:"outline",className:"w-full border-green-600 text-green-600 hover:bg-green-50",children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),r.reviewCards]})]})]}),e.jsxs(M,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow cursor-pointer",children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(rt,{className:"h-6 w-6 mr-3 text-purple-600"}),r.mockExams]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:r.mockExamsDesc}),e.jsxs(C,{variant:"outline",className:"w-full border-purple-600 text-purple-600 hover:bg-purple-50",children:[e.jsx(rt,{className:"h-4 w-4 mr-2"}),r.takeExam]})]})]})]}),e.jsxs(M,{className:"border-0 shadow-lg",children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(Pe,{className:"h-5 w-5 mr-2 text-[#FF4A10]"}),r.chapters]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:a.map(o=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold",children:o.title}),e.jsx(ae,{className:i(o.status),children:l(o.status)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:[o.completedTopics,"/",o.topics," topics completed"]}),e.jsxs("span",{children:[o.progress,"%"]})]}),e.jsx(Zt,{value:o.progress,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.status==="completed"&&e.jsx(Me,{className:"h-4 w-4 text-green-600 mr-1"}),o.status==="inProgress"&&e.jsx(Fe,{className:"h-4 w-4 text-blue-600 mr-1"}),e.jsxs("span",{children:[o.status==="completed"&&"Chapter completed",o.status==="inProgress"&&"In progress",o.status==="notStarted"&&"Not started"]})]}),o.status!=="notStarted"&&e.jsx(C,{size:"sm",variant:"outline",onClick:()=>s("practice"),children:"Continue"}),o.status==="notStarted"&&e.jsx(C,{size:"sm",className:"bg-[#FF4A10] hover:bg-[#E63E0E] text-white",onClick:()=>s("practice"),children:"Start"})]})]},o.id))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(M,{className:"border-0 shadow-lg",children:[e.jsx(B,{children:e.jsx(V,{children:"Quick Stats"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Completed"}),e.jsx("span",{className:"font-semibold text-green-600",children:a.filter(o=>o.status==="completed").length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"In Progress"}),e.jsx("span",{className:"font-semibold text-blue-600",children:a.filter(o=>o.status==="inProgress").length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Not Started"}),e.jsx("span",{className:"font-semibold text-gray-600",children:a.filter(o=>o.status==="notStarted").length})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Overall Progress"}),e.jsxs("span",{className:"font-semibold text-[#FF4A10]",children:[n,"%"]})]})})]})]}),e.jsxs(M,{className:"border-0 shadow-lg",children:[e.jsx(B,{children:e.jsx(V,{children:"Recent Activity"})}),e.jsxs(L,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:"Completed Algebra Quiz"}),e.jsx("div",{className:"text-xs text-gray-600",children:"2 hours ago"})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg",children:[e.jsx(bt,{className:"h-4 w-4 text-blue-600 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:"Watched Functions Video"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Yesterday"})]})]})]})]})]})]})})]})}const Gg={en:{title:"AI Feedback Report",backToPractice:"Back to Practice",overallScore:"Overall Score",breakdown:"Score Breakdown",strengths:"Strengths",weaknesses:"Areas for Improvement",recommendations:"AI Recommendations",retryQuestions:"Retry Incorrect Questions",nextPractice:"Continue Practice",mistakesByTopic:"Mistakes by Topic",confidence:"Confidence Level",timeSpent:"Time Spent",accuracy:"Accuracy Rate",improvementSuggestions:"Improvement Suggestions",wellDone:"Well done! You've shown good understanding in several areas.",keepPracticing:"Keep practicing to improve your weaker areas.",categories:[{name:"Algebra",score:85,total:5,correct:4},{name:"Geometry",score:60,total:3,correct:2},{name:"Calculus",score:75,total:4,correct:3}],strengthItems:["Strong understanding of algebraic equations","Good problem-solving approach","Consistent calculation accuracy"],weaknessItems:["Geometric visualization needs improvement","Formula memorization in calculus","Time management during complex problems"],recommendationItems:["Practice more geometric shape recognition exercises","Review calculus formulas with visual aids","Take timed practice sessions to improve speed"]}};function Hg({title:s,score:t,totalQuestions:r,correctAnswers:a}){return e.jsxs(M,{className:"border-0 shadow-lg",children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(Yt,{className:"h-5 w-5 mr-2 text-[#FF4A10]"}),s]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"text-6xl font-bold text-[#FF4A10] mb-2",children:[t,"%"]}),e.jsx("div",{className:"text-gray-600",children:`${a} out of ${r} questions correct`})]}),e.jsx(Zt,{value:t,className:"h-3 mb-4"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a}),e.jsx("div",{className:"text-sm text-gray-600",children:"Correct"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:r-a}),e.jsx("div",{className:"text-sm text-gray-600",children:"Incorrect"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:"7:30"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Time"})]})]})]})]})}function Vg({title:s,categories:t}){const r=n=>n>=80?"text-green-600":n>=60?"text-yellow-600":"text-red-600",a=n=>n>=80?"bg-green-100 text-green-800":n>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return e.jsxs(M,{className:"border-0 shadow-lg",children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2 text-[#FF4A10]"}),s]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:t.map((n,i)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:n.name}),e.jsxs(ae,{className:a(n.score),children:[n.score,"%"]})]}),e.jsx(Zt,{value:n.score,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:`${n.correct}/${n.total} correct`}),e.jsxs("span",{className:r(n.score),children:[n.score,"%"]})]})]},i))})})]})}function aa({title:s,items:t,type:r}){const a=()=>{switch(r){case"strengths":return Me;case"weaknesses":return gs;case"recommendations":return Ke;default:return Me}},n=()=>{switch(r){case"strengths":return"text-green-600";case"weaknesses":return"text-red-600";case"recommendations":return"text-blue-600";default:return"text-gray-600"}},i=()=>{switch(r){case"strengths":return"bg-green-50";case"weaknesses":return"bg-red-50";case"recommendations":return"bg-blue-50";default:return"bg-gray-50"}},l=a();return e.jsxs(M,{className:"border-0 shadow-lg",children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(l,{className:`h-5 w-5 mr-2 ${n()}`}),s]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3",children:t.map((o,d)=>e.jsx("div",{className:`p-3 rounded-lg ${i()}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(l,{className:`h-4 w-4 mr-3 mt-0.5 flex-shrink-0 ${n()}`}),e.jsx("span",{className:"text-gray-700",children:o})]})},d))})})]})}function Wg(){const s="en",{setCurrentPage:t}=Re(),r=Gg[s],a=73,n=12,i=9;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs(C,{variant:"ghost",onClick:()=>t("practice"),className:"mr-4",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),r.backToPractice]}),e.jsx("h1",{className:"text-xl font-semibold",children:r.title})]})})})}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(Hg,{title:r.overallScore,score:a,totalQuestions:n,correctAnswers:i,language:s}),e.jsx(Vg,{title:r.breakdown,categories:r.categories,language:s}),e.jsx(aa,{title:r.strengths,items:r.strengthItems,type:"strengths"}),e.jsx(aa,{title:r.weaknesses,items:r.weaknessItems,type:"weaknesses"}),e.jsx(aa,{title:r.recommendations,items:r.recommendationItems,type:"recommendations"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{className:"border-0 shadow-lg",children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:r.accuracy}),e.jsxs("span",{className:"font-bold text-[#FF4A10]",children:[a,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:r.timeSpent}),e.jsx("span",{className:"font-bold",children:"7:30"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:r.confidence}),e.jsx("span",{className:"font-bold text-green-600",children:"High"})]})]})})}),e.jsx(M,{className:"border-0 shadow-lg",children:e.jsxs(L,{className:"p-6 space-y-3",children:[e.jsxs(C,{className:"w-full bg-[#FF4A10] hover:bg-[#E63E0E] text-white",onClick:()=>t("practice"),children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),r.retryQuestions]}),e.jsxs(C,{variant:"outline",className:"w-full",onClick:()=>t("practice"),children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),r.nextPractice]}),e.jsxs(C,{variant:"outline",className:"w-full",onClick:()=>t("analytics"),children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"View Progress"]})]})}),e.jsx(M,{className:"border-0 shadow-lg bg-blue-50",children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(qe,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsx("span",{className:"font-semibold text-blue-800",children:"AI Insight"})]}),e.jsxs("p",{className:"text-blue-700 text-sm",children:[r.wellDone," ",r.keepPracticing]})]})}),e.jsx(M,{className:"border-0 shadow-lg",children:e.jsxs(L,{className:"p-6 space-y-3",children:[e.jsx(C,{variant:"ghost",className:"w-full justify-start",onClick:()=>t("dashboard"),children:"Back to Dashboard"}),e.jsx(C,{variant:"ghost",className:"w-full justify-start",onClick:()=>t("flashcards"),children:"Practice Flashcards"})]})})]})]})})]})}const Qg={en:{title:"Choose Your Plan",subtitle:"Affordable pricing for every learner",monthly:"Monthly",yearly:"Yearly",save:"Save 20%",mostPopular:"Most Popular",getStarted:"Get Started",backToHome:"Back to Home",individual:{title:"Individual Student",price:"$12",period:"/month",yearlyPrice:"$120",yearlyPeriod:"/year",description:"Perfect for individual students",features:["Access to all subjects","AI-powered feedback","Practice questions & mock exams","Visual learning materials","Progress tracking","Bilingual support","Mobile app access"]},premium:{title:"Premium Student",price:"$20",period:"/month",yearlyPrice:"$200",yearlyPeriod:"/year",description:"Enhanced learning experience",features:["Everything in Individual","1-on-1 AI tutoring sessions","Advanced analytics","Priority support","Offline content access","Custom study plans","Unlimited practice tests"]},school:{title:"School License",price:"QAR 300-500",period:"/student/year",description:"For educational institutions",features:["Bulk student accounts","Teacher dashboard","Class management tools","Custom branding","Advanced reporting","Admin panel access","Dedicated support"]},faq:{title:"Frequently Asked Questions",items:[{question:"Can I switch between plans?",answer:"Yes, you can upgrade or downgrade your plan at any time."},{question:"Is there a free trial?",answer:"Yes, we offer a 7-day free trial for all plans."},{question:"What subjects are covered?",answer:"We cover all IGCSE, A-Level, and IB subjects including Math, Science, Languages, and more."}]}}};function Yg(){const{setCurrentPage:s}=Re(),[t,r]=He.useState(!1),a=Qg.en;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(C,{variant:"ghost",onClick:()=>s("landing"),className:"mr-4",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),a.backToHome]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl font-bold text-black",children:""}),e.jsx("span",{className:"text-xl font-bold text-[#FF4A10] ml-1",children:"Imtehaan"})]})]}),e.jsx(C,{onClick:()=>s("onboarding"),children:a.getStarted})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h1",{className:"text-4xl font-bold text-black mb-4",children:a.title}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:a.subtitle}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-8",children:[e.jsx("span",{className:`${t?"text-gray-600":"text-black font-medium"}`,children:a.monthly}),e.jsx("button",{onClick:()=>r(!t),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${t?"bg-[#FF4A10]":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:`${t?"text-black font-medium":"text-gray-600"}`,children:a.yearly}),t&&e.jsx(ae,{className:"bg-green-100 text-green-800 ml-2",children:a.save})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 mb-16",children:[e.jsxs(M,{className:"border-2 border-gray-200 hover:border-[#FF4A10]/50 transition-colors",children:[e.jsxs(B,{className:"text-center pb-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(jr,{className:"h-8 w-8 text-[#FF4A10]"})}),e.jsx(V,{className:"text-2xl",children:a.individual.title}),e.jsx("p",{className:"text-gray-600",children:a.individual.description}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-4xl font-bold text-black",children:t?a.individual.yearlyPrice:a.individual.price}),e.jsx("span",{className:"text-gray-600",children:t?a.individual.yearlyPeriod:a.individual.period})]})]}),e.jsxs(L,{children:[e.jsx("ul",{className:"space-y-3 mb-8",children:a.individual.features.map((n,i)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(Gr,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:n})]},i))}),e.jsxs(C,{className:"w-full bg-[#FF4A10] hover:bg-[#E63E0E] text-white",onClick:()=>s("onboarding"),children:[a.getStarted,e.jsx(Ae,{className:"h-4 w-4 ml-2"})]})]})]}),e.jsxs(M,{className:"border-2 border-[#FF4A10] relative shadow-lg",children:[e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsxs(ae,{className:"bg-[#FF4A10] text-white px-4 py-1",children:[e.jsx(Wl,{className:"h-3 w-3 mr-1"}),a.mostPopular]})}),e.jsxs(B,{className:"text-center pb-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(mr,{className:"h-8 w-8 text-[#FF4A10]"})}),e.jsx(V,{className:"text-2xl",children:a.premium.title}),e.jsx("p",{className:"text-gray-600",children:a.premium.description}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-4xl font-bold text-black",children:t?a.premium.yearlyPrice:a.premium.price}),e.jsx("span",{className:"text-gray-600",children:t?a.premium.yearlyPeriod:a.premium.period})]})]}),e.jsxs(L,{children:[e.jsx("ul",{className:"space-y-3 mb-8",children:a.premium.features.map((n,i)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(Gr,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:n})]},i))}),e.jsxs(C,{className:"w-full bg-[#FF4A10] hover:bg-[#E63E0E] text-white",onClick:()=>s("onboarding"),children:[a.getStarted,e.jsx(Ae,{className:"h-4 w-4 ml-2"})]})]})]}),e.jsxs(M,{className:"border-2 border-gray-200 hover:border-[#FF4A10]/50 transition-colors",children:[e.jsxs(B,{className:"text-center pb-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(_l,{className:"h-8 w-8 text-[#FF4A10]"})}),e.jsx(V,{className:"text-2xl",children:a.school.title}),e.jsx("p",{className:"text-gray-600",children:a.school.description}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-2xl font-bold text-black",children:a.school.price}),e.jsx("div",{className:"text-gray-600 text-sm",children:a.school.period})]})]}),e.jsxs(L,{children:[e.jsx("ul",{className:"space-y-3 mb-8",children:a.school.features.map((n,i)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(Gr,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:n})]},i))}),e.jsxs(C,{variant:"outline",className:"w-full border-[#FF4A10] text-[#FF4A10] hover:bg-[#FF4A10] hover:text-white",onClick:()=>s("onboarding"),children:["Request Demo",e.jsx(Ae,{className:"h-4 w-4 ml-2"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-8",children:"Why Choose Imtehaan?"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[#FF4A10]/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(kt,{className:"h-8 w-8 text-[#FF4A10]"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"AI-Powered Learning"}),e.jsx("p",{className:"text-gray-600",children:"Personalized feedback and adaptive learning paths"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[#FF4A10]/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Kn,{className:"h-8 w-8 text-[#FF4A10]"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"English Interface"}),e.jsx("p",{className:"text-gray-600",children:"Learn in English with our intuitive interface"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[#FF4A10]/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(jr,{className:"h-8 w-8 text-[#FF4A10]"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Proven Results"}),e.jsx("p",{className:"text-gray-600",children:"85% of students improve their grades by at least one level"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-8",children:a.faq.title}),e.jsx("div",{className:"space-y-6 max-w-3xl mx-auto",children:a.faq.items.map((n,i)=>e.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:n.question}),e.jsx("p",{className:"text-gray-600",children:n.answer})]},i))})]}),e.jsxs("div",{className:"text-center mt-16",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Start Learning?"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Join thousands of students improving their grades with Imtehaan"}),e.jsxs(C,{size:"lg",className:"bg-[#FF4A10] hover:bg-[#E63E0E] text-white px-8 py-4",onClick:()=>s("onboarding"),children:["Start Free Trial",e.jsx(Ae,{className:"h-5 w-5 ml-2"})]})]})]})]})}class Kg{baseURL;conversationHistory;currentTopic;userId;constructor(){const t=typeof window<"u"?window.location.hostname:"localhost",r="8000";this.baseURL=`http://${t}:${r}`,this.conversationHistory=[],this.currentTopic=null,this.userId=null}setUserId(t){this.userId=t}setCurrentTopic(t){this.currentTopic=t}addToHistory(t,r){this.conversationHistory.push({role:t,content:r,timestamp:new Date().toISOString()}),this.conversationHistory.length>20&&(this.conversationHistory=this.conversationHistory.slice(-20))}getConversationHistory(){return this.conversationHistory}clearHistory(){this.conversationHistory=[]}async sendMessage(t,r){try{const a={message:t,topic:this.currentTopic||"Business Studies",lesson_content:r,user_id:this.userId||"anonymous",conversation_history:this.conversationHistory,learning_level:"intermediate"};console.log(" Sending message to LangChain AI Tutor:",{topic:this.currentTopic,message:t.substring(0,100)+"...",hasLessonContent:!!r});const n=await fetch(`${this.baseURL}/tutor/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();return console.log(" LangChain AI Tutor response received:",{responseLength:i.response.length,suggestions:i.suggestions.length,relatedConcepts:i.related_concepts.length,confidence:i.confidence_score}),this.addToHistory("user",t),this.addToHistory("assistant",i.response),{success:!0,data:i}}catch(a){return console.error("Error sending message to AI Tutor:",a),this.addToHistory("assistant","I apologize, but I'm having trouble connecting right now. Please try again."),{success:!1,error:a instanceof Error?a.message:"Unknown error",data:{response:"I apologize, but I'm having trouble connecting right now. Please try again.",suggestions:["Check your internet connection","Try again in a moment","Contact support if the problem persists"],related_concepts:[],confidence_score:0}}}}async generateLesson(t,r,a="intermediate"){try{const n={topic:t,learning_objectives:r,difficulty_level:a},i=await fetch(`${this.baseURL}/tutor/generate-lesson`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return{success:!0,data:await i.json()}}catch(n){return console.error("Error generating lesson:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async getAvailableTopics(){try{const t=await fetch(`${this.baseURL}/tutor/topics`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return{success:!0,data:(await t.json()).topics}}catch(t){return console.error("Error fetching topics:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async healthCheck(){try{const t=await fetch(`${this.baseURL}/tutor/health`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return{success:!0,data:await t.json()}}catch(t){return console.error("Health check failed:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async testLangChainConnection(){try{console.log(" Testing LangChain AI Tutor connection...");const t="Hello! Can you briefly explain what Business Strategy means?",r=await this.sendMessage(t);if(r.success&&r.data)return console.log(" LangChain AI Tutor connection test successful!"),{success:!0,data:{message:"LangChain AI Tutor is working perfectly!",response:r.data.response,confidence:r.data.confidence_score}};throw new Error("Failed to get response from LangChain AI Tutor")}catch(t){return console.error(" LangChain AI Tutor connection test failed:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}getSuggestedQuestions(t){return[`Can you explain ${t} with a real-world example?`,`What are the key differences between ${t} and related concepts?`,`How would you apply ${t} in a business scenario?`,`What are common mistakes people make when learning about ${t}?`,`Can you give me a practice question about ${t}?`,`What are the main benefits of understanding ${t}?`,`How does ${t} relate to other business concepts?`,`Can you break down ${t} into simpler parts?`].slice(0,4)}exportConversation(){const t={topic:this.currentTopic,userId:this.userId,timestamp:new Date().toISOString(),messages:this.conversationHistory},r=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=`ai-tutor-conversation-${this.currentTopic}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)}}const $t=new Kg;function Jg(){const{setCurrentPage:s,user:t}=Re(),{trackLessonProgress:r,trackVideoProgress:a,trackAITutorInteraction:n,trackEngagement:i}=Ur({pageName:"AI Tutor & Lessons",pageCategory:"lessons",metadata:{topic:"Unknown",lessonCount:0}}),{trackAIInteraction:l,trackLessonStart:o,trackLessonComplete:d}=Gs({pageTitle:"AI Tutor & Lessons",pageUrl:"/ai-tutor",trackClicks:!0,trackTime:!0,trackScroll:!0}),[m,u]=c.useState(null),[x,p]=c.useState([]),[g,y]=c.useState(!1),[f,v]=c.useState([]),[b,w]=c.useState(!1),[h,T]=c.useState(null);c.useState({});const[E,R]=c.useState(0),[P,k]=c.useState(!1),[G,Q]=c.useState(!1),[se,S]=c.useState(1),[U,ee]=c.useState(""),[ge,q]=c.useState(0);c.useRef(null);const oe=c.useRef(null),O=c.useRef(null),[_,me]=c.useState([]),[le,D]=c.useState(""),[Y,he]=c.useState(!1),[Ne,ye]=c.useState([]),[re,ce]=c.useState([]),[Te,A]=c.useState([]),[z,ie]=c.useState(null),[te,ve]=c.useState(!1);c.useEffect(()=>{j()},[m]),c.useEffect(()=>{_.length>1&&z&&$()},[_]);const be=()=>m?`ai_tutor_chat_history_${m.topic_id}`:"ai_tutor_chat_history",j=()=>{const K=be(),ne=localStorage.getItem(K);if(ne)try{A(JSON.parse(ne))}catch(xe){console.error("Error loading chat history:",xe)}},N=K=>{const ne=be();localStorage.setItem(ne,JSON.stringify(K)),A(K)},$=()=>{if(!z||_.length<=1)return;const ne=_.find($e=>$e.role==="user")?.content.slice(0,50)||"New Chat",xe={id:z,title:ne,messages:_,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()},Ee=[...Te],Oe=Ee.findIndex($e=>$e.id===z);Oe>=0?Ee[Oe]=xe:Ee.unshift(xe);const Be=Ee.slice(0,20);N(Be)},H=()=>{const K=`chat_${Date.now()}`;ie(K),me([]),ye([]),ce([]),$t.clearHistory(),Wt(m?.title||"Business Studies")},Z=K=>{const ne=Te.find(xe=>xe.id===K);ne&&(ie(ne.id),me(ne.messages),$t.clearHistory(),ne.messages.forEach(xe=>{$t.addToHistory(xe.role,xe.content)}),ve(!1))},X=K=>{const ne=Te.filter(xe=>xe.id!==K);N(ne),z===K&&H()};c.useEffect(()=>{const K=setInterval(()=>{R(ne=>ne+1)},1e3);return()=>clearInterval(K)},[]);const fe=c.useRef(0);c.useEffect(()=>()=>{if(t?.id&&E>0){const K=E-fe.current;K>0&&(console.log(` AI Tutor: Saving ${K} seconds of unsaved study time`),De.addStudyTime(t.id,K,"ai-tutor"))}},[t?.id,E]),c.useEffect(()=>{if(!t?.id)return;const K=setInterval(()=>{const ne=E-fe.current;ne>=30&&(console.log(` AI Tutor: Periodic save - ${ne} seconds`),De.addStudyTime(t.id,ne,"ai-tutor"),fe.current=E)},3e4);return()=>clearInterval(K)},[t?.id]);const Le=async()=>{y(!0);try{const{data:K,error:ne}=await Lt.getTopicsBySubject("businessStudies");if(ne)throw ne;p(K||[])}catch(K){console.error("Error fetching topics:",K),p([])}finally{y(!1)}};c.useEffect(()=>{Le();const K=localStorage.getItem("selectedTopic"),ne=localStorage.getItem("selectedTopicId");if(K&&ne)try{const xe=JSON.parse(K);u(xe),$t.setUserId(t?.id||"anonymous"),$t.setCurrentTopic(xe.title),tt(xe.topic_id),Wt(xe.title,!0)}catch{}},[]);const tt=async K=>{try{w(!0);const{data:ne,error:xe}=await qo.getLessonsByTopic(K);if(xe)throw xe;v(ne||[]),ne&&ne.length>0&&T(ne[0])}catch{v([])}finally{w(!1)}},pe=async K=>{const ne=x.find(xe=>xe.topic_id.toString()===K);ne&&(u(ne),$t.setCurrentTopic(ne.title),await tt(ne.topic_id),Wt(ne.title,!0),ee(""),q(0))},Wt=async(K,ne=!1)=>{try{if(ne||!z){const Oe=`chat_${Date.now()}`;ie(Oe)}const xe=`Hi! I'm here to help you understand ${K}. What would you like to know about this topic?`;me([{role:"assistant",content:xe,timestamp:new Date().toISOString()}]);const Ee=$t.getSuggestedQuestions(K);ye(Ee)}catch(xe){console.error("Error initializing AI Tutor:",xe)}},rs=async()=>{if(!le.trim()||Y)return;const K=le.trim();D(""),he(!0);const ne={role:"user",content:K,timestamp:new Date().toISOString()};me(xe=>[...xe,ne]);try{const xe=h?.content||"";if(t?.id)try{await n({subject:m?.subject||"General",topic:m?.title||"Unknown",questionType:"general_question",responseTime:0,helpful:!1})}catch(Oe){console.error("Error tracking AI tutor interaction:",Oe)}l(K,0);const Ee=await $t.sendMessage(K,xe);if(Ee.success&&Ee.data){const Oe={role:"assistant",content:Ee.data.response,timestamp:new Date().toISOString()};me(Be=>[...Be,Oe]),ye(Ee.data.suggestions),ce(Ee.data.related_concepts)}else{const Oe={role:"assistant",content:"I apologize, but I'm having trouble processing your request. Please try again.",timestamp:new Date().toISOString()};me(Be=>[...Be,Oe])}}catch(xe){console.error("Error sending message:",xe);const Ee={role:"assistant",content:"I apologize, but I'm having trouble connecting right now. Please try again.",timestamp:new Date().toISOString()};me(Oe=>[...Oe,Ee])}finally{he(!1)}},ot=K=>{switch(K?.toLowerCase()){case"video":return e.jsx(pt,{className:"h-4 w-4 text-blue-600"});case"audio":return e.jsx(bt,{className:"h-4 w-4 text-green-600"});case"image":return e.jsx(cs,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(rt,{className:"h-4 w-4 text-gray-600"})}},mt=K=>K?new Date(K).toLocaleDateString():"N/A",Js=K=>K.replace(/\s+/g," ").trim().split(" ").filter(ne=>ne.length>0),Zs=(K,ne)=>K.map((xe,Ee)=>Ee===ne?`<span class="highlighted-word" style="background-color: #fef08a; padding: 2px 4px; border-radius: 4px; transition: all 0.2s;">${xe}</span>`:xe).join(" "),I=()=>{if(!h)return;window.speechSynthesis.cancel();const K=h.content.replace(/\*\*/g,"").replace(/\*/g,"").replace(/<[^>]*>/g,""),ne=Js(K);q(0);const xe=new SpeechSynthesisUtterance(K);xe.lang="en-US",xe.rate=se,xe.pitch=1,xe.volume=1;const Oe=60/150*1e3;xe.onstart=()=>{k(!0),Q(!1),q(0);let Be=0;const $e=setInterval(()=>{if(Be<ne.length&&window.speechSynthesis.speaking){q(Be);const Xs=Zs(ne,Be);ee(Xs),console.log(`Highlighting word ${Be}: ${ne[Be]}`),console.log("Highlighted content:",Xs),Be++}else clearInterval($e)},Oe);xe.highlightInterval=$e},xe.onend=()=>{k(!1),Q(!1),q(0),ee(""),xe.highlightInterval&&clearInterval(xe.highlightInterval)},xe.onerror=()=>{k(!1),Q(!1),q(0),ee(""),xe.highlightInterval&&clearInterval(xe.highlightInterval)},oe.current=xe,window.speechSynthesis.speak(xe)},W=()=>{window.speechSynthesis.speaking&&!window.speechSynthesis.paused&&(window.speechSynthesis.pause(),Q(!0),oe.current&&oe.current.highlightInterval&&clearInterval(oe.current.highlightInterval))},Se=()=>{if(window.speechSynthesis.paused&&(window.speechSynthesis.resume(),Q(!1),h)){const K=h.content.replace(/\*\*/g,"").replace(/\*/g,"").replace(/<[^>]*>/g,""),ne=Js(K),Ee=60/150*1e3;let Oe=ge;const Be=setInterval(()=>{if(Oe<ne.length&&window.speechSynthesis.speaking){q(Oe);const $e=Zs(ne,Oe);ee($e),Oe++}else clearInterval(Be)},Ee);oe.current&&(oe.current.highlightInterval=Be)}},Ge=()=>{window.speechSynthesis.cancel(),k(!1),Q(!1),q(0),ee(""),oe.current&&oe.current.highlightInterval&&clearInterval(oe.current.highlightInterval)};return c.useEffect(()=>()=>{window.speechSynthesis.cancel()},[h]),c.useEffect(()=>{ee(""),q(0)},[h]),c.useEffect(()=>{console.log("highlightedText changed:",U)},[U]),m?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between relative",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>s("ai-tutor-topic-selection"),className:"text-gray-600 hover:text-gray-900",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Back to Topics"]}),e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:g?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 animate-spin text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Loading topics..."})]}):x.length>0?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Topic:"}),e.jsxs(zs,{value:m?.topic_id?.toString()||"",onValueChange:pe,children:[e.jsxs(Xt,{className:"w-[300px] h-9 bg-white border-2 border-blue-200 hover:border-blue-400 focus:border-blue-500 shadow-sm hover:shadow-md transition-all",children:[e.jsx(_e,{className:"h-4 w-4 mr-2 text-blue-600"}),e.jsx(vs,{placeholder:"Select a topic"})]}),e.jsx(es,{className:"max-h-[300px] overflow-y-auto bg-white border-2 border-blue-200 shadow-lg rounded-lg z-50",children:x.map((K,ne)=>e.jsx(Et,{value:K.topic_id.toString(),className:"cursor-pointer hover:bg-blue-50 focus:bg-blue-50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[ne+1,"."]}),e.jsx("span",{className:"text-sm",children:K.title})]})},K.topic_id))})]})]}):e.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:m?.title||"AI Tutor"})}),e.jsx("div",{className:"flex items-center gap-3"})]})}),e.jsxs("div",{className:"flex h-[calc(100vh-5rem)]",children:[e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:b?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading lessons..."})]})}):f.length>0?e.jsx("div",{className:"space-y-4",children:h&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ot(h.media_type),e.jsx("span",{className:"text-sm font-medium",children:h.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[P?G?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(C,{size:"sm",variant:"outline",onClick:Se,className:"flex items-center gap-1.5 text-xs border-green-200 hover:bg-green-50 hover:border-green-300",children:[e.jsx(bt,{className:"h-3.5 w-3.5 text-green-600"}),"Resume"]}),e.jsxs(C,{size:"sm",variant:"outline",onClick:Ge,className:"flex items-center gap-1.5 text-xs border-red-200 hover:bg-red-50 hover:border-red-300",children:[e.jsx(an,{className:"h-3.5 w-3.5 text-red-600"}),"Stop"]})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(C,{size:"sm",variant:"outline",onClick:W,className:"flex items-center gap-1.5 text-xs border-orange-200 hover:bg-orange-50 hover:border-orange-300",children:[e.jsx(_c,{className:"h-3.5 w-3.5 text-orange-600"}),"Pause"]}),e.jsxs(C,{size:"sm",variant:"outline",onClick:Ge,className:"flex items-center gap-1.5 text-xs border-red-200 hover:bg-red-50 hover:border-red-300",children:[e.jsx(an,{className:"h-3.5 w-3.5 text-red-600"}),"Stop"]})]}):e.jsxs(C,{size:"sm",variant:"outline",onClick:I,className:"flex items-center gap-1.5 text-xs border-blue-200 hover:bg-blue-50 hover:border-blue-300",children:[e.jsx(ed,{className:"h-3.5 w-3.5 text-blue-600"}),"Listen"]}),e.jsx(ae,{variant:"outline",className:"text-xs",children:h.media_type||"text"})]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("div",{ref:O,className:"text-gray-700 leading-relaxed text-sm",dangerouslySetInnerHTML:{__html:(()=>{const ne=(U||h.content.replace(/\*\*/g,"").replace(/\*/g,"")).split(`
`);let xe="",Ee=!1;for(let Oe=0;Oe<ne.length;Oe++){const Be=ne[Oe],$e=Be.trim();if($e.startsWith("-")){Ee||(xe+='<ul class="list-disc list-inside mb-2 space-y-1 ml-4">',Ee=!0);const Xs=$e.substring(1).trim();xe+=`<li class="text-gray-700">${Xs}</li>`}else Ee&&(xe+="</ul>",Ee=!1),$e&&(Be===Be.toUpperCase()||/^\d+\./.test($e))?xe+=`<h3 class="text-base font-bold text-gray-900 mt-4 mb-2">${$e}</h3>`:$e&&/^[A-Z][a-z]+/.test($e)&&$e.length<100&&!$e.includes(".")&&!$e.includes(",")?xe+=`<h4 class="text-sm font-semibold text-gray-800 mt-3 mb-1">${$e}</h4>`:$e&&(xe+=`<p class="mb-2">${$e}</p>`)}return Ee&&(xe+="</ul>"),xe})()}})}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Created: ",mt(h.created_at)]}),e.jsxs("span",{children:["Updated: ",mt(h.updated_at)]})]})})]})]})}):e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-8 text-center",children:[e.jsx(Pe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Lessons Available"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No lessons found for this topic. Please check if data exists in your lessons table."})]})}),e.jsxs("div",{className:"relative w-[500px] bg-gradient-to-b from-white to-blue-50/30 border-l border-gray-200 flex flex-col shadow-xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-purple-600 text-white p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:e.jsx(er,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-bold",children:"AI Tutor"}),e.jsxs("div",{className:"flex items-center text-xs text-blue-100",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mr-1.5 animate-pulse"}),"Always Available"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:H,className:"text-white hover:bg-white/20 h-8 w-8 p-0",title:"New Chat",children:e.jsx(br,{className:"h-4 w-4"})}),e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>ve(!te),className:"text-white hover:bg-white/20 h-8 w-8 p-0 relative",title:"Chat History",children:[e.jsx(en,{className:"h-4 w-4"}),Te.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-[8px] rounded-full w-4 h-4 flex items-center justify-center",children:Te.length})]})]})]})}),te&&e.jsxs("div",{className:"absolute inset-y-0 right-full w-[350px] bg-white border-r border-gray-200 shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(en,{className:"h-5 w-5"}),e.jsx("h3",{className:"font-bold text-sm",children:"Chat History"})]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>ve(!1),className:"text-white hover:bg-white/20 h-7 w-7 p-0",children:e.jsx(Ie,{className:"h-4 w-4"})})]}),e.jsxs(C,{size:"sm",onClick:H,className:"w-full bg-white/20 hover:bg-white/30 text-white border border-white/30",children:[e.jsx(br,{className:"h-4 w-4 mr-2"}),"New Chat"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:Te.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(tn,{className:"h-12 w-12 text-gray-300 mb-3"}),e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"No chat history yet"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Start a conversation to see it here"})]}):e.jsx("div",{className:"space-y-2",children:Te.map(K=>e.jsxs("div",{className:`group relative p-3 rounded-lg border-2 cursor-pointer transition-all ${z===K.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,onClick:()=>Z(K.id),children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(tn,{className:"h-4 w-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900 truncate mb-1",children:K.title}),e.jsxs("p",{className:"text-[10px] text-gray-500",children:[new Date(K.lastUpdated).toLocaleDateString()," at ",new Date(K.lastUpdated).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-1",children:[K.messages.filter(ne=>ne.role==="user").length," messages"]})]})]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:ne=>{ne.stopPropagation(),X(K.id)},className:"absolute top-2 right-2 h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(vr,{className:"h-3 w-3"})})]},K.id))})})]}),e.jsx("div",{className:"flex-1 p-5 overflow-y-auto bg-white/50",children:_.length===0?e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:e.jsx(er,{className:"h-4 w-4 text-white"})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 text-gray-800 p-3 rounded-2xl max-w-[85%] text-xs shadow-sm border border-blue-100",children:m?h?`Hi! I'm here to help you understand "${h.title}" from the ${m.title} topic. Feel free to ask me any questions about this lesson!`:`Hi! I'm here to help you with ${m.title}. Please select a lesson to get started!`:"Hi! I'm here to help you with your studies. Please select a topic to get started!"})]}):e.jsxs("div",{className:"space-y-3",children:[_.map((K,ne)=>e.jsxs("div",{className:`flex items-start gap-2.5 ${K.role==="user"?"justify-end":"justify-start"}`,children:[K.role==="assistant"&&e.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:e.jsx(er,{className:"h-4 w-4 text-white"})}),e.jsx("div",{className:`p-3 rounded-2xl max-w-[80%] text-xs shadow-sm ${K.role==="user"?"bg-gradient-to-br from-blue-600 to-purple-600 text-white":"bg-gradient-to-br from-blue-50 to-purple-50 text-gray-800 border border-blue-100"}`,children:K.content}),K.role==="user"&&e.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:e.jsx(Ls,{className:"h-3.5 w-3.5 text-white"})})]},ne)),Y&&e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:e.jsx(er,{className:"h-4 w-4 text-white"})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 text-gray-800 p-3 rounded-2xl max-w-[80%] text-xs shadow-sm border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(We,{placeholder:h?`Ask me about "${h.title}"...`:"Ask me anything about this topic...",className:"flex-1 text-xs border-2 border-gray-200 focus:border-blue-500 rounded-xl py-2 px-3",value:le,onChange:K=>D(K.target.value),onKeyPress:K=>K.key==="Enter"&&rs(),disabled:Y}),e.jsx(C,{size:"sm",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-4 shadow-lg hover:shadow-xl transition-all",onClick:rs,disabled:Y||!le.trim(),children:e.jsx(Lc,{className:"h-4 w-4"})})]}),re.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"text-[10px] font-medium text-gray-600 mb-1.5 flex items-center gap-1.5",children:[e.jsx(Bt,{className:"h-3 w-3 text-purple-500"}),"Related concepts:"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:re.slice(0,3).map((K,ne)=>e.jsx("span",{className:"text-[10px] bg-gradient-to-r from-purple-50 to-pink-50 text-purple-700 px-2.5 py-1 rounded-lg border border-purple-200 shadow-sm",children:K},ne))})]})]})]})]}),e.jsx(_s,{timeSpent:E,savedTimeRef:fe})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading topic data..."})]})})}function Zg({className:s,children:t,...r}){return e.jsx("div",{className:Ce("relative overflow-auto",s),...r,children:t})}function Xg({className:s,ratio:t=16/9,children:r,...a}){return e.jsx("div",{className:Ce("relative w-full",s),style:{aspectRatio:t},...a,children:r})}const e0={en:{visualLearning:"Visual Learning",backToDashboard:"Back to Dashboard",selectSubject:"Select Subject",selectTopic:"Select Topic",startLearning:"Start Learning",duration:"Duration",views:"Views",rating:"Rating",instructor:"Instructor",difficulty:"Difficulty",watchNow:"Watch Now",addToBookmarks:"Add to Bookmarks",shareVideo:"Share Video",downloadNotes:"Download Notes",relatedVideos:"Related Videos",videoLibrary:"Video Library",businessStudies:"Business Studies",videoDescription:"Comprehensive video lessons designed for Business Studies curriculum. Learn through visual explanations, animations, and expert instruction.",noVideosFound:"No videos found for this topic. Please try selecting a different topic.",loadingTopics:"Loading topics..."}};function t0(){const{setCurrentPage:s,user:t}=Re(),{trackVideoProgress:r,trackEngagement:a,trackError:n}=Ur({pageName:"Visual Learning",pageCategory:"visual_learning",metadata:{subject:"Business Studies",topic:"General",videoCount:0}}),[i,l]=c.useState("businessStudies"),[o,d]=c.useState(""),[m,u]=c.useState(!1),[x,p]=c.useState(null),[g,y]=c.useState([]),[f,v]=c.useState(!1),[b,w]=c.useState([]),[h,T]=c.useState(!1),[E,R]=c.useState(!1),[P,k]=c.useState(0),G=e0.en;c.useEffect(()=>{const D=setInterval(()=>{k(Y=>Y+1)},1e3);return()=>clearInterval(D)},[]);const Q=c.useRef(0);c.useEffect(()=>()=>{if(t?.id&&P>0){const D=P-Q.current;D>0&&(console.log(` VisualLearning: Saving ${D} seconds of unsaved study time`),De.addStudyTime(t.id,D,"visual-learning"))}},[t?.id,P]),c.useEffect(()=>{if(!t?.id)return;const D=setInterval(()=>{const Y=P-Q.current;Y>=30&&(console.log(` VisualLearning: Periodic save - ${Y} seconds`),De.addStudyTime(t.id,Y,"visual-learning"),Q.current=P)},3e4);return()=>clearInterval(D)},[t?.id]);const se=D=>1,S=async D=>{try{if(t?.id&&o){const Y=D.duration_seconds?Math.ceil(D.duration_seconds/60):5;await vt.trackVideoLesson(t.id,se(o),o,i==="businessStudies"?"Business Studies":i,Y,D.duration_seconds||0,D.duration_seconds||0);const Ne=g.find(ye=>ye.title.toLowerCase().replace(/\s+/g,"_")===o)?.topic_id||1;await It.trackLesson(Ne,o,i==="businessStudies"?"Business Studies":i,D.duration_seconds||300,"video")}}catch{}};c.useEffect(()=>{i&&U()},[i]);const U=async()=>{v(!0);try{const{data:D,error:Y}=await Lt.getTopicsBySubject("businessStudies");if(Y)throw Y;y(D||[])}catch{y([])}finally{v(!1)}},ee=async D=>{try{T(!0);const{data:Y,error:he}=await Fo.getVideoLessonsByTopic(D);if(he)throw he;if(Y&&Y.length>0){const Ne=Y.map(ye=>({video_id:ye.video_id||`video_${Math.random()}`,video_num:ye.video_num,title:ye.title||"Untitled Video",description:ye.description,duration_seconds:ye.duration_seconds,source:ye.source,tags:ye.tags||[],language:ye.language||"en",duration:ge(ye.duration_seconds||0),views:"1.2K",rating:4.5,difficulty:"intermediate",thumbnail:`https://img.youtube.com/vi/${me(ye.source||"")}/maxresdefault.jpg`,videoUrl:ye.source||"",instructor:"Business Studies Expert"}));w(Ne)}else w([])}catch{w([])}finally{T(!1)}},ge=D=>{const Y=Math.floor(D/60),he=D%60;return`${Y}:${he.toString().padStart(2,"0")}`},q=()=>{o&&u(!0)},oe=async D=>{if(p(D),t?.id)try{await r({subject:i==="businessStudies"?"Business Studies":i,topic:o||"General",videoId:D.video_id,progress:0,timeSpent:0,watched:!1})}catch(Y){console.error("Error tracking video selection:",Y)}await S(D)},O=async D=>{console.log(" handleTopicChange called with topicId:",D);const Y=g.find(he=>he.topic_id.toString()===D);if(console.log(" Found topic:",Y),Y){const he=Y.title.toLowerCase().replace(/\s+/g,"_");console.log(" Changing topic to:",Y.title),d(he),p(null),w([]);try{console.log(" Fetching videos for topic:",Y.topic_id),await ee(Y.topic_id),console.log(" Videos fetched successfully")}catch(Ne){console.error(" Error fetching videos:",Ne)}console.log(" Topic changed successfully to:",Y.title)}else console.error(" Topic not found for ID:",D)},_=D=>{switch(D){case"beginner":return"bg-green-100 text-green-800 border-green-200";case"intermediate":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"advanced":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},me=D=>{const Y=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/)([^#&?]*)/,/youtube\.com\/watch\?.*v=([^#&?]*)/,/youtu\.be\/([^#&?]*)/,/youtube\.com\/embed\/([^#&?]*)/,/youtube\.com\/v\/([^#&?]*)/];for(const he of Y){const Ne=D.match(he);if(Ne&&Ne[1]&&Ne[1].length===11)return Ne[1]}return""},le=D=>{const Y=/https?:\/\/(www\.)?vimeo\.com\/(\d+)/,he=D.match(Y);return he&&he[2]?he[2]:""};return m?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(C,{variant:"ghost",onClick:()=>s("dashboard"),className:"mr-4",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),G.backToDashboard]}),e.jsx("h1",{className:"text-xl font-semibold",children:G.visualLearning})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[f?e.jsx("div",{className:"w-[200px] h-8 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"})}):g.length>0?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 hidden md:block",children:"Topic:"}),e.jsxs(zs,{value:g.find(D=>D.title.toLowerCase().replace(/\s+/g,"_")===o)?.topic_id.toString()||"",onValueChange:O,children:[e.jsxs(Xt,{className:"w-[200px] h-9 bg-white border-2 border-green-200 hover:border-green-400 focus:border-green-500 shadow-sm hover:shadow-md transition-all",children:[e.jsx(_e,{className:"h-3.5 w-3.5 mr-2 text-green-600"}),e.jsx(vs,{placeholder:"Select topic"})]}),e.jsx(es,{className:"max-h-[300px] overflow-y-auto bg-white border-2 border-green-200 shadow-lg rounded-lg z-50",children:g.map((D,Y)=>e.jsxs(Et,{value:D.topic_id.toString(),className:"cursor-pointer hover:bg-green-50 focus:bg-green-50 transition-colors",children:[e.jsxs("span",{className:"text-xs font-semibold text-green-600 mr-2",children:[Y+1,"."]}),D.title]},D.topic_id))})]})]}):null,e.jsxs(ae,{className:"bg-gradient-to-r from-green-100 to-emerald-100 text-gray-800 border-0",children:[e.jsx(xt,{className:"h-3 w-3 mr-1"}),G.videoLibrary]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-5 w-5 text-blue-500"}),"Browse Content"]})}),e.jsx(L,{className:"space-y-4",children:e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-xl border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Rs,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800",children:G.businessStudies}),e.jsx(ae,{className:"bg-green-100 text-green-800 border-green-300 text-xs",children:"Selected"})]})})})]}),h?e.jsxs("div",{className:"flex items-center justify-center py-8 text-gray-500",children:[e.jsx(Ve,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{children:"Loading videos..."})]}):b.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(pt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No videos available for this topic"})]}):e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"h-5 w-5 text-purple-500"}),G.relatedVideos]})}),e.jsx(L,{children:e.jsx(Zg,{className:"h-96",children:e.jsx("div",{className:"space-y-3",children:b.map(D=>e.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-all hover:bg-gray-100 ${x?.video_id===D.video_id?"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200":"bg-white border border-gray-200"}`,onClick:()=>oe(D),children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative w-16 h-12 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:[D.source&&D.source.includes("youtube")?e.jsx("div",{className:"w-full h-full bg-red-600 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})})}):D.thumbnail?e.jsx("img",{src:D.thumbnail,alt:D.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-300 flex items-center justify-center",children:e.jsx(pt,{className:"h-6 w-6 text-gray-500"})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:e.jsx(bt,{className:"h-4 w-4 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium truncate",children:D.title}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:D.duration}),D.difficulty&&e.jsx(ae,{className:`text-xs ${_(D.difficulty)}`,children:D.difficulty==="beginner"?"Beginner":D.difficulty==="intermediate"?"Intermediate":"Advanced"})]}),D.source&&e.jsx("div",{className:"flex items-center mt-1",children:e.jsxs("span",{className:"text-xs text-gray-500",children:[D.source&&D.source.includes("youtube")?"YouTube Video":D.source&&D.source.includes("vimeo")?"Vimeo Video":D.source&&D.source.includes("mp4")?"MP4 Video":"Video"," - Plays on page"]})})]})]})},D.video_id))})})})]})]}),e.jsx("div",{className:"lg:col-span-3 space-y-6",children:x?e.jsx(e.Fragment,{children:e.jsx(M,{className:"border-0 shadow-lg","data-video-player":!0,children:e.jsxs(L,{className:"p-0",children:[e.jsx(Xg,{ratio:16/9,children:e.jsx("div",{className:"w-full h-full bg-black rounded-t-lg flex items-center justify-center",children:x.source&&x.source.includes("youtube")?e.jsx("div",{className:"w-full h-full",children:e.jsx("iframe",{src:`https://www.youtube.com/embed/${me(x.source)}?autoplay=0&rel=0&modestbranding=1&enablejsapi=1&origin=${window.location.origin}`,title:x.title,className:"w-full h-full rounded-t-lg",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,loading:"lazy"})}):x.source&&x.source.includes("vimeo")?e.jsx("div",{className:"w-full h-full",children:e.jsx("iframe",{src:`https://player.vimeo.com/video/${le(x.source)}?h=auto&title=0&byline=0&portrait=0&dnt=1&autoplay=0`,title:x.title,className:"w-full h-full rounded-t-lg",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0,loading:"lazy"})}):x.source&&(x.source.includes("mp4")||x.source.includes("http"))?e.jsxs("video",{className:"w-full h-full rounded-t-lg",controls:!0,preload:"metadata",controlsList:"nodownload",crossOrigin:"anonymous",children:[e.jsx("source",{src:x.source,type:"video/mp4"}),e.jsx("source",{src:x.source,type:"video/webm"}),e.jsx("source",{src:x.source,type:"video/ogg"}),"Your browser does not support the video tag."]}):e.jsxs(e.Fragment,{children:[x.thumbnail?e.jsx("img",{src:x.thumbnail,alt:x.title,className:"w-full h-full object-cover rounded-t-lg"}):e.jsx("div",{className:"w-full h-full bg-gray-300 flex items-center justify-center rounded-t-lg",children:e.jsx(pt,{className:"h-16 w-16 text-gray-500"})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:e.jsx(C,{size:"lg",className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-full w-16 h-16",onClick:()=>{x.source&&window.open(x.source,"_blank")},children:e.jsx(bt,{className:"h-8 w-8"})})})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(C,{className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",onClick:()=>{const D=document.querySelector("[data-video-player]");if(D){const Y=D.querySelector("iframe");Y&&x?.source?.includes("youtube")&&Y.click();const he=D.querySelector("video");he&&he.play(),D.scrollIntoView({behavior:"smooth"})}},children:[e.jsx(Ja,{className:"h-4 w-4 mr-2"}),"Play Video"]}),e.jsxs(C,{variant:"outline",onClick:()=>R(!0),children:[e.jsx(rn,{className:"h-4 w-4 mr-2"}),G.shareVideo]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(rn,{className:"h-5 w-5 mr-2 text-blue-600"}),"Share Video"]}),e.jsx("button",{onClick:()=>R(!1),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(Qe,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Link:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:x?.source||"",readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm focus:outline-none"}),e.jsx(C,{size:"sm",onClick:()=>{x?.source&&navigator.clipboard.writeText(x.source)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Copy"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(C,{variant:"outline",onClick:()=>R(!1),className:"px-4 py-2",children:"Close"}),e.jsx(C,{onClick:()=>{x?.source&&(navigator.clipboard.writeText(x.source),R(!1))},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2",children:"Copy & Close"})]})]})}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:x.tags?.map((D,Y)=>e.jsxs(ae,{variant:"outline",className:"text-xs",children:["#",D]},Y))})})]})]})})}):e.jsxs(M,{className:"p-12 text-center",children:[e.jsx(pt,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:G.noVideosFound}),e.jsx("p",{className:"text-gray-600",children:"Please select a subject and topic from the sidebar to view available videos."})]})})]})}),e.jsx(_s,{timeSpent:P,savedTimeRef:Q})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-md border-b border-gray-200/60 sticky top-0 z-40 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsxs(C,{variant:"ghost",onClick:()=>s("dashboard"),className:"hover:bg-gray-100 rounded-xl px-4 py-2",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2"}),G.backToDashboard]}),e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:G.visualLearning})}),e.jsxs(C,{size:"lg",className:`px-6 py-2 font-semibold shadow-lg transition-all duration-300 rounded-xl ${o?"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,onClick:q,disabled:!o,children:[e.jsx(Ja,{className:"h-5 w-5 mr-2"}),G.startLearning,e.jsx(Ae,{className:"h-5 w-5 ml-2"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 h-[calc(100vh-7.5rem)] overflow-hidden",children:e.jsxs("div",{className:"flex gap-6 h-full",children:[e.jsx("div",{className:"w-64 flex-shrink-0 h-full",children:e.jsxs(M,{className:"h-full shadow-lg border-0 bg-white/90 backdrop-blur-sm flex flex-col",children:[e.jsx(B,{className:"pb-3 border-b border-gray-200 flex-shrink-0",children:e.jsxs(V,{className:"text-base flex items-center gap-2 text-gray-800",children:[e.jsx(Pe,{className:"h-5 w-5 text-green-600"}),"Subjects"]})}),e.jsxs(L,{className:"p-4 space-y-2 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Us,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Mathematics"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pr,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Physics"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ir,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Chemistry"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:`p-3 border-2 rounded-xl cursor-pointer transition-all duration-300 ${i==="businessStudies"?"border-green-500 bg-gradient-to-br from-green-50 to-emerald-50 shadow-md":"border-gray-200 hover:border-green-400 hover:shadow-sm"}`,onClick:()=>l("businessStudies"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rs,{className:`h-5 w-5 ${i==="businessStudies"?"text-green-600":"text-gray-600"}`}),e.jsx("span",{className:`text-sm font-medium ${i==="businessStudies"?"text-green-700":"text-gray-700"}`,children:"Business Studies"})]}),i==="businessStudies"&&e.jsx("div",{className:"mt-2 ml-8",children:e.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"})})]})]})]})}),e.jsx("div",{className:"flex-1 h-full",children:e.jsxs(M,{className:"h-full shadow-lg border-0 bg-white/90 backdrop-blur-sm flex flex-col",children:[e.jsx(B,{className:"pb-3 border-b border-gray-200 flex-shrink-0",children:e.jsxs(V,{className:"text-base flex items-center gap-2 text-gray-800",children:[e.jsx(pt,{className:"h-5 w-5 text-green-600"}),"Select Your Topic"]})}),e.jsx(L,{className:"p-4 flex-1 overflow-y-auto bg-white",children:f?e.jsxs("div",{className:"flex items-center justify-center py-20 text-gray-500",children:[e.jsx(Ve,{className:"h-6 w-6 animate-spin mr-3"}),e.jsx("span",{className:"text-lg",children:"Loading topics..."})]}):g.length>0?e.jsx("div",{className:"space-y-2",children:g.map((D,Y)=>e.jsx("button",{onClick:()=>O(D.topic_id.toString()),className:`group w-full p-4 rounded-xl border-2 transition-all duration-200 text-left bg-white ${o===D.title.toLowerCase().replace(/\s+/g,"_")?"border-green-500 shadow-sm":"border-gray-200 hover:border-green-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${o===D.title.toLowerCase().replace(/\s+/g,"_")?"bg-green-600 text-white":"bg-gray-100 text-gray-600 group-hover:bg-green-100"}`,children:e.jsx("span",{className:"text-sm font-bold",children:Y+1})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:`text-sm font-semibold ${o===D.title.toLowerCase().replace(/\s+/g,"_")?"text-green-700":"text-gray-700 group-hover:text-green-600"}`,children:D.title})}),o===D.title.toLowerCase().replace(/\s+/g,"_")&&e.jsx(_e,{className:"h-5 w-5 text-green-600 flex-shrink-0"})]})},D.topic_id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(pt,{className:"h-16 w-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 text-center",children:"No topics available for this subject"})]})})]})})]})})]})}function s0({className:s,value:t,children:r,...a}){return e.jsx("div",{className:Ce("w-full",s),...a,children:r})}function r0({className:s,children:t,...r}){return e.jsx("div",{className:Ce("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...r,children:t})}function Es({className:s,value:t,children:r,...a}){const n=t===a["data-value"];return e.jsx("button",{className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),"data-state":n?"active":"inactive",...a,children:r})}function Ps({className:s,value:t,children:r,...a}){return e.jsx("div",{className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a,children:r})}Go.register(Ho,Vo,Wo,Qo,Yo,Ko,Jo,Zo,Xo);const a0={analytics:"Analytics",backToDashboard:"Back to Dashboard",refresh:"Refresh",lastActivity:"Last Updated",overview:"Overview",insights:"Insights",progress:"Progress",streakDays:"day streak",noData:"No Data Available",startStudying:"Start studying to see your progress",loading:"Loading analytics...",errorLoading:"Error Loading Analytics",retry:"Try Again",minutes:"min",hours:"h",weeklyProgress:"Weekly Progress",studyStreaks:"Study Streaks",performanceMetrics:"Performance Metrics",learningPatterns:"Learning Patterns",currentStreak:"Current Streak",longestStreak:"Longest Streak",averageDailyTime:"Avg Daily Time",mostProductiveDay:"Most Productive Day",overallAccuracy:"Overall Accuracy",improvementRate:"Improvement Rate",weakAreas:"Weak Areas",strongAreas:"Strong Areas",todayProgress:"Today's Progress",dailyStats:"Daily Statistics",nextMilestone:"Next Milestone",achievements:"Achievements",recommendations:"Recommendations",studyTime:"Study Time",activitiesCompleted:"Activities Completed",currentAccuracy:"Current Accuracy",sessionCount:"Session Count",averageSession:"Average Session",monthlyProgress:"Monthly Progress",aiTutorInteractions:"AI Tutor Interactions",topicSelections:"Topic Selections",lessonsCompleted:"Lessons Completed",videoLessonsCompleted:"Video Lessons Completed",flashcardsReviewed:"Flashcards Reviewed",questions:"Questions",productivityScore:"Productivity Score",noUser:"Please sign in to view analytics"};function n0(){const{setCurrentPage:s,user:t}=Re(),r=a0,[a,n]=c.useState(null),[i,l]=c.useState(!0),[o,d]=c.useState(null),[m,u]=c.useState(null),[x,p]=c.useState(!1),[g,y]=c.useState(0),[f,v]=c.useState(null),[b,w]=c.useState(null),[h,T]=c.useState([]),{forceFlush:E,getBufferSize:R}=Gs({pageTitle:"Analytics Dashboard",pageUrl:"/analytics",trackClicks:!0,trackTime:!0,trackScroll:!0}),P=S=>{if(!S||S<0)return"0 min";if(S<60)return`${S} ${r.minutes}`;const U=Math.floor(S/60),ee=S%60;return ee===0?`${U} ${r.hours}`:`${U}h ${ee}m`},k=S=>{const U=Number(S);return isNaN(U)?0:Math.max(0,U)},G=async()=>{if(t?.id)try{const S=new Date,U=Array.from({length:7},(_,me)=>{const le=new Date(S);return le.setDate(le.getDate()-(6-me)),le.toISOString().split("T")[0]}),{data:ee,error:ge}=await F.from("daily_analytics").select("date, total_time_spent").eq("user_id",t.id).in("date",U).order("date",{ascending:!0});if(ge)throw ge;const q=new Map(ee?.map(_=>[_.date,Math.round(_.total_time_spent/60)])||[]),oe=U.map(_=>q.get(_)||0),O=U.map(_=>new Date(_).toLocaleDateString("en-US",{weekday:"short"}));v({labels:O,datasets:[{label:"Study Time (minutes)",data:oe,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4}]})}catch(S){console.error("Error fetching weekly trend:",S)}},Q=async()=>{if(!t?.id){d("User not authenticated"),l(!1);return}try{l(!0),d(null);try{await De.trackPlatformActivity(t.id,"analytics_visit",0,"Analytics","General")}catch(ee){console.log(" Tracking error (non-critical):",ee)}const S=await De.forceRefreshAnalytics(t.id),[U]=await Promise.all([De.getStudyInsights(t.id),G()]);if(w(U),t?.id){const ee=Ut.getRecentPageVisits(t.id,10);T(ee)}if(S){const ee={...S,today:{...S.today,totalActivities:S.today?.totalActivities||0,studyTimeMinutes:S.today?.studyTimeMinutes||0,dailyAccuracy:S.today?.dailyAccuracy||0,productivityScore:S.today?.productivityScore||0,sessionCount:S.today?.sessionCount||0,avgSessionMinutes:S.today?.avgSessionMinutes||0,questionsAttempted:S.today?.questionsAttempted||0,questionsCorrect:S.today?.questionsCorrect||0,lessonsCompleted:S.today?.lessonsCompleted||0,videoLessonsCompleted:S.today?.videoLessonsCompleted||0,flashcardsReviewed:S.today?.flashcardsReviewed||0,aiTutorInteractions:S.today?.aiTutorInteractions||0,topicSelections:S.today?.topicSelections||0},thisWeek:{...S.thisWeek,totalActivities:S.thisWeek?.totalActivities||0,totalTimeSpent:S.thisWeek?.totalTimeSpent||0,averageDailyAccuracy:S.thisWeek?.averageDailyAccuracy||0,mostProductiveDay:S.thisWeek?.mostProductiveDay||"No data",weakAreas:S.thisWeek?.weakAreas||[],strongAreas:S.thisWeek?.strongAreas||[],recommendations:S.thisWeek?.recommendations||["Keep up the great work!"]},thisMonth:{...S.thisMonth,totalActivities:S.thisMonth?.totalActivities||0,totalTimeSpent:S.thisMonth?.totalTimeSpent||0,longestStreak:S.thisMonth?.longestStreak||0,improvementRate:S.thisMonth?.improvementRate||0,studyPatterns:{preferredStudyTime:S.thisMonth?.studyPatterns?.preferredStudyTime||"Morning",averageSessionLength:S.thisMonth?.studyPatterns?.averageSessionLength||0,peakStudyDays:S.thisMonth?.studyPatterns?.peakStudyDays||[]}},currentStreak:S.currentStreak||0,nextMilestone:S.nextMilestone||"Complete your first lesson",focusAreas:S.focusAreas||[],achievements:S.achievements||[]};n(ee),u(new Date)}else throw new Error("No analytics data received")}catch(S){console.error(" Error fetching analytics:",S),d(S instanceof Error?S.message:"Failed to fetch analytics")}finally{l(!1)}};c.useEffect(()=>{t?.id&&Q()},[t?.id]),c.useEffect(()=>{if(!t?.id)return;console.log(" Setting up real-time analytics subscription for user:",t.id);const S=F.channel("analytics-realtime").on("postgres_changes",{event:"*",schema:"public",table:"daily_analytics",filter:`user_id=eq.${t.id}`},U=>{console.log(" Real-time analytics update received:",U),Q()}).subscribe();return()=>{console.log(" Unsubscribing from analytics updates"),F.removeChannel(S)}},[t?.id]),c.useEffect(()=>{const S=()=>{y(R())};S();const U=setInterval(S,1e4);return()=>clearInterval(U)},[R]);const se=async()=>{p(!0),d(null);try{console.log(" Flushing pending activities..."),await E(),await new Promise(S=>setTimeout(S,1500)),console.log(" Fetching fresh analytics data..."),await Q(),y(R()),console.log(" Refresh completed successfully")}catch(S){console.error(" Error during refresh:",S),d("Failed to refresh analytics data. Please try again.")}finally{p(!1)}};return t?.id?i?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:r.loading})]})}):o?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:r.errorLoading}),e.jsx("p",{className:"text-gray-600 mb-4",children:o}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(C,{onClick:se,variant:"outline",children:r.retry}),e.jsx(C,{onClick:()=>s("dashboard"),variant:"outline",children:r.backToDashboard})]})]})}):a?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("nav",{className:"bg-white/90 backdrop-blur-md border-b border-gray-200/60 sticky top-0 z-40 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>s("dashboard"),className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100/80 transition-colors",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),r.backToDashboard]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Yt,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:r.analytics})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:se,disabled:x,className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:`h-4 w-4 ${x?"animate-spin":""}`}),e.jsx("span",{children:x?"Refreshing...":r.refresh}),g>0&&e.jsx(ae,{variant:"secondary",className:"ml-1",children:g})]}),m&&e.jsxs("span",{className:"text-xs text-gray-500 hidden md:block",children:[r.lastActivity,": ",m.toLocaleTimeString()]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>s("settings"),className:"hover:bg-gray-100/80 transition-colors",children:e.jsx(Kt,{className:"h-4 w-4"})}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>{localStorage.removeItem("imtehaan_current_page"),s("landing")},className:"hover:bg-red-50 hover:text-red-600 hover:border-red-300 transition-colors",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(s0,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(r0,{className:"grid w-full grid-cols-5",children:[e.jsxs(Es,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),r.overview]}),e.jsxs(Es,{value:"today",className:"flex items-center gap-2",children:[e.jsx(qt,{className:"h-4 w-4"}),r.todayProgress]}),e.jsxs(Es,{value:"progress",className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),r.progress]}),e.jsxs(Es,{value:"insights",className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),r.insights]}),e.jsxs(Es,{value:"achievements",className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4"}),r.achievements]})]}),e.jsxs(Ps,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(M,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:r.activitiesCompleted}),e.jsx(kt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:k(a.today.totalActivities)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.todayProgress})]})]}),e.jsxs(M,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:r.studyTime}),e.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:P(k(a.today.studyTimeMinutes))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.todayProgress})]})]}),e.jsxs(M,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:r.currentAccuracy}),e.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[k(a.today.dailyAccuracy),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.todayProgress})]})]}),e.jsxs(M,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:r.currentStreak}),e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:k(a.currentStreak)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.streakDays})]})]})]}),e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-blue-500"}),r.weeklyProgress]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a.thisWeek.weekStart," - ",a.thisWeek.weekEnd]})]}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.thisWeek.totalActivities}),e.jsx("div",{className:"text-sm text-blue-700",children:r.activitiesCompleted})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:P(Math.round(a.thisWeek.totalTimeSpent/60))}),e.jsx("div",{className:"text-sm text-green-700",children:r.studyTime})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[a.thisWeek.averageDailyAccuracy,"%"]}),e.jsx("div",{className:"text-sm text-purple-700",children:r.overallAccuracy})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a.thisWeek.mostProductiveDay}),e.jsx("div",{className:"text-sm text-orange-700",children:r.mostProductiveDay})]})]})})]}),e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"h-5 w-5 text-green-500"}),r.monthlyProgress]}),e.jsx("div",{className:"text-sm text-gray-500",children:a.thisMonth.month})]}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.thisMonth.totalActivities}),e.jsx("div",{className:"text-sm text-green-700",children:r.activitiesCompleted})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:P(Math.round(a.thisMonth.totalTimeSpent/60))}),e.jsx("div",{className:"text-sm text-blue-700",children:r.studyTime})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.thisMonth.longestStreak}),e.jsx("div",{className:"text-sm text-purple-700",children:r.longestStreak})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[a.thisMonth.improvementRate,"%"]}),e.jsx("div",{className:"text-sm text-orange-700",children:r.improvementRate})]})]})})]}),f&&e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-blue-500"}),"Study Time Trend (Last 7 Days)"]})}),e.jsx(L,{children:e.jsx("div",{className:"h-64",children:e.jsx(el,{data:f,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:S=>`${S.parsed.y} minutes`}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Minutes"}}}}})})})]})]}),e.jsxs(Ps,{value:"today",className:"space-y-6",children:[e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-5 w-5 text-blue-500"}),"Daily Study Goal"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progress"}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[k(a.today.studyTimeMinutes)," / 60 minutes"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"h-4 rounded-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-500 flex items-center justify-end pr-2",style:{width:`${Math.min(k(a.today.studyTimeMinutes)/60*100,100)}%`},children:k(a.today.studyTimeMinutes)>=6&&e.jsxs("span",{className:"text-xs font-bold text-white",children:[Math.round(k(a.today.studyTimeMinutes)/60*100),"%"]})})}),k(a.today.studyTimeMinutes)>=60?e.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm font-medium",children:[e.jsx(Me,{className:"h-4 w-4"}),"Goal achieved! Great work!"]}):e.jsxs("p",{className:"text-sm text-gray-600",children:[60-k(a.today.studyTimeMinutes)," minutes remaining to reach your goal"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(M,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:r.activitiesCompleted}),e.jsx(kt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.today.totalActivities}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.todayProgress})]})]}),e.jsxs(M,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:r.studyTime}),e.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:P(k(a.today.studyTimeMinutes))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.todayProgress})]})]}),e.jsxs(M,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:r.currentAccuracy}),e.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[k(a.today.dailyAccuracy),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.todayProgress})]})]}),e.jsxs(M,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:r.productivityScore}),e.jsx(mr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.today.productivityScore}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.todayProgress})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-5 w-5 text-blue-500"}),r.dailyStats]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:r.questions}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[a.today.questionsCorrect," / ",a.today.questionsAttempted]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full bg-blue-600 transition-all duration-300",style:{width:`${k(a.today.dailyAccuracy)}%`}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:r.lessonsCompleted}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:a.today.lessonsCompleted})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:r.videoLessonsCompleted}),e.jsx("span",{className:"text-lg font-bold text-purple-600",children:a.today.videoLessonsCompleted})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:r.flashcardsReviewed}),e.jsx("span",{className:"text-lg font-bold text-orange-600",children:a.today.flashcardsReviewed})]})]})})]}),e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-green-500"}),r.sessionCount]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:r.sessionCount}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:a.today.sessionCount})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:r.averageSession}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:P(a.today.avgSessionMinutes)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:r.aiTutorInteractions}),e.jsx("span",{className:"text-lg font-bold text-purple-600",children:a.today.aiTutorInteractions})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:r.topicSelections}),e.jsx("span",{className:"text-lg font-bold text-orange-600",children:a.today.topicSelections})]})]})})]})]})]}),e.jsxs(Ps,{value:"progress",className:"space-y-6",children:[e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-green-500"}),r.studyStreaks]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.currentStreak}),e.jsx("div",{className:"text-sm text-green-700",children:r.currentStreak})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.thisMonth.longestStreak}),e.jsx("div",{className:"text-sm text-blue-700",children:r.longestStreak})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:P(Math.round(a.thisWeek.totalTimeSpent/7/60))}),e.jsx("div",{className:"text-sm text-purple-700",children:r.averageDailyTime})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a.thisWeek.mostProductiveDay}),e.jsx("div",{className:"text-sm text-orange-700",children:r.mostProductiveDay})]})]})})]}),e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-5 w-5 text-yellow-500"}),r.performanceMetrics]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsxs("h4",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4 text-blue-600"}),r.overallAccuracy]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Weekly Average"}),e.jsxs("span",{className:`text-2xl font-bold ${k(a.thisWeek?.averageDailyAccuracy)>=70?"text-green-600":k(a.thisWeek?.averageDailyAccuracy)>=50?"text-orange-600":"text-red-600"}`,children:[k(a.thisWeek?.averageDailyAccuracy),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${k(a.thisWeek?.averageDailyAccuracy)>=70?"bg-gradient-to-r from-green-500 to-emerald-500":k(a.thisWeek?.averageDailyAccuracy)>=50?"bg-gradient-to-r from-orange-500 to-yellow-500":"bg-gradient-to-r from-red-500 to-pink-500"}`,style:{width:`${Math.min(k(a.thisWeek?.averageDailyAccuracy),100)}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:k(a.thisWeek?.averageDailyAccuracy)===0?"Complete practice questions to see your accuracy":k(a.thisWeek?.averageDailyAccuracy)>=70?" Great accuracy! Keep it up!":k(a.thisWeek?.averageDailyAccuracy)>=50?" Good progress, aim for 70%+":" Practice more to improve accuracy"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-100",children:[e.jsxs("h4",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-green-600"}),r.improvementRate]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Monthly Growth"}),e.jsxs("span",{className:`text-2xl font-bold ${k(a.thisMonth?.improvementRate)>0?"text-green-600":k(a.thisMonth?.improvementRate)<0?"text-red-600":"text-gray-600"}`,children:[k(a.thisMonth?.improvementRate)>0?"+":"",k(a.thisMonth?.improvementRate),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${k(a.thisMonth?.improvementRate)>0?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-gray-400 to-gray-500"}`,style:{width:`${Math.min(Math.max(k(a.thisMonth?.improvementRate),0)+10,100)}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:k(a.thisMonth?.improvementRate)===0?"Keep studying to track your improvement":k(a.thisMonth?.improvementRate)>5?" Excellent growth this month!":k(a.thisMonth?.improvementRate)>0?" Steady improvement, keep going!":" Focus on weak areas to improve"})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-100 rounded text-xs text-gray-600 font-mono",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Performance Data:"}),e.jsxs("div",{children:["Weekly Accuracy: ",k(a.thisWeek?.averageDailyAccuracy),"%"]}),e.jsxs("div",{children:["Monthly Improvement: ",k(a.thisMonth?.improvementRate),"%"]}),e.jsxs("div",{children:["Questions Attempted (Today): ",k(a.today?.questionsAttempted)]}),e.jsxs("div",{children:["Questions Correct (Today): ",k(a.today?.questionsCorrect)]})]})]})]})]}),e.jsxs(Ps,{value:"insights",className:"space-y-6",children:[a.thisMonth.timeOfDayAnalysis&&e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-purple-500"}),"Study Time by Period"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Morning (6am-12pm)"})]}),e.jsxs("span",{className:"text-sm font-bold text-yellow-700",children:[a.thisMonth.timeOfDayAnalysis.morningMinutes," min"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Afternoon (12pm-6pm)"})]}),e.jsxs("span",{className:"text-sm font-bold text-orange-700",children:[a.thisMonth.timeOfDayAnalysis.afternoonMinutes," min"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Evening (6pm-10pm)"})]}),e.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[a.thisMonth.timeOfDayAnalysis.eveningMinutes," min"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-indigo-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Night (10pm-6am)"})]}),e.jsxs("span",{className:"text-sm font-bold text-indigo-700",children:[a.thisMonth.timeOfDayAnalysis.nightMinutes," min"]})]}),e.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mr,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-purple-900",children:"Most Productive Time"}),e.jsx("p",{className:"text-lg font-bold text-purple-700",children:a.thisMonth.timeOfDayAnalysis.mostProductiveTime})]})]})})]})})]}),e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5 text-yellow-500"}),"Personalized Insights"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border-l-4 border-blue-500",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),r.nextMilestone]}),e.jsx("p",{className:"text-blue-800 font-medium",children:b?.nextMilestone||a.nextMilestone})]}),b&&b.insights.length>0&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border-l-4 border-purple-500",children:[e.jsxs("h4",{className:"font-semibold text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx(mr,{className:"h-4 w-4"}),"Key Insights"]}),e.jsx("div",{className:"space-y-2",children:b.insights.map((S,U)=>e.jsxs("p",{className:"text-purple-800 text-sm flex items-start gap-2",children:[e.jsx("span",{className:"text-purple-500 mt-0.5",children:""}),e.jsx("span",{children:S})]},U))})]}),b&&b.recommendations.length>0&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-l-4 border-green-500",children:[e.jsxs("h4",{className:"font-semibold text-green-900 mb-3 flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),r.recommendations]}),e.jsx("div",{className:"space-y-2",children:b.recommendations.map((S,U)=>e.jsxs("p",{className:"text-green-800 text-sm flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500 mt-0.5",children:""}),e.jsx("span",{children:S})]},U))})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg border-l-4 border-orange-500",children:[e.jsxs("h4",{className:"font-semibold text-orange-900 mb-2 flex items-center gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),r.learningPatterns]}),e.jsxs("div",{className:"space-y-2 text-sm text-orange-800",children:[e.jsxs("p",{children:[" Preferred study time: ",e.jsx("span",{className:"font-semibold",children:a.thisMonth.studyPatterns?.preferredStudyTime||"Not enough data"})]}),e.jsxs("p",{children:[" Average session: ",e.jsx("span",{className:"font-semibold",children:P(a.thisMonth.studyPatterns?.averageSessionLength||0)})]}),e.jsxs("p",{children:[" Total sessions today: ",e.jsx("span",{className:"font-semibold",children:a.today.sessionCount})]}),e.jsxs("p",{children:[" Avg session length: ",e.jsx("span",{className:"font-semibold",children:P(a.today.avgSessionMinutes*60)})]})]})]})]})})]})]}),e.jsxs(Ps,{value:"achievements",className:"space-y-6",children:[e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-5 w-5 text-yellow-500"}),"Today's Achievements"]})}),e.jsx(L,{children:a.achievements.length>0&&a.achievements[0]!==" Complete your first activity to earn achievements"&&a.achievements[0]!=="Complete your first activity to earn achievements"&&a.achievements[0]!==" Keep studying to earn achievements!"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.achievements.map((S,U)=>{const ee=S.includes("")||S.includes("Legendary")||S.includes("Perfect"),ge=S.includes("")||S.includes("")||S.includes("Excellence"),q=S.includes("")||S.includes(""),oe=ee?"bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-400":ge?"bg-gradient-to-r from-gray-50 to-slate-50 border-gray-400":q?"bg-gradient-to-r from-orange-50 to-amber-50 border-orange-400":"bg-gradient-to-r from-blue-50 to-cyan-50 border-blue-400";return e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg border-2 ${oe} shadow-sm hover:shadow-md transition-shadow`,children:[e.jsx("div",{className:"text-3xl",children:S.split(":")[0].trim()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:S.split(":")[0].replace(/[]/g,"").trim()}),e.jsx("p",{className:"text-xs text-gray-600",children:S.split(":")[1]?.trim()||S})]})]},U)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xs,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:"No achievements yet today"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Complete activities to earn badges!"}),e.jsxs("div",{className:"max-w-md mx-auto grid grid-cols-2 gap-3 text-xs text-gray-600",children:[e.jsx("div",{className:"p-2 bg-gray-50 rounded",children:e.jsx("p",{className:"font-medium",children:" Study 30+ minutes"})}),e.jsx("div",{className:"p-2 bg-gray-50 rounded",children:e.jsx("p",{className:"font-medium",children:" Answer 10+ questions"})}),e.jsx("div",{className:"p-2 bg-gray-50 rounded",children:e.jsx("p",{className:"font-medium",children:" Get 85%+ accuracy"})}),e.jsx("div",{className:"p-2 bg-gray-50 rounded",children:e.jsx("p",{className:"font-medium",children:" Build a streak"})})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"text-sm flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-blue-500"}),"Study Time"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("div",{className:`p-2 rounded ${a.today.studyTimeMinutes>=120?"bg-yellow-100 text-yellow-800":"bg-gray-50 text-gray-500"}`,children:" Ultra: 2+ hours"}),e.jsx("div",{className:`p-2 rounded ${a.today.studyTimeMinutes>=90&&a.today.studyTimeMinutes<120?"bg-gray-100 text-gray-800":"bg-gray-50 text-gray-500"}`,children:" Power: 90+ min"}),e.jsx("div",{className:`p-2 rounded ${a.today.studyTimeMinutes>=60&&a.today.studyTimeMinutes<90?"bg-orange-100 text-orange-800":"bg-gray-50 text-gray-500"}`,children:" Goal: 60+ min"})]})})]}),e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"text-sm flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4 text-green-500"}),"Accuracy"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("div",{className:`p-2 rounded ${a.today.dailyAccuracy>=95?"bg-yellow-100 text-yellow-800":"bg-gray-50 text-gray-500"}`,children:" Perfect: 95%+"}),e.jsx("div",{className:`p-2 rounded ${a.today.dailyAccuracy>=90&&a.today.dailyAccuracy<95?"bg-gray-100 text-gray-800":"bg-gray-50 text-gray-500"}`,children:" Excellence: 90%+"}),e.jsx("div",{className:`p-2 rounded ${a.today.dailyAccuracy>=85&&a.today.dailyAccuracy<90?"bg-orange-100 text-orange-800":"bg-gray-50 text-gray-500"}`,children:" High: 85%+"})]})})]}),e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"text-sm flex items-center gap-2",children:[e.jsx(kt,{className:"h-4 w-4 text-orange-500"}),"Streaks"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("div",{className:`p-2 rounded ${a.currentStreak>=30?"bg-yellow-100 text-yellow-800":"bg-gray-50 text-gray-500"}`,children:" Legend: 30 days"}),e.jsx("div",{className:`p-2 rounded ${a.currentStreak>=14&&a.currentStreak<30?"bg-gray-100 text-gray-800":"bg-gray-50 text-gray-500"}`,children:" Epic: 14 days"}),e.jsx("div",{className:`p-2 rounded ${a.currentStreak>=7&&a.currentStreak<14?"bg-orange-100 text-orange-800":"bg-gray-50 text-gray-500"}`,children:" Master: 7 days"})]})})]})]}),e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5 text-purple-500"}),"All Achievements Earned Today"]})}),e.jsx(L,{children:a.achievements.length>0&&a.achievements[0]!==" Complete your first activity to earn achievements"&&a.achievements[0]!=="Complete your first activity to earn achievements"&&a.achievements[0]!==" Keep studying to earn achievements!"?e.jsx("div",{className:"space-y-2",children:a.achievements.map((S,U)=>{const ee=S.split(":")[0].split(" ")[0],ge=S.replace(ee,"").trim();return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"text-2xl mt-0.5",children:ee}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium text-gray-900",children:ge})}),e.jsx(Me,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-1"})]},U)})}):e.jsx("p",{className:"text-center text-gray-500 py-4",children:"Complete activities to start earning achievements!"})})]}),e.jsxs(M,{children:[e.jsx(B,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-blue-500"}),"Recent Learning Activity"]})}),e.jsx(L,{children:h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Pe,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"Start studying to see your activity history"})]}):e.jsx("div",{className:"space-y-2",children:h.map((S,U)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-lg",children:S.page==="ai-tutor"?"":S.page==="practice"?"":S.page==="flashcards"?"":S.page==="visual-learning"?"":S.page==="mock-exam-p1"||S.page==="mock-exam-p2"?"":""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.pageName}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(S.timestamp).toLocaleString()})]})]}),e.jsx(ae,{variant:"outline",className:"text-xs",children:(()=>{const ee=Math.floor((new Date().getTime()-new Date(S.timestamp).getTime())/6e4);if(ee<1)return"Just now";if(ee<60)return`${ee}m ago`;const ge=Math.floor(ee/60);return ge<24?`${ge}h ago`:`${Math.floor(ge/24)}d ago`})()})]},U))})})]})]})]})}),e.jsx("footer",{className:"bg-white border-t border-gray-200 mt-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[e.jsx("div",{className:"mb-4",children:e.jsx(Os,{size:"md",showText:!1})}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered learning platform for IGCSE, A-Levels & IB students."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>s("dashboard"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Dashboard"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("ai-tutor"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Lessons"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("practice"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Practice"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("analytics"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Analytics"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Learning"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>s("mock-exam-selection"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Mock Exams"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("flashcards"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Flashcards"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("study-plan"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Study Plans"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Support"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>s("settings"),className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Settings"})}),e.jsx("li",{children:e.jsx("a",{href:"mailto:support@imtehaan.com",className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Contact Support"})})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[" ",new Date().getFullYear()," Imtehaan AI EdTech Platform. All rights reserved."]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("a",{href:"#",className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"#",className:"text-sm text-gray-600 hover:text-imtehaan-primary transition-colors",children:"Terms of Service"})]})]})})]})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Pe,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:r.noData}),e.jsx("p",{className:"text-sm text-gray-600",children:r.startStudying}),e.jsx(C,{onClick:se,variant:"outline",className:"mt-4",children:r.refresh})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:r.noUser}),e.jsx(C,{onClick:()=>s("login"),children:"Sign In"})]})})}function lt({className:s,checked:t,onCheckedChange:r,...a}){return e.jsx("input",{type:"checkbox",checked:t,onChange:n=>r?.(n.target.checked),className:Ce("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a})}class i0{async getUserSettings(t){try{const{data:r,error:a}=await F.from("user_settings").select("*").eq("user_id",t).single();if(a&&a.code!=="PGRST116")throw a;return r?{data:r,error:null}:await this.createDefaultSettings(t)}catch(r){return console.error("Error fetching user settings:",r),{data:null,error:r}}}async createDefaultSettings(t){try{const r={user_id:t,theme:"light",language:"en",auto_play_flashcards:!1,show_hints:!0,sound_effects:!0,vibration:!0,study_reminders:!0,daily_goal_minutes:30,session_duration_minutes:25,push_notifications:!0,email_notifications:!0,achievement_notifications:!0,weekly_reports:!0,data_sharing:!1,analytics_enabled:!0,profile_visibility:"private",font_size:"medium",high_contrast:!1,reduced_motion:!1,email_preferences:{marketing:!1,updates:!0,achievements:!0},two_factor_enabled:!1,preferred_study_times:{morning:!0,afternoon:!0,evening:!0,night:!1},study_plan_template:"balanced",auto_schedule_breaks:!0,break_duration_minutes:5,auto_backup_enabled:!0,backup_frequency:"weekly",data_retention_days:365},{data:a,error:n}=await F.from("user_settings").insert(r).select().single();if(n)throw n;return{data:a,error:null}}catch(r){return console.error("Error creating default settings:",r),{data:null,error:r}}}async updateUserSettings(t,r){try{const{data:a,error:n}=await F.from("user_settings").update(r).eq("user_id",t).select().single();if(n)throw n;return{data:a,error:null}}catch(a){return console.error("Error updating user settings:",a),{data:null,error:a}}}async changePassword(t,r){try{if(r.newPassword!==r.confirmPassword)return{success:!1,error:{message:"New passwords do not match"}};if(r.newPassword.length<8)return{success:!1,error:{message:"Password must be at least 8 characters long"}};const{error:a}=await F.auth.updateUser({password:r.newPassword});if(a)throw a;return await this.updateUserSettings(t,{last_password_change:new Date().toISOString()}),{success:!0,error:null}}catch(a){return console.error("Error changing password:",a),{success:!1,error:a}}}async toggleTwoFactor(t,r){try{const{error:a}=await this.updateUserSettings(t,{two_factor_enabled:r});if(a)throw a;return{success:!0,error:null}}catch(a){return console.error("Error toggling two-factor:",a),{success:!1,error:a}}}async exportUserData(t){try{const{data:r,error:a}=await this.getUserSettings(t);if(a)throw a;const{data:n}=await F.from("study_plans").select("*").eq("user_id",t),{data:i}=await F.from("learning_activities").select("*").eq("user_id",t),{data:l}=await F.from("study_sessions").select("*").eq("user_id",t);return{data:{user_settings:r,study_plans:n||[],learning_activities:i||[],study_sessions:l||[],export_date:new Date().toISOString(),export_version:"1.0.0"},error:null}}catch(r){return console.error("Error exporting user data:",r),{data:null,error:r}}}async importUserData(t,r){try{if(!r.user_settings||!r.export_date)return{success:!1,error:{message:"Invalid import data format"}};const{error:a}=await this.updateUserSettings(t,r.user_settings);if(a)throw a;return{success:!0,error:null}}catch(a){return console.error("Error importing user data:",a),{success:!1,error:a}}}async clearUserCache(t){try{return{success:!0,error:null}}catch(r){return console.error("Error clearing user cache:",r),{success:!1,error:r}}}async resetUserProgress(t){try{const{error:r}=await F.from("learning_activities").delete().eq("user_id",t);if(r)throw r;const{error:a}=await F.from("study_sessions").delete().eq("user_id",t);if(a)throw a;const{error:n}=await F.from("study_plans").delete().eq("user_id",t);if(n)throw n;return await this.createDefaultSettings(t),{success:!0,error:null}}catch(r){return console.error("Error resetting user progress:",r),{success:!1,error:r}}}async deleteUserAccount(t){try{await this.resetUserProgress(t);const{error:r}=await F.from("user_settings").delete().eq("user_id",t);if(r)throw r;return{success:!0,error:null}}catch(r){return console.error("Error deleting user account:",r),{success:!1,error:r}}}async getUserProfile(t){try{const{data:{user:r},error:a}=await F.auth.getUser();if(a)throw a;return{data:{id:r?.id,email:r?.email,created_at:r?.created_at,last_sign_in_at:r?.last_sign_in_at},error:null}}catch(r){return console.error("Error fetching user profile:",r),{data:null,error:r}}}}const Pt=new i0;function o0({isOpen:s,onClose:t,userId:r}){const[a,n]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[i,l]=c.useState({current:!1,new:!1,confirm:!1}),[o,d]=c.useState(!1),[m,u]=c.useState("idle"),[x,p]=c.useState(""),y={en:{title:"Change Password",currentPassword:"Current Password",newPassword:"New Password",confirmPassword:"Confirm New Password",changePassword:"Change Password",cancel:"Cancel",success:"Password changed successfully!",error:"Failed to change password",loading:"Changing password...",passwordMismatch:"New passwords do not match",passwordTooShort:"Password must be at least 8 characters long",currentPasswordRequired:"Current password is required",newPasswordRequired:"New password is required",confirmPasswordRequired:"Please confirm your new password"}}.en,f=(T,E)=>{n(R=>({...R,[T]:E})),u("idle"),p("")},v=T=>{l(E=>({...E,[T]:!E[T]}))},b=()=>a.currentPassword.trim()?a.newPassword.trim()?a.confirmPassword.trim()?a.newPassword!==a.confirmPassword?(p(y.passwordMismatch),u("error"),!1):a.newPassword.length<8?(p(y.passwordTooShort),u("error"),!1):!0:(p(y.confirmPasswordRequired),u("error"),!1):(p(y.newPasswordRequired),u("error"),!1):(p(y.currentPasswordRequired),u("error"),!1),w=async T=>{if(T.preventDefault(),!!b()){d(!0),u("idle");try{const E=await Pt.changePassword(r,a);E.success?(u("success"),n({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{t(),u("idle")},2e3)):(u("error"),p(E.error?.message||y.error))}catch{u("error"),p(y.error)}finally{d(!1)}}},h=()=>{o||(n({currentPassword:"",newPassword:"",confirmPassword:""}),u("idle"),p(""),t())};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(M,{className:"w-full max-w-md",children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(yr,{className:"h-5 w-5 text-blue-600"}),y.title]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:h,disabled:o,className:"h-8 w-8 p-0",children:e.jsx(Qe,{className:"h-4 w-4"})})]}),e.jsx(L,{children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[m==="success"&&e.jsxs(at,{className:"border-green-200 bg-green-50",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),e.jsx(nt,{className:"text-green-800",children:y.success})]}),m==="error"&&e.jsxs(at,{className:"border-red-200 bg-red-50",children:[e.jsx(Je,{className:"h-4 w-4 text-red-600"}),e.jsx(nt,{className:"text-red-800",children:x})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"currentPassword",children:y.currentPassword}),e.jsxs("div",{className:"relative",children:[e.jsx(We,{id:"currentPassword",type:i.current?"text":"password",value:a.currentPassword,onChange:T=>f("currentPassword",T.target.value),disabled:o,className:"pr-10"}),e.jsx(C,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>v("current"),disabled:o,children:i.current?e.jsx(zt,{className:"h-4 w-4 text-gray-500"}):e.jsx(xt,{className:"h-4 w-4 text-gray-500"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"newPassword",children:y.newPassword}),e.jsxs("div",{className:"relative",children:[e.jsx(We,{id:"newPassword",type:i.new?"text":"password",value:a.newPassword,onChange:T=>f("newPassword",T.target.value),disabled:o,className:"pr-10"}),e.jsx(C,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>v("new"),disabled:o,children:i.new?e.jsx(zt,{className:"h-4 w-4 text-gray-500"}):e.jsx(xt,{className:"h-4 w-4 text-gray-500"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"confirmPassword",children:y.confirmPassword}),e.jsxs("div",{className:"relative",children:[e.jsx(We,{id:"confirmPassword",type:i.confirm?"text":"password",value:a.confirmPassword,onChange:T=>f("confirmPassword",T.target.value),disabled:o,className:"pr-10"}),e.jsx(C,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>v("confirm"),disabled:o,children:i.confirm?e.jsx(zt,{className:"h-4 w-4 text-gray-500"}):e.jsx(xt,{className:"h-4 w-4 text-gray-500"})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(C,{type:"button",variant:"outline",onClick:h,disabled:o,className:"flex-1",children:y.cancel}),e.jsx(C,{type:"submit",disabled:o,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:o?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),y.loading]}):y.changePassword})]})]})})]})}):null}function l0({isOpen:s,onClose:t,userId:r}){const[a,n]=c.useState("export"),[i,l]=c.useState(!1),[o,d]=c.useState("idle"),[m,u]=c.useState(""),[x,p]=c.useState(null),g=c.useRef(null),f={en:{title:"Data Management",export:"Export Data",import:"Import Data",manage:"Manage Data",exportDesc:"Download all your study data, settings, and progress",importDesc:"Upload previously exported data to restore your settings",manageDesc:"Clear cache, reset progress, or manage your data",exportData:"Export My Data",importData:"Import Data",clearCache:"Clear Cache",resetProgress:"Reset All Progress",exportSuccess:"Data exported successfully!",importSuccess:"Data imported successfully!",clearSuccess:"Cache cleared successfully!",resetSuccess:"Progress reset successfully!",exportError:"Failed to export data",importError:"Failed to import data",clearError:"Failed to clear cache",resetError:"Failed to reset progress",loading:"Processing...",cancel:"Cancel",close:"Close",warning:"Warning",resetWarning:"This will permanently delete all your study progress, activities, and sessions. This action cannot be undone.",confirmReset:"Yes, Reset Everything",dataSize:"Data Size",lastUpdated:"Last Updated",records:"records",exportFormat:"Export Format",jsonFormat:"JSON (Recommended)",csvFormat:"CSV (Spreadsheet)",selectFile:"Select File",dragDrop:"Drag and drop a file here, or click to select",invalidFile:"Invalid file format. Please select a JSON file.",fileTooLarge:"File is too large. Maximum size is 10MB.",noFileSelected:"Please select a file to import."}}.en,v=async()=>{l(!0),d("idle");try{const k=await Pt.exportUserData(r);if(k.data){p(k.data),d("success"),u(f.exportSuccess);const G=JSON.stringify(k.data,null,2),Q=new Blob([G],{type:"application/json"}),se=URL.createObjectURL(Q),S=document.createElement("a");S.href=se,S.download=`imtehaan-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(se)}else d("error"),u(f.exportError)}catch{d("error"),u(f.exportError)}finally{l(!1)}},b=async k=>{if(!k){d("error"),u(f.noFileSelected);return}if(k.size>10*1024*1024){d("error"),u(f.fileTooLarge);return}if(!k.name.endsWith(".json")){d("error"),u(f.invalidFile);return}l(!0),d("idle");try{const G=await k.text(),Q=JSON.parse(G),se=await Pt.importUserData(r,Q);se.success?(d("success"),u(f.importSuccess),setTimeout(()=>{t(),window.location.reload()},2e3)):(d("error"),u(se.error?.message||f.importError))}catch{d("error"),u(f.importError)}finally{l(!1)}},w=async()=>{l(!0),d("idle");try{(await Pt.clearUserCache(r)).success?(d("success"),u(f.clearSuccess)):(d("error"),u(f.clearError))}catch{d("error"),u(f.clearError)}finally{l(!1)}},h=async()=>{if(confirm(f.resetWarning)){l(!0),d("idle");try{(await Pt.resetUserProgress(r)).success?(d("success"),u(f.resetSuccess),setTimeout(()=>{t(),window.location.reload()},2e3)):(d("error"),u(f.resetError))}catch{d("error"),u(f.resetError)}finally{l(!1)}}},T=k=>{const G=k.target.files?.[0];G&&b(G)},E=k=>{k.preventDefault()},R=k=>{k.preventDefault();const G=k.dataTransfer.files[0];G&&b(G)},P=()=>{i||(d("idle"),u(""),p(null),t())};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(M,{className:"w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-5 w-5 text-blue-600"}),f.title]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:P,disabled:i,className:"h-8 w-8 p-0",children:e.jsx(Qe,{className:"h-4 w-4"})})]}),e.jsxs(L,{className:"space-y-6",children:[o==="success"&&e.jsxs(at,{className:"border-green-200 bg-green-50",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),e.jsx(nt,{className:"text-green-800",children:m})]}),o==="error"&&e.jsxs(at,{className:"border-red-200 bg-red-50",children:[e.jsx(Je,{className:"h-4 w-4 text-red-600"}),e.jsx(nt,{className:"text-red-800",children:m})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:["export","import","manage"].map(k=>e.jsxs(C,{variant:a===k?"default":"ghost",size:"sm",onClick:()=>n(k),disabled:i,className:"flex-1",children:[k==="export"&&e.jsx(dr,{className:"h-4 w-4 mr-2"}),k==="import"&&e.jsx(ha,{className:"h-4 w-4 mr-2"}),k==="manage"&&e.jsx(Ve,{className:"h-4 w-4 mr-2"}),f[k]]},k))}),e.jsxs("div",{className:"min-h-[300px]",children:[a==="export"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(dr,{className:"h-16 w-16 text-blue-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:f.export}),e.jsx("p",{className:"text-gray-600 mb-6",children:f.exportDesc}),x&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[f.dataSize,":"]}),e.jsxs(ae,{variant:"secondary",className:"ml-2",children:[JSON.stringify(x).length," bytes"]})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[f.lastUpdated,":"]}),e.jsx(ae,{variant:"secondary",className:"ml-2",children:new Date(x.export_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Study Plans:"}),e.jsxs(ae,{variant:"secondary",className:"ml-2",children:[x.study_plans.length," ",f.records]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Activities:"}),e.jsxs(ae,{variant:"secondary",className:"ml-2",children:[x.learning_activities.length," ",f.records]})]})]})}),e.jsx(C,{onClick:v,disabled:i,className:"bg-blue-600 hover:bg-blue-700 text-white",children:i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),f.loading]}):e.jsxs(e.Fragment,{children:[e.jsx(dr,{className:"h-4 w-4 mr-2"}),f.exportData]})})]})}),a==="import"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ha,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:f.import}),e.jsx("p",{className:"text-gray-600 mb-6",children:f.importDesc}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 mb-6 hover:border-blue-400 transition-colors",onDragOver:E,onDrop:R,children:[e.jsx(rt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:f.dragDrop}),e.jsx(C,{variant:"outline",onClick:()=>g.current?.click(),disabled:i,children:f.selectFile}),e.jsx("input",{ref:g,type:"file",accept:".json",onChange:T,className:"hidden"})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:[" ",f.jsonFormat]}),e.jsxs("p",{children:[" ",f.fileTooLarge]})]})]})}),a==="manage"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ve,{className:"h-16 w-16 text-orange-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:f.manage}),e.jsx("p",{className:"text-gray-600 mb-6",children:f.manageDesc}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(C,{variant:"outline",onClick:w,disabled:i,className:"w-full",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),f.clearCache]}),e.jsx(ys,{}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Je,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-2",children:f.warning}),e.jsx("p",{className:"mb-3",children:f.resetWarning}),e.jsxs(C,{variant:"outline",size:"sm",onClick:h,disabled:i,className:"border-yellow-300 text-yellow-700 hover:bg-yellow-100",children:[e.jsx(vr,{className:"h-4 w-4 mr-2"}),f.confirmReset]})]})]})})]})]})})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(C,{variant:"outline",onClick:P,disabled:i,children:f.close})})]})]})}):null}function c0(){const{setCurrentPage:s,user:t}=Re(),[r,a]=c.useState("general"),[n,i]=c.useState("idle"),[l,o]=c.useState(!0),[d,m]=c.useState(null),[u,x]=c.useState(!1),[p,g]=c.useState(!1),[y,f]=c.useState(null),[v,b]=c.useState(!1),h={en:{title:"Settings",subtitle:"Customize your learning experience",backToDashboard:"Back to Dashboard",general:"General",study:"Study",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",account:"Account",data:"Data",themeTitle:"Theme & Appearance",themeDesc:"Choose how Imtehaan looks and feels",theme:"Theme",themeLight:"Light",themeDark:"Dark",themeSystem:"System",languageTitle:"Language",languageDesc:"Select your preferred language",studyPrefsTitle:"Study Preferences",studyPrefsDesc:"Customize your learning experience",autoPlay:"Auto-play flashcards",autoPlayDesc:"Automatically advance to next card",showHints:"Show hints",showHintsDesc:"Display helpful hints during study",soundEffects:"Sound effects",soundEffectsDesc:"Play sounds for interactions",vibration:"Vibration feedback",vibrationDesc:"Haptic feedback on mobile devices",dailyGoal:"Daily study goal (minutes)",sessionDuration:"Default session duration (minutes)",notificationTitle:"Notification Preferences",notificationDesc:"Choose what notifications you want to receive",pushNotifications:"Push notifications",emailNotifications:"Email notifications",studyReminders:"Study reminders",achievements:"Achievement notifications",weeklyReports:"Weekly progress reports",privacyTitle:"Privacy & Security",privacyDesc:"Control your data and privacy settings",dataSharing:"Share data for improvements",analytics:"Usage analytics",profileVisibility:"Profile visibility",profilePublic:"Public",profilePrivate:"Private",accessibilityTitle:"Accessibility",accessibilityDesc:"Make Imtehaan more accessible",fontSize:"Text size",fontSizeSmall:"Small",fontSizeMedium:"Medium",fontSizeLarge:"Large",highContrast:"High contrast mode",reducedMotion:"Reduce animations",accountTitle:"Account Information",accountDesc:"Manage your account details",changePassword:"Change password",twoFactor:"Two-factor authentication",deleteAccount:"Delete account",signOut:"Sign out",accountCreated:"Account created",lastSignIn:"Last sign in",dataTitle:"Data Management",dataDesc:"Export, import, or reset your data",exportData:"Export my data",importData:"Import data",resetProgress:"Reset all progress",clearCache:"Clear cache",save:"Save Changes",cancel:"Cancel",reset:"Reset to defaults",saving:"Saving...",saved:"Settings saved successfully!",error:"Failed to save settings. Please try again.",loading:"Loading settings...",noUser:"Please sign in to access settings",exportDesc:"Download all your study data",importDesc:"Upload previously exported data",resetDesc:"This will delete all your progress permanently",cacheDesc:"Clear temporary files and cached data"}}.en,T=[{id:"general",label:h.general,icon:Sc},{id:"study",label:h.study,icon:Pe},{id:"notifications",label:h.notifications,icon:Ya},{id:"privacy",label:h.privacy,icon:ma},{id:"accessibility",label:h.accessibility,icon:xt},{id:"account",label:h.account,icon:Ls},{id:"data",label:h.data,icon:da}];c.useEffect(()=>{t?.id?E():o(!1)},[t?.id]);const E=async()=>{if(t?.id){o(!0),m(null);try{const _=await Pt.getUserSettings(t.id);if(_.error)throw _.error;_.data&&(f(_.data),_.data.language)}catch(_){console.error("Error loading user settings:",_),m("Failed to load settings")}finally{o(!1)}}},R=(_,me)=>{y&&(f(le=>({...le,[_]:me})),b(!0))},P=async()=>{if(!(!t?.id||!y)){i("saving"),m(null);try{const _=await Pt.updateUserSettings(t.id,y);if(_.error)throw _.error;y.language,i("saved"),b(!1),setTimeout(()=>i("idle"),3e3)}catch(_){console.error("Error saving settings:",_),i("error"),m("Failed to save settings"),setTimeout(()=>i("idle"),3e3)}}},k=async()=>{if(t?.id&&confirm("Are you sure you want to reset all settings to default?"))try{await Pt.createDefaultSettings(t.id),await E(),b(!1)}catch(_){console.error("Error resetting settings:",_),m("Failed to reset settings")}},G=async()=>{try{localStorage.removeItem("imtehaan_current_page"),s("login")}catch(_){console.error("Error signing out:",_)}},Q=async()=>{if(t?.id&&confirm("Are you sure you want to delete your account? This action cannot be undone."))try{(await Pt.deleteUserAccount(t.id)).success?s("login"):m("Failed to delete account")}catch(_){console.error("Error deleting account:",_),m("Failed to delete account")}};if(l)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/30 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:h.loading})]})});if(!t?.id)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/30 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Kt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:h.noUser}),e.jsx(C,{onClick:()=>s("login"),children:"Sign In"})]})});if(d&&!y)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/30 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Settings"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d}),e.jsx(C,{onClick:E,children:"Retry"})]})});if(!y)return null;const se=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsxs(V,{className:"flex items-center",children:[e.jsx(Kt,{className:"h-5 w-5 mr-2 text-blue-600"}),"General Settings"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"General application settings"})]}),e.jsx(L,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Other general settings will appear here."})})]})}),S=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsxs(V,{className:"flex items-center",children:[e.jsx(qe,{className:"h-5 w-5 mr-2 text-green-600"}),h.studyPrefsTitle]}),e.jsx("p",{className:"text-sm text-gray-600",children:h.studyPrefsDesc})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(we,{children:h.autoPlay}),e.jsx("p",{className:"text-sm text-gray-600",children:h.autoPlayDesc})]}),e.jsx(lt,{checked:y.auto_play_flashcards,onCheckedChange:_=>R("auto_play_flashcards",_)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(we,{children:h.showHints}),e.jsx("p",{className:"text-sm text-gray-600",children:h.showHintsDesc})]}),e.jsx(lt,{checked:y.show_hints,onCheckedChange:_=>R("show_hints",_)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(we,{children:h.soundEffects}),e.jsx("p",{className:"text-sm text-gray-600",children:h.soundEffectsDesc})]}),e.jsx(lt,{checked:y.sound_effects,onCheckedChange:_=>R("sound_effects",_)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(we,{children:h.vibration}),e.jsx("p",{className:"text-sm text-gray-600",children:h.vibrationDesc})]}),e.jsx(lt,{checked:y.vibration,onCheckedChange:_=>R("vibration",_)})]})]}),e.jsx(ys,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:h.dailyGoal}),e.jsx(We,{type:"number",min:"10",max:"180",value:y.daily_goal_minutes,onChange:_=>R("daily_goal_minutes",parseInt(_.target.value)),className:"w-32"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:h.sessionDuration}),e.jsx(We,{type:"number",min:"5",max:"60",value:y.session_duration_minutes,onChange:_=>R("session_duration_minutes",parseInt(_.target.value)),className:"w-32"})]})]})]})]})}),U=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsxs(V,{className:"flex items-center",children:[e.jsx(Ya,{className:"h-5 w-5 mr-2 text-orange-600"}),h.notificationTitle]}),e.jsx("p",{className:"text-sm text-gray-600",children:h.notificationDesc})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(we,{children:h.pushNotifications})}),e.jsx(lt,{checked:y.push_notifications,onCheckedChange:_=>R("push_notifications",_)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(we,{children:h.emailNotifications})}),e.jsx(lt,{checked:y.email_notifications,onCheckedChange:_=>R("email_notifications",_)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(we,{children:h.studyReminders})}),e.jsx(lt,{checked:y.study_reminders,onCheckedChange:_=>R("study_reminders",_)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(we,{children:h.achievements})}),e.jsx(lt,{checked:y.achievement_notifications,onCheckedChange:_=>R("achievement_notifications",_)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(we,{children:h.weeklyReports})}),e.jsx(lt,{checked:y.weekly_reports,onCheckedChange:_=>R("weekly_reports",_)})]})]})]})}),ee=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsxs(V,{className:"flex items-center",children:[e.jsx(ma,{className:"h-5 w-5 mr-2 text-red-600"}),h.privacyTitle]}),e.jsx("p",{className:"text-sm text-gray-600",children:h.privacyDesc})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(we,{children:h.dataSharing})}),e.jsx(lt,{checked:y.data_sharing,onCheckedChange:_=>R("data_sharing",_)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(we,{children:h.analytics})}),e.jsx(lt,{checked:y.analytics_enabled,onCheckedChange:_=>R("analytics_enabled",_)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:h.profileVisibility}),e.jsxs(zs,{value:y.profile_visibility,onValueChange:_=>R("profile_visibility",_),children:[e.jsx(Xt,{className:"w-full",children:e.jsx(vs,{})}),e.jsxs(es,{children:[e.jsx(Et,{value:"public",children:h.profilePublic}),e.jsx(Et,{value:"private",children:h.profilePrivate})]})]})]})]})]})}),ge=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsxs(V,{className:"flex items-center",children:[e.jsx(xt,{className:"h-5 w-5 mr-2 text-indigo-600"}),h.accessibilityTitle]}),e.jsx("p",{className:"text-sm text-gray-600",children:h.accessibilityDesc})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:h.fontSize}),e.jsxs(zs,{value:y.font_size,onValueChange:_=>R("font_size",_),children:[e.jsx(Xt,{className:"w-full",children:e.jsx(vs,{})}),e.jsxs(es,{children:[e.jsx(Et,{value:"small",children:h.fontSizeSmall}),e.jsx(Et,{value:"medium",children:h.fontSizeMedium}),e.jsx(Et,{value:"large",children:h.fontSizeLarge})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(we,{children:h.highContrast})}),e.jsx(lt,{checked:y.high_contrast,onCheckedChange:_=>R("high_contrast",_)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(we,{children:h.reducedMotion})}),e.jsx(lt,{checked:y.reduced_motion,onCheckedChange:_=>R("reduced_motion",_)})]})]})]})}),q=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsxs(V,{className:"flex items-center",children:[e.jsx(Ls,{className:"h-5 w-5 mr-2 text-teal-600"}),h.accountTitle]}),e.jsx("p",{className:"text-sm text-gray-600",children:h.accountDesc})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Email:"}),e.jsx("span",{className:"text-sm text-gray-600",children:t.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Name:"}),e.jsx("span",{className:"text-sm text-gray-600",children:t.full_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"User ID:"}),e.jsxs("span",{className:"text-sm text-gray-600 font-mono text-xs",children:[t.id.slice(0,8),"..."]})]})]}),e.jsxs(C,{variant:"outline",className:"w-full justify-start",onClick:()=>x(!0),children:[e.jsx(uc,{className:"h-4 w-4 mr-2"}),h.changePassword]}),e.jsxs(C,{variant:"outline",className:"w-full justify-start",disabled:!0,children:[e.jsx(yr,{className:"h-4 w-4 mr-2"}),h.twoFactor," (Coming Soon)"]}),e.jsx(ys,{}),e.jsxs(C,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700",onClick:Q,children:[e.jsx(vr,{className:"h-4 w-4 mr-2"}),h.deleteAccount]}),e.jsxs(C,{variant:"outline",className:"w-full justify-start",onClick:G,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),h.signOut]})]})]})}),oe=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsxs(V,{className:"flex items-center",children:[e.jsx(da,{className:"h-5 w-5 mr-2 text-gray-600"}),h.dataTitle]}),e.jsx("p",{className:"text-sm text-gray-600",children:h.dataDesc})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{variant:"outline",className:"w-full justify-start",onClick:()=>g(!0),children:[e.jsx(dr,{className:"h-4 w-4 mr-2"}),h.exportData]}),e.jsx("p",{className:"text-xs text-gray-500",children:h.exportDesc})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{variant:"outline",className:"w-full justify-start",onClick:()=>g(!0),children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),h.importData]}),e.jsx("p",{className:"text-xs text-gray-500",children:h.importDesc})]}),e.jsx(ys,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{variant:"outline",className:"w-full justify-start",onClick:()=>g(!0),children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),h.clearCache]}),e.jsx("p",{className:"text-xs text-gray-500",children:h.cacheDesc})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700",onClick:()=>g(!0),children:[e.jsx(vr,{className:"h-4 w-4 mr-2"}),h.resetProgress]}),e.jsx("p",{className:"text-xs text-red-500",children:h.resetDesc})]})]})]})}),O=()=>{switch(r){case"general":return se();case"study":return S();case"notifications":return U();case"privacy":return ee();case"accessibility":return ge();case"account":return q();case"data":return oe();default:return se()}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/30",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200/60 sticky top-0 z-50 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(C,{variant:"ghost",onClick:()=>s("dashboard"),className:"text-gray-600 hover:text-gray-900",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),h.backToDashboard]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:h.title}),e.jsx("p",{className:"text-sm text-gray-600",children:h.subtitle})]})]}),n!=="idle"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[n==="saving"&&e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"h-4 w-4 animate-spin text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-600",children:h.saving})]}),n==="saved"&&e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:h.saved})]}),n==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-600",children:h.error})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(M,{className:"sticky top-24",children:e.jsx(L,{className:"p-2",children:e.jsx("nav",{className:"space-y-1",children:T.map(_=>{const me=_.icon;return e.jsxs(C,{variant:r===_.id?"default":"ghost",className:`w-full justify-start ${r===_.id?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(_.id),children:[e.jsx(me,{className:"h-4 w-4 mr-3"}),_.label]},_.id)})})})})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"space-y-6",children:[O(),e.jsx(M,{children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end",children:[e.jsxs(C,{variant:"outline",onClick:k,disabled:n==="saving",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),h.reset]}),e.jsx(C,{onClick:P,disabled:n==="saving"||!v,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",children:n==="saving"?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"h-4 w-4 mr-2 animate-spin"}),h.saving]}):e.jsxs(e.Fragment,{children:[e.jsx(Dc,{className:"h-4 w-4 mr-2"}),h.save]})})]}),v&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"You have unsaved changes"})]})})]})})]})})]})}),e.jsx(o0,{isOpen:u,onClose:()=>x(!1),userId:t.id,language:"en"}),e.jsx(l0,{isOpen:p,onClose:()=>g(!1),userId:t.id,language:"en"})]})}function d0({className:s,...t}){return e.jsx("textarea",{className:Ce("flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...t})}const u0={en:{title:"P1 Mock Exam",backToDashboard:"Back to Dashboard",question:"Question",answer:"Your Answer",hint:"Hint",submit:"Submit Answer",next:"Next Question",previous:"Previous Question",timeRemaining:"Time Remaining",questionNumber:"Question",of:"of",showHint:"Show Hint",hideHint:"Hide Hint",flagQuestion:"Flag Question",examType:"Exam Type",p1:"Paper 1",p2:"Paper 2",minutes:"minutes",seconds:"seconds",content:"Case Study",images:"Images",questions:"Questions",part:"Part",marks:"Marks",topic:"Topic",caseStudy:"Case Study",loading:"Loading...",noData:"No exam data available",totalMarks:"Total Marks"}};function m0(){const{setCurrentPage:s,user:t}=Re(),r=u0.en;Gs({pageTitle:"P1 Mock Exam",pageUrl:"/mock-exam-p1",trackClicks:!0,trackTime:!0,trackScroll:!0});const[a,n]=c.useState([]),[i,l]=c.useState(0),[o,d]=c.useState([]),[m,u]=c.useState(0),[x,p]=c.useState(!1),[g,y]=c.useState(90*60),[f,v]=c.useState(!0),[b,w]=c.useState({}),[h,T]=c.useState(null),[E,R]=c.useState(!1),[P,k]=c.useState([]),[G,Q]=c.useState(!1),[se,S]=c.useState(!1),[U,ee]=c.useState(null),[ge,q]=c.useState(!1),[oe,O]=c.useState(!1),[_,me]=c.useState(0),le=o[m];a[i];const D=N=>{const $=Math.floor(N/60),H=N%60;return`${$.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`};c.useEffect(()=>{const N=setInterval(()=>{me($=>$+1)},1e3);return()=>clearInterval(N)},[]);const Y=c.useRef(0);c.useEffect(()=>()=>{if(t?.id&&_>0){const N=_-Y.current;N>0&&(console.log(` MockExamPage: Saving ${N} seconds of unsaved study time`),De.addStudyTime(t.id,N,"mock-exam-p1"))}},[t?.id,_]),c.useEffect(()=>{if(!t?.id)return;const N=setInterval(()=>{const $=_-Y.current;$>=30&&(console.log(` MockExamPage: Periodic save - ${$} seconds`),De.addStudyTime(t.id,$,"mock-exam-p1"),Y.current=_)},3e4);return()=>clearInterval(N)},[t?.id]),c.useEffect(()=>{he()},[]),c.useEffect(()=>{a.length>0&&Ne(a[i].set)},[a,i]);const he=async()=>{try{v(!0);const N=await ka.getQuestionSets(),H=[...N].sort(()=>Math.random()-.5).slice(0,4);N.length<4&&console.warn(`Only ${N.length} question sets available in database, cannot reach 80 marks`),n(H),H.length>0&&l(0)}catch(N){console.error("Error fetching question sets:",N)}finally{v(!1)}},Ne=async N=>{try{const $=await ka.getQuestionsBySet(N);d($),u(0),p(!1),w({}),$.forEach(H=>{H.image&&ye(H.image,H.question_id)})}catch($){console.error("Error fetching questions by set:",$)}},ye=(N,$)=>{const H=new Image;H.onload=()=>{console.log(` Image ${$} loaded successfully:`,N)},H.onerror=()=>{console.log(` Image ${$} failed to load:`,N),re(N,$)},H.src=N},re=async(N,$)=>{try{const H=await fetch(N,{method:"GET",mode:"cors",headers:{Accept:"image/*"}});if(H.ok){const Z=await H.blob(),X=URL.createObjectURL(Z);console.log(` Image ${$} fetched successfully via fetch API`);const fe=document.querySelector(`img[src="${N}"]`);fe&&(fe.src=X)}else console.log(` Image ${$} fetch failed:`,H.status,H.statusText)}catch(H){console.log(` Image ${$} fetch error:`,H)}};c.useEffect(()=>{const N=setInterval(()=>{y($=>$<=1?(clearInterval(N),ce(),0):$-1)},1e3);return()=>clearInterval(N)},[]);const ce=async()=>{try{if(t?.id){const N=5400-g,$=o.length,Z=Object.keys(b).length,X=$>0?Math.round(Z/$*100):0;await vt.trackMockExam(t.id,1,"Mock Exam P1","Business Studies",Math.ceil(N/60),Z,$,X),await It.trackMockExam(1,"Mock Exam P1","Business Studies",N,Z,$,X)}}catch(N){console.error("Error tracking mock exam analytics:",N)}},Te=N=>{w($=>({...$,[le.question_id]:N})),se&&S(!1)},A=async()=>{try{if(le){const Z=b[le.question_id]||"";if(Z.trim()){const X={question_id:le.question_id,part:le.part,question:le.question,user_answer:Z,solution:le.solution,marks:le.marks,set:le.Set||"",timestamp:new Date().toISOString()};k(fe=>[X,...fe])}}if(P.length===0){alert("Please answer at least one question before submitting.");return}O(!0);const N=P.map(Z=>({question_id:Z.question_id,question:Z.question,user_answer:Z.user_answer,solution:Z.solution,marks:Z.marks,part:Z.part,set:Z.set})),$=await fetch("http://localhost:8000/grade-mock-exam",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attempted_questions:N,exam_type:"P1",student_id:t?.id||"anonymous"})});if(!$.ok)throw new Error("Failed to grade exam");const H=await $.json();ee(H),q(!0),O(!1)}catch(N){console.error("Error submitting exam:",N),alert("Error submitting exam. Please try again."),O(!1)}},z=()=>{if(m<o.length-1){if(!le)return;const N=b[le.question_id]||"";if(!N.trim()){S(!0);return}S(!1);const $={question_id:le.question_id,part:le.part,question:le.question,user_answer:N,solution:le.solution,marks:le.marks,set:le.Set||"",timestamp:new Date().toISOString()};k(H=>[$,...H]),u(m+1),p(!1)}},ie=()=>{m>0&&(u(m-1),p(!1))},te=()=>{i<Math.min(a.length,4)-1&&l(i+1)},ve=()=>{i>0&&l(i-1)},be=N=>{T(N),R(!0)},j=()=>{R(!1),T(null)};return f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ua,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-blue-600"}),e.jsx("p",{className:"text-lg text-gray-600",children:r.loading})]})}):a.length===0?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg text-gray-600",children:r.noData})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsx("nav",{className:"bg-white/90 backdrop-blur-md border-b border-gray-200/60 sticky top-0 z-40 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>s("dashboard"),className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100/80 transition-colors",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),r.backToDashboard]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Pe,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:r.title})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-50 to-indigo-50 px-3 py-2 rounded-lg border border-blue-200/50 shadow-sm",children:[e.jsx(Fe,{className:"h-3 w-3 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Time Limit: 1.5 hours"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-green-50 to-emerald-50 px-3 py-2 rounded-lg border border-green-200/50 shadow-sm",children:[e.jsx(Ye,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-green-700",children:"Total: 80 marks"})]}),e.jsxs("div",{className:"flex items-center gap-2.5 bg-gradient-to-r from-red-50 to-orange-50 px-4 py-2.5 rounded-xl border border-red-200/50 shadow-sm",children:[e.jsx(Fe,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"font-mono text-red-700 font-bold text-sm",children:D(g)})]}),P.length>0&&e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>Q(!0),className:"bg-gradient-to-r from-purple-50 to-indigo-50 hover:from-purple-100 hover:to-indigo-100 border border-purple-200 text-purple-700 hover:text-purple-800 transition-colors",children:[e.jsx(fr,{className:"h-4 w-4 mr-2"}),"Attempted (",P.length,")"]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>s("settings"),className:"hover:bg-gray-100/80 transition-colors",children:e.jsx(Kt,{className:"h-4 w-4"})}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>{localStorage.removeItem("imtehaan_current_page"),s("landing")},className:"hover:bg-gray-100/80 transition-colors",children:e.jsx(js,{className:"h-4 w-4"})})]})]})})}),e.jsx("div",{className:"max-w-full mx-auto px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex gap-6 h-[calc(100vh-12rem)]",children:[e.jsx("div",{className:"w-72 flex-shrink-0",children:e.jsxs(M,{className:"h-full shadow-xl border-0 bg-gradient-to-br from-white to-blue-50/30 backdrop-blur-sm",children:[e.jsx(B,{className:"pb-4 border-b border-blue-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:e.jsxs(V,{className:"text-base flex items-center gap-2 text-blue-800 font-semibold",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-md",children:e.jsx(cs,{className:"h-4 w-4 text-white"})}),r.images]})}),e.jsxs(L,{className:"p-4 space-y-3",children:[o.length>0?o.map((N,$)=>N.image?e.jsx("div",{className:`cursor-pointer transition-all duration-300 rounded-lg overflow-hidden ${m===$?"shadow-lg scale-105":"hover:scale-102 hover:shadow-md"}`,onClick:()=>u($),children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-2 h-32 relative overflow-hidden rounded-lg cursor-pointer",onClick:H=>{H.stopPropagation(),be(N.image)},children:[e.jsx("img",{src:N.image,alt:`Question ${N.part}`,className:"w-full h-full object-contain rounded transition-all duration-300 hover:scale-110",crossOrigin:"anonymous",onError:H=>{const Z=H.target;if(console.log(`Image failed to load: ${Z.src}`),Z.src.includes("picsum")){Z.style.display="none";const X=Z.nextElementSibling;X&&X.classList.remove("hidden")}else Z.src="https://picsum.photos/400/300?random="+N.question_id,Z.onerror=null},onLoad:H=>{const Z=H.target,X=Z.nextElementSibling;X&&X.classList.add("hidden"),console.log(`Image loaded successfully: ${Z.src}`)}}),e.jsx("div",{className:"hidden absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 rounded flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx(cs,{className:"h-10 w-10 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-xs font-medium",children:"Image placeholder"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Question ",N.part]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CORS issue detected"})]})})]})},N.question_id):null).filter(Boolean).slice(0,1):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(cs,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-xs font-medium",children:"No questions available"})]}),o.length>0&&o.filter(N=>N.image).length===0&&e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(cs,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-xs font-medium",children:"No images required for this question set"})]})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[e.jsxs(M,{className:"flex-1 shadow-xl border-0 bg-gradient-to-br from-white to-green-50/30 backdrop-blur-sm",children:[e.jsx(B,{className:"py-2 px-4 border-b border-green-100 bg-gradient-to-r from-green-50 to-emerald-50",children:e.jsxs(V,{className:"text-sm flex items-center gap-2 text-green-800 font-semibold",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(rt,{className:"h-3 w-3 text-white"})}),r.caseStudy]})}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-1 p-4 bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg border-2 border-dashed border-gray-300/60 overflow-y-auto max-h-[250px]",children:o.length>0&&o[0].case_study?e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:r.caseStudy})}),e.jsx("div",{className:"prose prose-gray max-w-none",children:e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-line",children:o[0].case_study})})]}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(rt,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-600",children:r.caseStudy}),e.jsx("p",{className:"text-xs text-gray-500",children:"No case study available for this question set."})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-green-100 mt-4",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:ve,disabled:i===0,className:"flex items-center gap-2 px-4 py-2 border-2 border-gray-300 hover:border-green-400 hover:bg-green-50 transition-all text-xs font-medium rounded-xl disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",children:[e.jsx(la,{className:"h-4 w-4"}),"Previous Set"]}),e.jsxs(ae,{className:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 font-semibold px-3 py-1.5 border border-green-300",children:["Set ",i+1," of 4"]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:te,disabled:i>=Math.min(a.length,4)-1,className:"flex items-center gap-2 px-4 py-2 border-2 border-gray-300 hover:border-green-400 hover:bg-green-50 transition-all text-xs font-medium rounded-xl disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",children:["Next Set",e.jsx(oa,{className:"h-4 w-4"})]})]})]})})]}),e.jsxs(M,{className:"flex-1 shadow-xl border-0 bg-gradient-to-br from-white to-purple-50/30 backdrop-blur-sm",children:[e.jsx(B,{className:"py-2 px-4 border-b border-purple-100 bg-gradient-to-r from-purple-50 to-pink-50",children:e.jsxs(V,{className:"text-sm flex items-center gap-2 text-purple-800 font-semibold",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(Ye,{className:"h-3 w-3 text-white"})}),r.questions]})}),e.jsx(L,{className:"p-4 space-y-4",children:le&&e.jsxs(e.Fragment,{children:[le.hint&&e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>p(!x),className:"text-amber-600 hover:text-amber-700 hover:bg-amber-50 border-2 border-amber-200 hover:border-amber-300 transition-all text-xs font-medium rounded-xl shadow-sm",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),x?r.hideHint:r.showHint]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(ae,{variant:"outline",className:"text-xs px-3 py-1.5 border-blue-400 text-blue-700 bg-gradient-to-r from-blue-50 to-blue-100 font-medium shadow-sm",children:[r.part," ",le.part]}),e.jsxs(ae,{variant:"secondary",className:"text-xs px-3 py-1.5 bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 border-green-300 font-semibold shadow-sm",children:[le.marks," ",r.marks]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4 rounded-xl border-2 border-blue-200/60 shadow-sm relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs(ae,{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold text-[10px] px-2 py-0.5 shadow-md",children:["Q",m+1]})}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm leading-relaxed pr-12",children:le.question})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-xs font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-pulse"}),r.answer]}),e.jsx(d0,{placeholder:"Type your answer here...",className:"min-h-[100px] resize-none border-2 border-gray-200 focus:border-purple-400 focus:ring-2 focus:ring-purple-200 rounded-xl text-xs leading-relaxed shadow-sm",value:b[le.question_id]||"",onChange:N=>Te(N.target.value)})]}),x&&le.hint&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-amber-800 flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5"}),r.hint]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg p-1",children:e.jsx(Qe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-4 rounded-xl border-2 border-amber-200/60 mb-4",children:e.jsx("p",{className:"text-sm text-amber-900 font-medium leading-relaxed",children:le.hint})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{onClick:()=>p(!1),className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-medium px-6 py-2 rounded-xl shadow-md",children:"Got it!"})})]})}),e.jsxs("div",{className:"flex justify-between pt-4 border-t border-purple-100",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:ie,disabled:m===0,className:"flex items-center gap-1 px-3 py-1.5 border-2 border-gray-300 hover:border-purple-400 hover:bg-purple-50 transition-all text-[10px] font-medium rounded-lg disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",children:[e.jsx(la,{className:"h-3 w-3"}),r.previous]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:z,disabled:m===o.length-1,className:"flex items-center gap-1 px-3 py-1.5 border-2 border-gray-300 hover:border-purple-400 hover:bg-purple-50 transition-all text-[10px] font-medium rounded-lg disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",children:[r.next,e.jsx(oa,{className:"h-3 w-3"})]})]}),se&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-xs text-red-700 font-medium",children:"Please write an answer before moving to the next question."})]}),e.jsx("button",{onClick:()=>S(!1),className:"ml-2 text-red-600 hover:text-red-700",children:e.jsx(Qe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-purple-100",children:e.jsx(C,{className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold py-2.5 text-sm shadow-lg hover:shadow-xl transition-all duration-300 rounded-xl disabled:opacity-50",onClick:A,disabled:oe||P.length===0,children:oe?e.jsxs(e.Fragment,{children:[e.jsx(ua,{className:"h-4 w-4 mr-2 animate-spin"}),"Grading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Submit Exam"]})})})]})})]})]})]})}),E&&h&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative max-w-2xl max-h-[70vh] bg-white rounded-xl shadow-2xl overflow-hidden",children:[e.jsx("button",{onClick:j,className:"absolute top-4 right-4 z-10 w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg",children:e.jsx(Qe,{className:"h-5 w-5 text-gray-700"})}),e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:h,alt:"Question Image",className:"max-w-full max-h-full object-contain rounded-lg",crossOrigin:"anonymous"})})]})}),G&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-5xl max-h-[90vh] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-purple-700 to-indigo-600 text-white p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(fr,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Attempted Questions"}),e.jsxs("p",{className:"text-sm text-purple-100",children:[P.length," questions completed"]})]})]}),e.jsx("button",{onClick:()=>Q(!1),className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(Qe,{className:"h-5 w-5 text-white"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:P.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ye,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Attempted Questions Yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start answering questions to see them here"})]}):e.jsx("div",{className:"space-y-4",children:P.map((N,$)=>e.jsxs(M,{className:"shadow-md border-0",children:[e.jsx(B,{className:"pb-3 bg-gradient-to-r from-blue-50 to-purple-50 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ae,{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-xs",children:["Question #",$+1]}),e.jsxs(ae,{variant:"outline",className:"text-xs border-blue-300 text-blue-700 bg-blue-50",children:["Part ",N.part]}),e.jsxs(ae,{variant:"secondary",className:"text-xs bg-green-100 text-green-700",children:[N.marks," marks"]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(N.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),e.jsxs(L,{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700 mb-2 block",children:"Question:"}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-3 rounded-lg border border-blue-100",children:e.jsx("p",{className:"text-sm text-gray-900",children:N.question})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700 mb-2 block",children:"Your Answer:"}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-3 rounded-lg border border-green-100",children:e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:N.user_answer||e.jsx("span",{className:"text-gray-400 italic",children:"No answer provided"})})})]})]})]},`${N.question_id}-${$}`))})})]})}),ge&&U&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-6xl max-h-[90vh] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 text-white p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ct,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Exam Report"}),e.jsx("p",{className:"text-sm text-green-100",children:"P1 Mock Exam Grading Results"})]})]}),e.jsx("button",{onClick:()=>{q(!1),s("dashboard")},className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(Qe,{className:"h-6 w-6 text-white"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(M,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300",children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-700",children:[U.percentage_score,"%"]}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Score"})]})}),e.jsx(M,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-300",children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-700",children:U.overall_grade}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Grade"})]})}),e.jsx(M,{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-300",children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-700",children:[U.marks_obtained,"/",U.total_marks]}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Marks"})]})}),e.jsx(M,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-300",children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-700",children:U.questions_attempted}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"Attempted"})]})})]}),e.jsxs(M,{className:"mb-6 shadow-md",children:[e.jsx(B,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b",children:e.jsxs(V,{className:"flex items-center gap-2 text-blue-800",children:[e.jsx(Ke,{className:"h-5 w-5"}),"Overall Performance"]})}),e.jsx(L,{className:"p-4",children:e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:U.overall_feedback})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs(M,{className:"shadow-md",children:[e.jsx(B,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-b",children:e.jsxs(V,{className:"flex items-center gap-2 text-green-800",children:[e.jsx(Me,{className:"h-5 w-5"}),"Strengths"]})}),e.jsx(L,{className:"p-4",children:e.jsx("ul",{className:"space-y-2",children:U.strengths_summary?.map((N,$)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:N})]},$))})})]}),e.jsxs(M,{className:"shadow-md",children:[e.jsx(B,{className:"bg-gradient-to-r from-red-50 to-orange-50 border-b",children:e.jsxs(V,{className:"flex items-center gap-2 text-red-800",children:[e.jsx(Je,{className:"h-5 w-5"}),"Areas for Improvement"]})}),e.jsx(L,{className:"p-4",children:e.jsx("ul",{className:"space-y-2",children:U.weaknesses_summary?.map((N,$)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx(_e,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:N})]},$))})})]})]}),e.jsxs(M,{className:"mb-6 shadow-md",children:[e.jsx(B,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-b",children:e.jsxs(V,{className:"flex items-center gap-2 text-purple-800",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Recommendations"]})}),e.jsx(L,{className:"p-4",children:e.jsx("ul",{className:"space-y-2",children:U.recommendations?.map((N,$)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx(xs,{className:"h-4 w-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:N})]},$))})})]}),e.jsxs(M,{className:"shadow-md",children:[e.jsx(B,{className:"bg-gradient-to-r from-indigo-50 to-blue-50 border-b",children:e.jsxs(V,{className:"flex items-center gap-2 text-indigo-800",children:[e.jsx(rt,{className:"h-5 w-5"}),"Question-wise Results"]})}),e.jsx(L,{className:"p-4",children:e.jsx("div",{className:"space-y-4",children:U.question_grades?.map((N,$)=>e.jsxs(M,{className:"border-2",children:[e.jsx(B,{className:"pb-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ae,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:["Question ",N.question_number||N.part," Part ",N.part]}),e.jsxs(ae,{variant:"outline",className:"border-purple-300 text-purple-700",children:[N.marks_allocated," marks"]})]}),e.jsxs(ae,{className:`${N.percentage_score>=80?"bg-green-600":N.percentage_score>=60?"bg-yellow-600":"bg-red-600"} text-white`,children:[N.marks_awarded.toFixed(1),"/",N.marks_allocated]})]})}),e.jsxs(L,{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700",children:"Question:"}),e.jsx("p",{className:"text-xs text-gray-900 mt-1",children:N.question_text})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700",children:"Your Answer:"}),e.jsx("p",{className:"text-xs text-gray-700 mt-1 bg-green-50 p-2 rounded",children:N.student_answer})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-semibold text-gray-700 flex items-center gap-1",children:[e.jsx(Ke,{className:"h-3 w-3 text-amber-600"}),"Feedback:"]}),e.jsx("p",{className:"text-xs text-gray-700 mt-1 bg-blue-50 p-2 rounded",children:N.feedback})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("p",{className:"text-[10px] font-semibold text-green-800",children:"Strengths"}),e.jsx("ul",{className:"text-[10px] text-green-700 mt-1 space-y-0.5",children:N.strengths?.map((H,Z)=>e.jsxs("li",{children:[" ",H]},Z))})]}),e.jsxs("div",{className:"bg-orange-50 p-2 rounded",children:[e.jsx("p",{className:"text-[10px] font-semibold text-orange-800",children:"Improvements"}),e.jsx("ul",{className:"text-[10px] text-orange-700 mt-1 space-y-0.5",children:N.improvements?.map((H,Z)=>e.jsxs("li",{children:[" ",H]},Z))})]})]})]})]},$))})})]})]}),e.jsxs("div",{className:"border-t bg-white p-4 flex justify-between items-center",children:[e.jsx(C,{variant:"outline",onClick:()=>q(!1),className:"border-gray-300",children:"Close Report"}),e.jsx(C,{onClick:()=>{q(!1),s("dashboard")},className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white",children:"Return to Dashboard"})]})]})}),e.jsx(_s,{timeSpent:_,savedTimeRef:Y})]})}const h0={en:{title:"Mock Exam Selection",backToDashboard:"Back to Dashboard",selectPaper:"Select Your Paper",paper1:"Paper 1",paper2:"Paper 2",duration:"Duration",format:"Format",weightage:"Weightage",marks:"Marks",questions:"Questions",assessment:"Assessment",startExam:"Start Exam",paper1Description:"Short Answer and Data Response",paper2Description:"Case Study",paper1Details:"Four questions requiring a mixture of short answers and structured data responses",paper2Details:"Four questions based on a case study, provided as an insert with the paper",candidatesAnswer:"Candidates answer all questions",externallyAssessed:"Externally assessed",hour30:"1 hour 30 minutes",percentage50:"50%",marks80:"80 marks"}};function x0(){const{setCurrentPage:s}=Re(),t=h0.en,r=a=>{s(a==="p1"?"mock-exam":"mock-exam-p2")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsx("nav",{className:"bg-white/90 backdrop-blur-md border-b border-gray-200/60 sticky top-0 z-40 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>s("dashboard"),className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100/80 transition-colors",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),t.backToDashboard]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Pe,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:t.title})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>s("settings"),className:"hover:bg-gray-100/80 transition-colors",children:e.jsx(Kt,{className:"h-4 w-4"})}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>{localStorage.removeItem("imtehaan_current_page"),s("landing")},className:"hover:bg-gray-100/80 transition-colors",children:e.jsx(js,{className:"h-4 w-4"})})]})]})})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:t.selectPaper}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Choose between Paper 1 (Short Answer and Data Response) or Paper 2 (Case Study) to begin your mock exam."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[e.jsxs(M,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm hover:shadow-xl transition-all duration-300 border-l-4 border-l-blue-500",children:[e.jsx(B,{className:"pb-4",children:e.jsxs(V,{className:"text-xl flex items-center gap-3 text-blue-700",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Us,{className:"h-5 w-5 text-blue-600"})}),t.paper1]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[t.duration,":"]}),e.jsx("span",{className:"text-gray-600",children:t.hour30})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[t.marks,":"]}),e.jsx("span",{className:"text-gray-600",children:t.marks80})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[t.weightage,":"]}),e.jsx("span",{className:"text-gray-600",children:t.percentage50})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[t.questions,":"]}),e.jsx("span",{className:"text-gray-600",children:"4"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:t.format}),e.jsx("p",{className:"text-blue-700 text-sm",children:t.paper1Description})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-700 text-sm",children:t.paper1Details})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ye,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:t.candidatesAnswer})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ye,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:t.externallyAssessed})]})]}),e.jsxs(C,{onClick:()=>r("p1"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 text-base font-medium",children:[t.startExam," - ",t.paper1]})]})]}),e.jsxs(M,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm hover:shadow-xl transition-all duration-300 border-l-4 border-l-green-500",children:[e.jsx(B,{className:"pb-4",children:e.jsxs(V,{className:"text-xl flex items-center gap-3 text-green-700",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(rt,{className:"h-5 w-5 text-green-600"})}),t.paper2]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[t.duration,":"]}),e.jsx("span",{className:"text-gray-600",children:t.hour30})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[t.marks,":"]}),e.jsx("span",{className:"text-gray-600",children:t.marks80})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[t.weightage,":"]}),e.jsx("span",{className:"text-gray-600",children:t.percentage50})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[t.questions,":"]}),e.jsx("span",{className:"text-gray-600",children:"4"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:t.format}),e.jsx("p",{className:"text-green-700 text-sm",children:t.paper2Description})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-700 text-sm",children:t.paper2Details})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ye,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:t.candidatesAnswer})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ye,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:t.externallyAssessed})]})]}),e.jsxs(C,{onClick:()=>r("p2"),className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 text-base font-medium",children:[t.startExam," - ",t.paper2]})]})]})]})]})]})}const g0={en:{title:"Paper 2 Mock Exam",backToDashboard:"Back to Dashboard",context:"Case Study Context",questions:"Questions",loading:"Loading...",noData:"No exam data available",caseStudy:"Case Study",question:"Question",part:"Part",marks:"Marks",previous:"Previous",next:"Next",of:"of"}};function p0(){const{setCurrentPage:s,user:t}=Re(),r=g0.en;Gs({pageTitle:"P2 Mock Exam",pageUrl:"/mock-exam-p2",trackClicks:!0,trackTime:!0,trackScroll:!0});const[a,n]=c.useState([]),[i,l]=c.useState(0),[o,d]=c.useState([]),[m,u]=c.useState(0),[x,p]=c.useState(!0),[g,y]=c.useState(null),[f,v]=c.useState(!1),[b,w]=c.useState({}),[h,T]=c.useState([]),[E,R]=c.useState(!1),[P,k]=c.useState(!1),[G,Q]=c.useState(null),[se,S]=c.useState(!1),[U,ee]=c.useState(!1),[ge,q]=c.useState(90*60),[oe,O]=c.useState(0),_=o[m],me=a[i],le=A=>{const z=Math.floor(A/60),ie=A%60;return`${z.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}`};c.useEffect(()=>{if(ge<=0)return;const A=setInterval(()=>{q(z=>Math.max(0,z-1))},1e3);return()=>clearInterval(A)},[ge]),c.useEffect(()=>{const A=setInterval(()=>{O(z=>z+1)},1e3);return()=>clearInterval(A)},[]);const D=c.useRef(0);c.useEffect(()=>()=>{if(t?.id&&oe>0){const A=oe-D.current;A>0&&(console.log(` MockExamP2: Saving ${A} seconds of unsaved study time`),De.addStudyTime(t.id,A,"mock-exam-p2"))}},[t?.id,oe]),c.useEffect(()=>{if(!t?.id)return;const A=setInterval(()=>{const z=oe-D.current;z>=30&&(console.log(` MockExamP2: Periodic save - ${z} seconds`),De.addStudyTime(t.id,z,"mock-exam-p2"),D.current=oe)},3e4);return()=>clearInterval(A)},[t?.id]),me&&console.log("Current case details:",{case:me.case,caseStudyText:me.caseStudyText,caseStudyTextLength:me.caseStudyText?.length||0,totalQuestions:me.questions?.length||0,totalMarks:me.totalMarks}),c.useEffect(()=>{Y()},[]);const Y=async()=>{try{p(!0);const A=await Bo.getCaseStudies();if(A.length>0){const z=Math.floor(Math.random()*A.length),ie=A[z];n([ie]),l(0);const te=re(ie.questions);d(te),u(0)}}catch(A){console.error("Error fetching case studies:",A)}finally{p(!1)}},he=()=>{if(m<o.length-1){if(!_)return;const A=b[_.question_id]||"";if(!A.trim()){k(!0);return}k(!1);const z={question_id:_.question_id,question_number:_.question_number,part:_.part,question:_.question,user_answer:A,model_answer:_.answer||"",marks:_.marks,case:_.case||"",timestamp:new Date().toISOString()};T(ie=>[z,...ie]),u(m+1)}},Ne=()=>{m>0&&u(m-1)},ye=A=>{y(A),v(!0)},re=A=>{const z={};A.forEach(te=>{z[te.question_number]||(z[te.question_number]=[]),z[te.question_number].push(te)}),Object.keys(z).forEach(te=>{z[parseInt(te)].sort((ve,be)=>ve.part.localeCompare(be.part))});const ie=[];return Object.keys(z).forEach(te=>{ie.push(...z[parseInt(te)])}),ie},ce=(A,z)=>{w(ie=>({...ie,[A]:z})),P&&k(!1)},Te=async()=>{try{if(_){const te=b[_.question_id]||"";if(te.trim()){const ve={question_id:_.question_id,question_number:_.question_number,part:_.part,question:_.question,user_answer:te,model_answer:_.answer||"",marks:_.marks,case:_.case||"",timestamp:new Date().toISOString()};T(be=>[ve,...be])}}if(h.length===0){alert("Please answer at least one question before submitting.");return}ee(!0);const A=h.map(te=>({question_id:te.question_id,question:te.question,user_answer:te.user_answer,model_answer:te.model_answer,marks:te.marks,part:te.part,question_number:te.question_number,case:te.case})),z=await fetch("http://localhost:8000/grade-mock-exam",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attempted_questions:A,exam_type:"P2",student_id:t?.id||"anonymous"})});if(!z.ok)throw new Error("Failed to grade exam");const ie=await z.json();Q(ie),S(!0),ee(!1)}catch(A){console.error("Error submitting exam:",A),alert("Error submitting exam. Please try again."),ee(!1)}};return x?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:r.loading})]})}):a.length===0?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xa,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-2",children:r.noData}),e.jsx("p",{className:"text-gray-500",children:"No P2 mock exam data available."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",style:{scrollBehavior:"smooth"},children:[e.jsx("nav",{className:"bg-white/90 backdrop-blur-md border-b border-gray-200/60 sticky top-0 z-40 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>s("dashboard"),className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100/80 transition-colors",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),r.backToDashboard]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Pe,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:r.title})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center gap-2.5 bg-gradient-to-r from-red-50 to-orange-50 px-4 py-2.5 rounded-xl border border-red-200/50 shadow-sm",children:[e.jsx(Fe,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"font-mono text-red-700 font-bold text-sm",children:le(ge)})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-green-50 to-emerald-50 px-3 py-2 rounded-lg border border-green-200/50 shadow-sm",children:[e.jsx(Ye,{className:"h-3 w-3 text-green-600"}),e.jsxs("span",{className:"text-xs font-medium text-green-700",children:["Total: ",me?.totalMarks||0," marks"]})]}),h.length>0&&e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>R(!0),className:"bg-gradient-to-r from-purple-50 to-indigo-50 hover:from-purple-100 hover:to-indigo-100 border border-purple-200 text-purple-700 hover:text-purple-800 transition-colors",children:[e.jsx(fr,{className:"h-4 w-4 mr-2"}),"Attempted (",h.length,")"]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>s("settings"),className:"hover:bg-gray-100/80 transition-colors",children:e.jsx(Kt,{className:"h-4 w-4"})}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>{localStorage.removeItem("imtehaan_current_page"),s("landing")},className:"hover:bg-gray-100/80 transition-colors",children:e.jsx(js,{className:"h-4 w-4"})})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(M,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:[e.jsx(B,{className:"pb-3 border-b border-gray-100",children:e.jsxs(V,{className:"text-base flex items-center gap-2 text-gray-800",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(rt,{className:"h-3 w-3 text-green-600"})}),r.context]})}),e.jsx(L,{className:"p-4",children:e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg border-2 border-dashed border-gray-300/60 p-4",children:me&&o.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-line",children:me.caseStudyText||"No case study text available"})}),(()=>{const z=(()=>{const te=[];return o.forEach(ve=>{if(ve.image_url&&typeof ve.image_url=="string")if(ve.image_url.includes(",")){const be=ve.image_url.split(",").map(j=>j.trim());te.push(...be)}else te.push(ve.image_url)}),te})(),ie=[...new Set(z)].filter(te=>te&&te.trim()!=="");return ie.length>0?e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4 text-blue-600"}),"Images (",ie.length,")"]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:ie.map((te,ve)=>e.jsx("div",{className:"cursor-pointer transition-all duration-300 rounded-lg overflow-hidden hover:scale-105",onClick:()=>ye(te),children:e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-2 h-32 relative overflow-hidden rounded-lg",children:e.jsx("img",{src:te,alt:`Case Study Image ${ve+1}`,className:"w-full h-full object-contain rounded transition-all duration-300 hover:scale-110",onError:be=>{const j=be.target;j.style.display="none"}})})},`${me.case}-image-${ve}`))})]}):null})()]}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(Xa,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Case study context will be displayed here when available."})]})})})]}),e.jsxs(M,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:[e.jsxs(B,{className:"pb-3 border-b border-gray-100",children:[e.jsxs(V,{className:"text-base flex items-center gap-2 text-gray-800",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Ye,{className:"h-3 w-3 text-purple-600"})}),r.questions]}),e.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 mt-2",children:e.jsxs("span",{className:"font-medium",children:[r.question," ",m+1," ",r.of," ",o.length]})})]}),e.jsxs(L,{className:"p-4 space-y-4",children:[_?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ae,{variant:"outline",className:"text-xs px-2 py-1 border-blue-300 text-blue-700 bg-blue-50",children:["Question ",_.question_number]}),e.jsxs(ae,{variant:"outline",className:"text-xs px-2 py-1 border-purple-300 text-purple-700 bg-purple-50",children:["Part ",_.part]})]}),e.jsxs(ae,{variant:"secondary",className:"text-xs px-2 py-1 bg-green-100 text-green-700 border-green-200",children:[_.marks," ",r.marks]})]}),e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed mb-4",children:e.jsx("p",{className:"whitespace-pre-line",children:_.question})}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Answer:"}),e.jsx("textarea",{className:"w-full h-32 px-3 py-2 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Write your answer here...",value:b[_.question_id]||"",onChange:A=>ce(_.question_id,A.target.value)}),e.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm text-gray-500",children:[e.jsx("span",{children:"Answer saved automatically"}),e.jsxs("span",{children:[b[_.question_id]?.length||0," characters"]})]})]})]}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(Ye,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-600",children:"Question Content"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Questions will be displayed here when available."})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 mt-4",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:Ne,disabled:m===0,className:"flex items-center gap-2 px-4 py-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 transition-all",children:[e.jsx(la,{className:"h-4 w-4"}),r.previous]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:he,disabled:m>=o.length-1,className:"flex items-center gap-2 px-4 py-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 transition-all",children:[r.next,e.jsx(oa,{className:"h-4 w-4"})]})]}),P&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700 font-medium",children:"Please write an answer before moving to the next question."})]}),e.jsx("button",{onClick:()=>k(!1),className:"ml-2 text-red-600 hover:text-red-700",children:e.jsx(Qe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx(C,{className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold py-3 shadow-lg hover:shadow-xl transition-all duration-300 rounded-xl disabled:opacity-50",onClick:Te,disabled:U||h.length===0,children:U?e.jsxs(e.Fragment,{children:[e.jsx(ua,{className:"h-4 w-4 mr-2 animate-spin"}),"Grading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Submit Exam"]})})})]})]})]})}),f&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-[9999] flex items-center justify-center p-4",onClick:()=>v(!1),children:e.jsxs("div",{className:"relative max-w-5xl max-h-[90vh] bg-white rounded-xl shadow-2xl p-4",onClick:A=>A.stopPropagation(),children:[e.jsx("button",{onClick:()=>v(!1),className:"absolute -top-3 -right-3 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-lg font-bold z-10 shadow-lg",children:""}),e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("img",{src:g,alt:"Case Study Image",className:"max-w-full max-h-[80vh] object-contain rounded-lg",onError:A=>{const z=A.target;z.style.display="none"}})})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-5xl max-h-[90vh] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-purple-700 to-indigo-600 text-white p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(fr,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Attempted Questions"}),e.jsxs("p",{className:"text-sm text-purple-100",children:[h.length," questions completed"]})]})]}),e.jsx("button",{onClick:()=>R(!1),className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(Qe,{className:"h-5 w-5 text-white"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ye,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Attempted Questions Yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start answering questions to see them here"})]}):e.jsx("div",{className:"space-y-4",children:h.map((A,z)=>e.jsxs(M,{className:"shadow-md border-0",children:[e.jsx(B,{className:"pb-3 bg-gradient-to-r from-blue-50 to-purple-50 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ae,{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-xs",children:["Question #",A.question_number]}),e.jsxs(ae,{variant:"outline",className:"text-xs border-blue-300 text-blue-700 bg-blue-50",children:["Part ",A.part]}),e.jsxs(ae,{variant:"secondary",className:"text-xs bg-green-100 text-green-700",children:[A.marks," marks"]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(A.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),e.jsxs(L,{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700 mb-2 block",children:"Question:"}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-3 rounded-lg border border-blue-100",children:e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-line",children:A.question})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700 mb-2 block",children:"Your Answer:"}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-3 rounded-lg border border-green-100",children:e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:A.user_answer||e.jsx("span",{className:"text-gray-400 italic",children:"No answer provided"})})})]})]})]},`${A.question_id}-${z}`))})})]})}),se&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-6xl max-h-[90vh] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 text-white p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ct,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Exam Report"}),e.jsx("p",{className:"text-sm text-green-100",children:"P2 Mock Exam Grading Results"})]})]}),e.jsx("button",{onClick:()=>{S(!1),s("dashboard")},className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(Qe,{className:"h-6 w-6 text-white"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(M,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300",children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-700",children:[G.percentage_score,"%"]}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Score"})]})}),e.jsx(M,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-300",children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-700",children:G.overall_grade}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Grade"})]})}),e.jsx(M,{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-300",children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-700",children:[G.marks_obtained,"/",G.total_marks]}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Marks"})]})}),e.jsx(M,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-300",children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-700",children:G.questions_attempted}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"Attempted"})]})})]}),e.jsxs(M,{className:"mb-6 shadow-md",children:[e.jsx(B,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b",children:e.jsxs(V,{className:"flex items-center gap-2 text-blue-800",children:[e.jsx(Ke,{className:"h-5 w-5"}),"Overall Performance"]})}),e.jsx(L,{className:"p-4",children:e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:G.overall_feedback})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs(M,{className:"shadow-md",children:[e.jsx(B,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-b",children:e.jsxs(V,{className:"flex items-center gap-2 text-green-800",children:[e.jsx(Ye,{className:"h-5 w-5"}),"Strengths"]})}),e.jsx(L,{className:"p-4",children:e.jsx("ul",{className:"space-y-2",children:G.strengths_summary?.map((A,z)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx(Ye,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:A})]},z))})})]}),e.jsxs(M,{className:"shadow-md",children:[e.jsx(B,{className:"bg-gradient-to-r from-red-50 to-orange-50 border-b",children:e.jsxs(V,{className:"flex items-center gap-2 text-red-800",children:[e.jsx(Je,{className:"h-5 w-5"}),"Areas for Improvement"]})}),e.jsx(L,{className:"p-4",children:e.jsx("ul",{className:"space-y-2",children:G.weaknesses_summary?.map((A,z)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx(_e,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:A})]},z))})})]})]}),e.jsxs(M,{className:"mb-6 shadow-md",children:[e.jsx(B,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-b",children:e.jsxs(V,{className:"flex items-center gap-2 text-purple-800",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Recommendations"]})}),e.jsx(L,{className:"p-4",children:e.jsx("ul",{className:"space-y-2",children:G.recommendations?.map((A,z)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx(xs,{className:"h-4 w-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:A})]},z))})})]}),e.jsxs(M,{className:"shadow-md",children:[e.jsx(B,{className:"bg-gradient-to-r from-indigo-50 to-blue-50 border-b",children:e.jsxs(V,{className:"flex items-center gap-2 text-indigo-800",children:[e.jsx(rt,{className:"h-5 w-5"}),"Question-wise Results"]})}),e.jsx(L,{className:"p-4",children:e.jsx("div",{className:"space-y-4",children:G.question_grades?.map((A,z)=>e.jsxs(M,{className:"border-2",children:[e.jsx(B,{className:"pb-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ae,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:["Q",A.question_number," Part ",A.part]}),e.jsxs(ae,{variant:"outline",className:"border-purple-300 text-purple-700",children:[A.marks_allocated," marks"]})]}),e.jsxs(ae,{className:`${A.percentage_score>=80?"bg-green-600":A.percentage_score>=60?"bg-yellow-600":"bg-red-600"} text-white`,children:[A.marks_awarded.toFixed(1),"/",A.marks_allocated]})]})}),e.jsxs(L,{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700",children:"Question:"}),e.jsx("p",{className:"text-xs text-gray-900 mt-1",children:A.question_text})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700",children:"Your Answer:"}),e.jsx("p",{className:"text-xs text-gray-700 mt-1 bg-green-50 p-2 rounded",children:A.student_answer})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-semibold text-gray-700 flex items-center gap-1",children:[e.jsx(Ke,{className:"h-3 w-3 text-amber-600"}),"Feedback:"]}),e.jsx("p",{className:"text-xs text-gray-700 mt-1 bg-blue-50 p-2 rounded",children:A.feedback})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("p",{className:"text-[10px] font-semibold text-green-800",children:"Strengths"}),e.jsx("ul",{className:"text-[10px] text-green-700 mt-1 space-y-0.5",children:A.strengths?.map((ie,te)=>e.jsxs("li",{children:[" ",ie]},te))})]}),e.jsxs("div",{className:"bg-orange-50 p-2 rounded",children:[e.jsx("p",{className:"text-[10px] font-semibold text-orange-800",children:"Improvements"}),e.jsx("ul",{className:"text-[10px] text-orange-700 mt-1 space-y-0.5",children:A.improvements?.map((ie,te)=>e.jsxs("li",{children:[" ",ie]},te))})]})]})]})]},z))})})]})]}),e.jsxs("div",{className:"border-t bg-white p-4 flex justify-between items-center",children:[e.jsx(C,{variant:"outline",onClick:()=>S(!1),className:"border-gray-300",children:"Close Report"}),e.jsx(C,{onClick:()=>{S(!1),s("dashboard")},className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white",children:"Return to Dashboard"})]})]})}),e.jsx(_s,{timeSpent:oe,savedTimeRef:D})]})}const f0={en:{topicSelection:"Choose Your Topic",backToDashboard:"Back to Dashboard",selectTopic:"Select a topic to start learning",businessStudies:"Business Studies",startLearning:"Start Learning",loadingTopics:"Loading topics...",debugTopics:"Debug Topic Fetching",noTopicsFound:"No topics found. Please try again.",topicDescription:"Select a topic to access interactive lessons, AI tutor sessions, and comprehensive learning materials.",continueToLessons:"Continue to Lessons"}};function y0(){const{setCurrentPage:s}=Re(),t=f0.en,[r,a]=c.useState([]),[n,i]=c.useState(!0),[l,o]=c.useState(null),[d,m]=c.useState("ai-tutor");c.useEffect(()=>{const y=localStorage.getItem("learningMode")||"ai-tutor";m(y),u()},[]);const u=async()=>{i(!0);try{const{data:y,error:f}=await Lt.getTopicsBySubject("businessStudies");if(f)throw f;a(y||[])}catch{a([])}finally{i(!1)}},x=y=>{o(y),console.log(" Topic selected:",y)},p=()=>{l&&(localStorage.setItem("selectedTopic",JSON.stringify(l)),localStorage.setItem("selectedTopicId",l.topic_id.toString()),s(d==="ai-tutor"?"ai-tutor-topic-selection":d==="visual-learning"?"visual-learning":d==="practice"?"practice":d==="flashcards"?"flashcards":"ai-tutor-topic-selection"))},g=()=>{s("dashboard")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-md border-b border-gray-200/60 sticky top-0 z-40 shadow-sm",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs(C,{variant:"ghost",onClick:g,className:"hover:bg-gray-100 rounded-xl px-4 py-2",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2"}),t.backToDashboard]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${d==="ai-tutor"?"bg-gradient-to-br from-blue-600 to-purple-600":d==="visual-learning"?"bg-gradient-to-br from-green-600 to-emerald-600":d==="practice"?"bg-gradient-to-br from-orange-600 to-red-600":d==="flashcards"?"bg-gradient-to-br from-purple-600 to-pink-600":"bg-gradient-to-br from-green-600 to-emerald-600"}`,children:d==="ai-tutor"?e.jsx(qe,{className:"h-5 w-5 text-white"}):d==="visual-learning"?e.jsx(Pe,{className:"h-5 w-5 text-white"}):d==="practice"?e.jsx(_e,{className:"h-5 w-5 text-white"}):d==="flashcards"?e.jsx(Pe,{className:"h-5 w-5 text-white"}):e.jsx(Pe,{className:"h-5 w-5 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t.topicSelection})]})]}),e.jsxs(C,{size:"lg",className:`px-6 py-2 font-semibold shadow-lg transition-all duration-300 rounded-xl ${l?(d==="ai-tutor"?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700":d==="visual-learning"?"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700":d==="practice"?"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700":d==="flashcards"?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700":"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700")+" text-white hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,onClick:p,disabled:!l,children:[d==="practice"?e.jsx(_e,{className:"h-5 w-5 mr-2"}):d==="flashcards"?e.jsx(qe,{className:"h-5 w-5 mr-2"}):e.jsx(qe,{className:"h-5 w-5 mr-2"}),t.startLearning,e.jsx(Ae,{className:"h-5 w-5 ml-2"})]})]})})}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 h-[calc(100vh-7.5rem)] overflow-hidden",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 h-full",children:[e.jsx("div",{className:"lg:col-span-1 h-full",children:e.jsxs(M,{className:"h-full border-0 shadow-xl bg-white/80 backdrop-blur-sm rounded-3xl overflow-hidden",children:[e.jsxs("div",{className:`p-4 text-white ${d==="ai-tutor"?"bg-gradient-to-br from-blue-500 to-purple-600":d==="visual-learning"?"bg-gradient-to-br from-green-500 to-emerald-600":d==="practice"?"bg-gradient-to-br from-orange-500 to-red-600":d==="flashcards"?"bg-gradient-to-br from-purple-500 to-pink-600":"bg-gradient-to-br from-green-500 to-emerald-600"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[d==="ai-tutor"?e.jsx(qe,{className:"h-5 w-5"}):d==="visual-learning"?e.jsx(Rs,{className:"h-5 w-5"}):d==="practice"?e.jsx(_e,{className:"h-5 w-5"}):d==="flashcards"?e.jsx(Pe,{className:"h-5 w-5"}):e.jsx(Rs,{className:"h-5 w-5"}),e.jsx("h2",{className:"text-lg font-bold",children:d==="ai-tutor"?"AI Learning":d==="visual-learning"?"Business Studies":d==="practice"?"Practice Mode":d==="flashcards"?"Flashcards":"Business Studies"})]}),e.jsx("p",{className:"text-xs opacity-90",children:d==="ai-tutor"?"Master topics through AI-powered tutoring sessions":d==="visual-learning"?"Master business concepts through interactive video lessons":d==="practice"?"Practice and improve with targeted exercises":d==="flashcards"?"Reinforce learning with interactive flashcards":"Master business concepts through interactive lessons"})]}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs",children:"Comprehensive curriculum"})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-xs",children:"Interactive lessons"})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-xs",children:"Expert instructors"})]})]})})]})}),e.jsx("div",{className:"lg:col-span-2 h-full",children:e.jsxs(M,{className:"h-full border-0 shadow-xl bg-white/80 backdrop-blur-sm rounded-3xl overflow-hidden flex flex-col",children:[e.jsx(B,{className:`p-4 text-white flex-shrink-0 ${d==="ai-tutor"?"bg-gradient-to-br from-blue-500 to-purple-600":d==="visual-learning"?"bg-gradient-to-br from-green-500 to-emerald-600":d==="practice"?"bg-gradient-to-br from-orange-500 to-red-600":d==="flashcards"?"bg-gradient-to-br from-purple-500 to-pink-600":"bg-gradient-to-br from-orange-500 to-red-600"}`,children:e.jsxs(V,{className:"flex items-center space-x-3 text-lg",children:[e.jsx(_e,{className:"h-5 w-5"}),e.jsx("span",{children:"Select Topic"})]})}),e.jsx(L,{className:"p-4 flex-1 overflow-y-auto bg-white",children:n?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 text-sm",children:t.loadingTopics})]})}):r.length>0?e.jsx("div",{className:"space-y-1",children:r.map(y=>e.jsx("div",{className:`p-2 rounded-md border cursor-pointer transition-all duration-200 ${l?.topic_id===y.topic_id?"border-green-500 bg-green-50 shadow-sm":"border-gray-200 hover:border-green-300 hover:bg-green-50"}`,onClick:()=>x(y),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:`h-3 w-3 ${l?.topic_id===y.topic_id?"text-green-600":"text-gray-400"}`}),e.jsx("div",{children:e.jsx("h3",{className:"text-xs font-medium text-gray-900",children:y.title})})]})},y.topic_id))}):e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-3 text-sm",children:t.noTopicsFound}),e.jsxs(C,{variant:"outline",size:"sm",onClick:u,className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})})]})})]})})]})}const b0={en:{lessons:"Lessons",backToDashboard:"Back to Dashboard",selectTopic:"Select a topic to start your AI-powered learning session",businessStudies:"Business Studies",startAISession:"Start Learning",loadingTopics:"Loading topics...",noTopicsFound:"No topics found. Please try again.",aiTutorDescription:"Your personal AI tutor is ready to help you master any topic through interactive conversations and personalized explanations.",continueToAITutor:"Continue to AI Tutor",aiFeatures:"AI Features",personalizedLearning:"Personalized Learning",interactiveConversations:"Interactive Conversations",instantFeedback:"Instant Feedback",adaptiveExplanations:"Adaptive Explanations"}};function v0(){const{setCurrentPage:s}=Re(),t=b0.en,[r,a]=c.useState("businessStudies"),[n,i]=c.useState([]),[l,o]=c.useState(!1),[d,m]=c.useState(null);c.useEffect(()=>{r&&u()},[r]);const u=async()=>{o(!0);try{const{data:y,error:f}=await Lt.getTopicsBySubject("businessStudies");if(f)throw f;i(y||[])}catch{i([])}finally{o(!1)}},x=y=>{m(y),console.log(" Topic selected for AI Tutor:",y)},p=()=>{d&&(localStorage.setItem("selectedTopic",JSON.stringify(d)),localStorage.setItem("selectedTopicId",d.topic_id.toString()),s("ai-tutor"))},g=()=>{s("dashboard")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-md border-b border-gray-200/60 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs(C,{variant:"ghost",onClick:g,className:"hover:bg-gray-100 rounded-xl px-4 py-2",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2"}),t.backToDashboard]}),e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:t.lessons})}),e.jsxs(C,{size:"lg",className:`px-6 py-2 font-semibold shadow-lg transition-all duration-300 rounded-xl ${d?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,onClick:p,disabled:!d,children:[e.jsx(qe,{className:"h-5 w-5 mr-2"}),t.startAISession,e.jsx(Ae,{className:"h-5 w-5 ml-2"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 h-[calc(100vh-7rem)] overflow-hidden",children:e.jsxs("div",{className:"flex gap-6 h-full",children:[e.jsx("div",{className:"w-64 flex-shrink-0 h-full",children:e.jsxs(M,{className:"h-full shadow-lg border-0 bg-white/90 backdrop-blur-sm flex flex-col",children:[e.jsx(B,{className:"pb-3 border-b border-gray-200 flex-shrink-0",children:e.jsxs(V,{className:"text-base flex items-center gap-2 text-gray-800",children:[e.jsx(Pe,{className:"h-5 w-5 text-blue-600"}),"Subjects"]})}),e.jsxs(L,{className:"p-4 space-y-2 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Us,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Mathematics"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pr,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Physics"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"p-3 border-2 border-gray-200 rounded-xl cursor-not-allowed opacity-40 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ir,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Chemistry"})]})}),e.jsx("div",{className:"absolute top-full mt-2 left-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Coming Soon"})]}),e.jsxs("div",{className:`p-3 border-2 rounded-xl cursor-pointer transition-all duration-300 ${r==="businessStudies"?"border-blue-500 bg-gradient-to-br from-blue-50 to-purple-50 shadow-md":"border-gray-200 hover:border-blue-400 hover:shadow-sm"}`,onClick:()=>a("businessStudies"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rs,{className:`h-5 w-5 ${r==="businessStudies"?"text-blue-600":"text-gray-600"}`}),e.jsx("span",{className:`text-sm font-medium ${r==="businessStudies"?"text-blue-700":"text-gray-700"}`,children:"Business Studies"})]}),r==="businessStudies"&&e.jsx("div",{className:"mt-2 ml-8",children:e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"})})]})]})]})}),e.jsx("div",{className:"flex-1 h-full",children:e.jsxs(M,{className:"h-full shadow-lg border-0 bg-white/90 backdrop-blur-sm flex flex-col",children:[e.jsx(B,{className:"pb-3 border-b border-gray-200 flex-shrink-0",children:e.jsxs(V,{className:"text-base flex items-center gap-2 text-gray-800",children:[e.jsx(qe,{className:"h-5 w-5 text-blue-600"}),"Select Your Topic"]})}),e.jsx(L,{className:"p-4 flex-1 overflow-y-auto bg-white",children:l?e.jsxs("div",{className:"flex items-center justify-center py-20 text-gray-500",children:[e.jsx(Ve,{className:"h-6 w-6 animate-spin mr-3"}),e.jsx("span",{className:"text-lg",children:"Loading topics..."})]}):n.length>0?e.jsx("div",{className:"space-y-2",children:n.map((y,f)=>e.jsx("button",{onClick:()=>x(y),className:`group w-full p-4 rounded-xl border-2 transition-all duration-200 text-left bg-white ${d?.topic_id===y.topic_id?"border-blue-500 shadow-sm":"border-gray-200 hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${d?.topic_id===y.topic_id?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 group-hover:bg-blue-100"}`,children:e.jsx("span",{className:"text-sm font-bold",children:f+1})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:`text-sm font-semibold ${d?.topic_id===y.topic_id?"text-blue-700":"text-gray-700 group-hover:text-blue-600"}`,children:y.title})}),d?.topic_id===y.topic_id&&e.jsx(Me,{className:"h-5 w-5 text-blue-600 flex-shrink-0"})]})},y.topic_id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(qe,{className:"h-16 w-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 text-center",children:"No topics available for this subject"})]})})]})})]})})]})}function j0({message:s,type:t="info",duration:r=5e3,onClose:a}){const[n,i]=c.useState(!0);c.useEffect(()=>{const d=setTimeout(()=>{i(!1),setTimeout(a,300)},r);return()=>clearTimeout(d)},[r,a]);const l=()=>{switch(t){case"success":return e.jsx(Me,{className:"h-4 w-4 text-green-600"});case"error":return e.jsx(Je,{className:"h-4 w-4 text-red-600"});case"warning":return e.jsx(Je,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(cc,{className:"h-4 w-4 text-blue-600"})}},o=()=>{switch(t){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-blue-50 border-blue-200"}};return e.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full p-4 rounded-lg border shadow-lg transition-all duration-300 ${n?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"} ${o()}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[l(),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s})}),e.jsx("button",{onClick:()=>{i(!1),setTimeout(a,300)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Qe,{className:"h-4 w-4"})})]})})}const w0=He.createContext(void 0);function N0({children:s}){const[t,r]=c.useState([]),a=(i,l="info")=>{const o=Date.now().toString();r(d=>[...d,{id:o,message:i,type:l}])},n=i=>{r(l=>l.filter(o=>o.id!==i))};return e.jsxs(w0.Provider,{value:{showToast:a},children:[s,e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(i=>e.jsx(j0,{message:i.message,type:i.type,onClose:()=>n(i.id)},i.id))})]})}class S0 extends Error{constructor(t){super(t),this.name="EnvValidationError"}}const k0=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"];function _0(){const s={VITE_OPENAI_API_KEY:"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",VITE_LANGSMITH_TRACING:"true",VITE_LANGSMITH_ENDPOINT:"https://api.smith.langchain.com",VITE_LANGSMITH_PROJECT:"imtehaan",VITE_LANGSMITH_API_KEY:"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",VITE_API_BASE_URL:"https://web-production-03ef3.up.railway.app",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},t=[],r=[];for(const a of k0)(!s[a]||s[a]?.trim()==="")&&t.push(a);if(t.length>0)throw new S0(`Missing required environment variables:
${t.map(a=>`  - ${a}`).join(`
`)}

Please create a .env file in the project root with these variables.`);s.VITE_SUPABASE_URL&&!s.VITE_SUPABASE_URL.startsWith("http")&&r.push("VITE_SUPABASE_URL should start with http:// or https://"),s.VITE_SUPABASE_ANON_KEY&&s.VITE_SUPABASE_ANON_KEY.length<100&&r.push("VITE_SUPABASE_ANON_KEY seems too short. Are you sure it's correct?"),r.length>0&&s.NODE_ENV==="development"&&(console.warn(" Environment Configuration Warnings:"),r.forEach(a=>console.warn(`   - ${a}`))),console.log(" Environment variables validated successfully")}const zo=c.createContext(void 0);function Re(){const s=c.useContext(zo);if(s===void 0)throw new Error("useApp must be used within an AppProvider");return s}function C0(){return He.useEffect(()=>{try{_0()}catch(s){console.error("Environment validation failed:",s)}},[]),e.jsx(qd,{children:e.jsx(Gd,{children:e.jsx(T0,{})})})}function T0(){const{user:s,loading:t}=Aa(),r=()=>{try{const se=localStorage.getItem("imtehaan_current_page");if(se)return se}catch(se){console.error("Error reading saved page:",se)}return"landing"},[a,n]=c.useState(r()),[i,l]=c.useState("en"),[o,d]=c.useState("igcse"),[m,u]=c.useState(null),[x,p]=c.useState(!1),[g,y]=c.useState(!1);He.useEffect(()=>{console.log(" Initializing analytics buffer service..."),s?.id&&Ut.initializeFreshDay(s.id),Ut.syncPendingData()},[s?.id]),He.useEffect(()=>{try{localStorage.setItem("imtehaan_current_page",a)}catch(se){console.error("Error saving current page:",se)}},[a]),He.useEffect(()=>{if(!t){if(s){const se={id:s.id,email:s.email,full_name:s.name,avatar_url:void 0};u(se);const S=["landing","login","signup","forgot-password","reset-password"];if(S.includes(a)){const U=localStorage.getItem("imtehaan_current_page");U&&!S.includes(U)?n(U):n("dashboard")}}else u(null),["landing","login","signup","forgot-password","reset-password"].includes(a)||n("landing");y(!0)}},[s,t]),He.useEffect(()=>{const se=window.location.hash;se.includes("type=recovery")?(n("reset-password"),window.history.replaceState(null,"",window.location.pathname)):(se.includes("type=signup")||se.includes("type=email"))&&(n("login"),window.history.replaceState(null,"",window.location.pathname))},[]);const[f,v]=c.useState([{id:"1",name:"Mathematics",curriculum:"all",grade:"IGCSE",topics:[],progress:75,color:"bg-blue-500"},{id:"2",name:"Physics",curriculum:"all",grade:"IGCSE",topics:[],progress:60,color:"bg-green-500"},{id:"3",name:"Chemistry",curriculum:"all",grade:"IGCSE",topics:[],progress:85,color:"bg-purple-500"},{id:"4",name:"Biology",curriculum:"all",grade:"IGCSE",topics:[],progress:45,color:"bg-orange-500"}]),[b,w]=c.useState(null),[h,T]=c.useState([]),[E,R]=c.useState([]);He.useEffect(()=>{p(!0)},[]);const P={currentPage:a,setCurrentPage:n,language:i,setLanguage:l,curriculum:o,setCurriculum:d,user:m,setUser:u,subjects:f,setSubjects:v,currentSubject:b,setCurrentSubject:w,studyPlans:h,setStudyPlans:T,studySessions:E,setStudySessions:R};if(t&&!g)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!x)return e.jsx("div",{className:"min-h-screen bg-background text-foreground flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});!["landing","login","signup","forgot-password","reset-password"].includes(a)&&!m&&n("login");const Q=()=>{switch(a){case"landing":return e.jsx(dn,{});case"login":return e.jsx(Vd,{});case"signup":return e.jsx(Qd,{});case"forgot-password":return e.jsx(Kd,{});case"reset-password":return e.jsx(Zd,{});case"onboarding":return e.jsx(eu,{});case"dashboard":return e.jsx(Ag,{});case"study-plan":return e.jsx(Pg,{});case"practice":return e.jsx(Fg,{});case"flashcard-selection":return e.jsx(Bg,{});case"flashcards":return e.jsx(zg,{});case"subject":return e.jsx(Ug,{});case"feedback":return e.jsx(Wg,{});case"pricing":return e.jsx(Yg,{});case"ai-tutor":return e.jsx(Jg,{});case"ai-tutor-topic-selection":return e.jsx(v0,{});case"visual-learning":return e.jsx(t0,{});case"analytics":return e.jsx(n0,{});case"settings":return e.jsx(c0,{});case"mock-exam":return e.jsx(m0,{});case"mock-exam-selection":return e.jsx(x0,{});case"mock-exam-p2":return e.jsx(p0,{});case"topic-selection":return e.jsx(y0,{});default:return e.jsx(dn,{})}};return e.jsx(zo.Provider,{value:P,children:e.jsx(N0,{children:e.jsx("div",{className:"min-h-screen bg-background text-foreground",dir:"ltr",children:Q()})})})}const zn=document.getElementById("root");zn&&na.createRoot(zn).render(e.jsx(He.StrictMode,{children:e.jsx(C0,{})}));
